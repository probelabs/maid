var DL=Object.create;var xf=Object.defineProperty;var FL=Object.getOwnPropertyDescriptor;var BL=Object.getOwnPropertyNames;var $L=Object.getPrototypeOf,KL=Object.prototype.hasOwnProperty;var Wr=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var GL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of BL(t))!KL.call(e,i)&&i!==r&&xf(e,i,{get:()=>t[i],enumerable:!(n=FL(t,i))||n.enumerable});return e};var jL=(e,t,r)=>(r=e!=null?DL($L(e)):{},GL(t||!e||!e.__esModule?xf(r,"default",{value:e,enumerable:!0}):r,e));var $m=d((ele,Bm)=>{function KP(){this.__data__=[],this.size=0}Bm.exports=KP});var Pr=d((tle,Km)=>{function GP(e,t){return e===t||e!==e&&t!==t}Km.exports=GP});var ki=d((rle,Gm)=>{var jP=Pr();function WP(e,t){for(var r=e.length;r--;)if(jP(e[r][0],t))return r;return-1}Gm.exports=WP});var Wm=d((nle,jm)=>{var HP=ki(),zP=Array.prototype,VP=zP.splice;function YP(e){var t=this.__data__,r=HP(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():VP.call(t,r,1),--this.size,!0}jm.exports=YP});var zm=d((ile,Hm)=>{var XP=ki();function QP(e){var t=this.__data__,r=XP(t,e);return r<0?void 0:t[r][1]}Hm.exports=QP});var Ym=d((ole,Vm)=>{var ZP=ki();function JP(e){return ZP(this.__data__,e)>-1}Vm.exports=JP});var Qm=d((sle,Xm)=>{var eU=ki();function tU(e,t){var r=this.__data__,n=eU(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}Xm.exports=tU});var Mi=d((ale,Zm)=>{var rU=$m(),nU=Wm(),iU=zm(),oU=Ym(),sU=Qm();function Un(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Un.prototype.clear=rU;Un.prototype.delete=nU;Un.prototype.get=iU;Un.prototype.has=oU;Un.prototype.set=sU;Zm.exports=Un});var eg=d((ule,Jm)=>{var aU=Mi();function uU(){this.__data__=new aU,this.size=0}Jm.exports=uU});var rg=d((lle,tg)=>{function lU(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}tg.exports=lU});var ig=d((cle,ng)=>{function cU(e){return this.__data__.get(e)}ng.exports=cU});var sg=d((fle,og)=>{function fU(e){return this.__data__.has(e)}og.exports=fU});var ql=d((hle,ag)=>{var hU=typeof global=="object"&&global&&global.Object===Object&&global;ag.exports=hU});var at=d((dle,ug)=>{var dU=ql(),pU=typeof self=="object"&&self&&self.Object===Object&&self,mU=dU||pU||Function("return this")();ug.exports=mU});var Ur=d((ple,lg)=>{var gU=at(),EU=gU.Symbol;lg.exports=EU});var dg=d((mle,hg)=>{var cg=Ur(),fg=Object.prototype,xU=fg.hasOwnProperty,TU=fg.toString,Pi=cg?cg.toStringTag:void 0;function yU(e){var t=xU.call(e,Pi),r=e[Pi];try{e[Pi]=void 0;var n=!0}catch{}var i=TU.call(e);return n&&(t?e[Pi]=r:delete e[Pi]),i}hg.exports=yU});var mg=d((gle,pg)=>{var AU=Object.prototype,SU=AU.toString;function OU(e){return SU.call(e)}pg.exports=OU});var mr=d((Ele,xg)=>{var gg=Ur(),vU=dg(),bU=mg(),LU="[object Null]",NU="[object Undefined]",Eg=gg?gg.toStringTag:void 0;function IU(e){return e==null?e===void 0?NU:LU:Eg&&Eg in Object(e)?vU(e):bU(e)}xg.exports=IU});var Qe=d((xle,Tg)=>{function CU(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}Tg.exports=CU});var qn=d((Tle,yg)=>{var RU=mr(),_U=Qe(),wU="[object AsyncFunction]",kU="[object Function]",MU="[object GeneratorFunction]",PU="[object Proxy]";function UU(e){if(!_U(e))return!1;var t=RU(e);return t==kU||t==MU||t==wU||t==PU}yg.exports=UU});var Sg=d((yle,Ag)=>{var qU=at(),DU=qU["__core-js_shared__"];Ag.exports=DU});var bg=d((Ale,vg)=>{var Dl=Sg(),Og=(function(){var e=/[^.]+$/.exec(Dl&&Dl.keys&&Dl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function FU(e){return!!Og&&Og in e}vg.exports=FU});var Fl=d((Sle,Lg)=>{var BU=Function.prototype,$U=BU.toString;function KU(e){if(e!=null){try{return $U.call(e)}catch{}try{return e+""}catch{}}return""}Lg.exports=KU});var Ig=d((Ole,Ng)=>{var GU=qn(),jU=bg(),WU=Qe(),HU=Fl(),zU=/[\\^$.*+?()[\]{}|]/g,VU=/^\[object .+?Constructor\]$/,YU=Function.prototype,XU=Object.prototype,QU=YU.toString,ZU=XU.hasOwnProperty,JU=RegExp("^"+QU.call(ZU).replace(zU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eq(e){if(!WU(e)||jU(e))return!1;var t=GU(e)?JU:VU;return t.test(HU(e))}Ng.exports=eq});var Rg=d((vle,Cg)=>{function tq(e,t){return e?.[t]}Cg.exports=tq});var gr=d((ble,_g)=>{var rq=Ig(),nq=Rg();function iq(e,t){var r=nq(e,t);return rq(r)?r:void 0}_g.exports=iq});var ma=d((Lle,wg)=>{var oq=gr(),sq=at(),aq=oq(sq,"Map");wg.exports=aq});var Ui=d((Nle,kg)=>{var uq=gr(),lq=uq(Object,"create");kg.exports=lq});var Ug=d((Ile,Pg)=>{var Mg=Ui();function cq(){this.__data__=Mg?Mg(null):{},this.size=0}Pg.exports=cq});var Dg=d((Cle,qg)=>{function fq(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}qg.exports=fq});var Bg=d((Rle,Fg)=>{var hq=Ui(),dq="__lodash_hash_undefined__",pq=Object.prototype,mq=pq.hasOwnProperty;function gq(e){var t=this.__data__;if(hq){var r=t[e];return r===dq?void 0:r}return mq.call(t,e)?t[e]:void 0}Fg.exports=gq});var Kg=d((_le,$g)=>{var Eq=Ui(),xq=Object.prototype,Tq=xq.hasOwnProperty;function yq(e){var t=this.__data__;return Eq?t[e]!==void 0:Tq.call(t,e)}$g.exports=yq});var jg=d((wle,Gg)=>{var Aq=Ui(),Sq="__lodash_hash_undefined__";function Oq(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Aq&&t===void 0?Sq:t,this}Gg.exports=Oq});var Hg=d((kle,Wg)=>{var vq=Ug(),bq=Dg(),Lq=Bg(),Nq=Kg(),Iq=jg();function Dn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Dn.prototype.clear=vq;Dn.prototype.delete=bq;Dn.prototype.get=Lq;Dn.prototype.has=Nq;Dn.prototype.set=Iq;Wg.exports=Dn});var Yg=d((Mle,Vg)=>{var zg=Hg(),Cq=Mi(),Rq=ma();function _q(){this.size=0,this.__data__={hash:new zg,map:new(Rq||Cq),string:new zg}}Vg.exports=_q});var Qg=d((Ple,Xg)=>{function wq(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}Xg.exports=wq});var qi=d((Ule,Zg)=>{var kq=Qg();function Mq(e,t){var r=e.__data__;return kq(t)?r[typeof t=="string"?"string":"hash"]:r.map}Zg.exports=Mq});var eE=d((qle,Jg)=>{var Pq=qi();function Uq(e){var t=Pq(this,e).delete(e);return this.size-=t?1:0,t}Jg.exports=Uq});var rE=d((Dle,tE)=>{var qq=qi();function Dq(e){return qq(this,e).get(e)}tE.exports=Dq});var iE=d((Fle,nE)=>{var Fq=qi();function Bq(e){return Fq(this,e).has(e)}nE.exports=Bq});var sE=d((Ble,oE)=>{var $q=qi();function Kq(e,t){var r=$q(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}oE.exports=Kq});var ga=d(($le,aE)=>{var Gq=Yg(),jq=eE(),Wq=rE(),Hq=iE(),zq=sE();function Fn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fn.prototype.clear=Gq;Fn.prototype.delete=jq;Fn.prototype.get=Wq;Fn.prototype.has=Hq;Fn.prototype.set=zq;aE.exports=Fn});var lE=d((Kle,uE)=>{var Vq=Mi(),Yq=ma(),Xq=ga(),Qq=200;function Zq(e,t){var r=this.__data__;if(r instanceof Vq){var n=r.__data__;if(!Yq||n.length<Qq-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xq(n)}return r.set(e,t),this.size=r.size,this}uE.exports=Zq});var Di=d((Gle,cE)=>{var Jq=Mi(),e0=eg(),t0=rg(),r0=ig(),n0=sg(),i0=lE();function Bn(e){var t=this.__data__=new Jq(e);this.size=t.size}Bn.prototype.clear=e0;Bn.prototype.delete=t0;Bn.prototype.get=r0;Bn.prototype.has=n0;Bn.prototype.set=i0;cE.exports=Bn});var Ea=d((jle,fE)=>{function o0(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}fE.exports=o0});var Bl=d((Wle,hE)=>{var s0=gr(),a0=(function(){try{var e=s0(Object,"defineProperty");return e({},"",{}),e}catch{}})();hE.exports=a0});var Fi=d((Hle,pE)=>{var dE=Bl();function u0(e,t,r){t=="__proto__"&&dE?dE(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}pE.exports=u0});var Bi=d((zle,mE)=>{var l0=Fi(),c0=Pr(),f0=Object.prototype,h0=f0.hasOwnProperty;function d0(e,t,r){var n=e[t];(!(h0.call(e,t)&&c0(n,r))||r===void 0&&!(t in e))&&l0(e,t,r)}mE.exports=d0});var $n=d((Vle,gE)=>{var p0=Bi(),m0=Fi();function g0(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),i?m0(r,s,u):p0(r,s,u)}return r}gE.exports=g0});var xE=d((Yle,EE)=>{function E0(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}EE.exports=E0});var mt=d((Xle,TE)=>{function x0(e){return e!=null&&typeof e=="object"}TE.exports=x0});var AE=d((Qle,yE)=>{var T0=mr(),y0=mt(),A0="[object Arguments]";function S0(e){return y0(e)&&T0(e)==A0}yE.exports=S0});var Kn=d((Zle,vE)=>{var SE=AE(),O0=mt(),OE=Object.prototype,v0=OE.hasOwnProperty,b0=OE.propertyIsEnumerable,L0=SE((function(){return arguments})())?SE:function(e){return O0(e)&&v0.call(e,"callee")&&!b0.call(e,"callee")};vE.exports=L0});var pe=d((Jle,bE)=>{var N0=Array.isArray;bE.exports=N0});var NE=d((ece,LE)=>{function I0(){return!1}LE.exports=I0});var qr=d(($i,Gn)=>{var C0=at(),R0=NE(),RE=typeof $i=="object"&&$i&&!$i.nodeType&&$i,IE=RE&&typeof Gn=="object"&&Gn&&!Gn.nodeType&&Gn,_0=IE&&IE.exports===RE,CE=_0?C0.Buffer:void 0,w0=CE?CE.isBuffer:void 0,k0=w0||R0;Gn.exports=k0});var Ki=d((tce,_E)=>{var M0=9007199254740991,P0=/^(?:0|[1-9]\d*)$/;function U0(e,t){var r=typeof e;return t=t??M0,!!t&&(r=="number"||r!="symbol"&&P0.test(e))&&e>-1&&e%1==0&&e<t}_E.exports=U0});var xa=d((rce,wE)=>{var q0=9007199254740991;function D0(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=q0}wE.exports=D0});var ME=d((nce,kE)=>{var F0=mr(),B0=xa(),$0=mt(),K0="[object Arguments]",G0="[object Array]",j0="[object Boolean]",W0="[object Date]",H0="[object Error]",z0="[object Function]",V0="[object Map]",Y0="[object Number]",X0="[object Object]",Q0="[object RegExp]",Z0="[object Set]",J0="[object String]",e1="[object WeakMap]",t1="[object ArrayBuffer]",r1="[object DataView]",n1="[object Float32Array]",i1="[object Float64Array]",o1="[object Int8Array]",s1="[object Int16Array]",a1="[object Int32Array]",u1="[object Uint8Array]",l1="[object Uint8ClampedArray]",c1="[object Uint16Array]",f1="[object Uint32Array]",te={};te[n1]=te[i1]=te[o1]=te[s1]=te[a1]=te[u1]=te[l1]=te[c1]=te[f1]=!0;te[K0]=te[G0]=te[t1]=te[j0]=te[r1]=te[W0]=te[H0]=te[z0]=te[V0]=te[Y0]=te[X0]=te[Q0]=te[Z0]=te[J0]=te[e1]=!1;function h1(e){return $0(e)&&B0(e.length)&&!!te[F0(e)]}kE.exports=h1});var Gi=d((ice,PE)=>{function d1(e){return function(t){return e(t)}}PE.exports=d1});var Ta=d((ji,jn)=>{var p1=ql(),UE=typeof ji=="object"&&ji&&!ji.nodeType&&ji,Wi=UE&&typeof jn=="object"&&jn&&!jn.nodeType&&jn,m1=Wi&&Wi.exports===UE,$l=m1&&p1.process,g1=(function(){try{var e=Wi&&Wi.require&&Wi.require("util").types;return e||$l&&$l.binding&&$l.binding("util")}catch{}})();jn.exports=g1});var Wn=d((oce,FE)=>{var E1=ME(),x1=Gi(),qE=Ta(),DE=qE&&qE.isTypedArray,T1=DE?x1(DE):E1;FE.exports=T1});var Kl=d((sce,BE)=>{var y1=xE(),A1=Kn(),S1=pe(),O1=qr(),v1=Ki(),b1=Wn(),L1=Object.prototype,N1=L1.hasOwnProperty;function I1(e,t){var r=S1(e),n=!r&&A1(e),i=!r&&!n&&O1(e),o=!r&&!n&&!i&&b1(e),a=r||n||i||o,s=a?y1(e.length,String):[],u=s.length;for(var l in e)(t||N1.call(e,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||v1(l,u)))&&s.push(l);return s}BE.exports=I1});var Hi=d((ace,$E)=>{var C1=Object.prototype;function R1(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||C1;return e===r}$E.exports=R1});var Gl=d((uce,KE)=>{function _1(e,t){return function(r){return e(t(r))}}KE.exports=_1});var jE=d((lce,GE)=>{var w1=Gl(),k1=w1(Object.keys,Object);GE.exports=k1});var ya=d((cce,WE)=>{var M1=Hi(),P1=jE(),U1=Object.prototype,q1=U1.hasOwnProperty;function D1(e){if(!M1(e))return P1(e);var t=[];for(var r in Object(e))q1.call(e,r)&&r!="constructor"&&t.push(r);return t}WE.exports=D1});var Nt=d((fce,HE)=>{var F1=qn(),B1=xa();function $1(e){return e!=null&&B1(e.length)&&!F1(e)}HE.exports=$1});var Kt=d((hce,zE)=>{var K1=Kl(),G1=ya(),j1=Nt();function W1(e){return j1(e)?K1(e):G1(e)}zE.exports=W1});var YE=d((dce,VE)=>{var H1=$n(),z1=Kt();function V1(e,t){return e&&H1(t,z1(t),e)}VE.exports=V1});var QE=d((pce,XE)=>{function Y1(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}XE.exports=Y1});var JE=d((mce,ZE)=>{var X1=Qe(),Q1=Hi(),Z1=QE(),J1=Object.prototype,eD=J1.hasOwnProperty;function tD(e){if(!X1(e))return Z1(e);var t=Q1(e),r=[];for(var n in e)n=="constructor"&&(t||!eD.call(e,n))||r.push(n);return r}ZE.exports=tD});var Er=d((gce,ex)=>{var rD=Kl(),nD=JE(),iD=Nt();function oD(e){return iD(e)?rD(e,!0):nD(e)}ex.exports=oD});var rx=d((Ece,tx)=>{var sD=$n(),aD=Er();function uD(e,t){return e&&sD(t,aD(t),e)}tx.exports=uD});var jl=d((zi,Hn)=>{var lD=at(),sx=typeof zi=="object"&&zi&&!zi.nodeType&&zi,nx=sx&&typeof Hn=="object"&&Hn&&!Hn.nodeType&&Hn,cD=nx&&nx.exports===sx,ix=cD?lD.Buffer:void 0,ox=ix?ix.allocUnsafe:void 0;function fD(e,t){if(t)return e.slice();var r=e.length,n=ox?ox(r):new e.constructor(r);return e.copy(n),n}Hn.exports=fD});var Wl=d((xce,ax)=>{function hD(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}ax.exports=hD});var Hl=d((Tce,ux)=>{function dD(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}ux.exports=dD});var zl=d((yce,lx)=>{function pD(){return[]}lx.exports=pD});var Aa=d((Ace,fx)=>{var mD=Hl(),gD=zl(),ED=Object.prototype,xD=ED.propertyIsEnumerable,cx=Object.getOwnPropertySymbols,TD=cx?function(e){return e==null?[]:(e=Object(e),mD(cx(e),function(t){return xD.call(e,t)}))}:gD;fx.exports=TD});var dx=d((Sce,hx)=>{var yD=$n(),AD=Aa();function SD(e,t){return yD(e,AD(e),t)}hx.exports=SD});var Sa=d((Oce,px)=>{function OD(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}px.exports=OD});var Vi=d((vce,mx)=>{var vD=Gl(),bD=vD(Object.getPrototypeOf,Object);mx.exports=bD});var Vl=d((bce,gx)=>{var LD=Sa(),ND=Vi(),ID=Aa(),CD=zl(),RD=Object.getOwnPropertySymbols,_D=RD?function(e){for(var t=[];e;)LD(t,ID(e)),e=ND(e);return t}:CD;gx.exports=_D});var xx=d((Lce,Ex)=>{var wD=$n(),kD=Vl();function MD(e,t){return wD(e,kD(e),t)}Ex.exports=MD});var Yl=d((Nce,Tx)=>{var PD=Sa(),UD=pe();function qD(e,t,r){var n=t(e);return UD(e)?n:PD(n,r(e))}Tx.exports=qD});var Xl=d((Ice,yx)=>{var DD=Yl(),FD=Aa(),BD=Kt();function $D(e){return DD(e,BD,FD)}yx.exports=$D});var Sx=d((Cce,Ax)=>{var KD=Yl(),GD=Vl(),jD=Er();function WD(e){return KD(e,jD,GD)}Ax.exports=WD});var vx=d((Rce,Ox)=>{var HD=gr(),zD=at(),VD=HD(zD,"DataView");Ox.exports=VD});var Lx=d((_ce,bx)=>{var YD=gr(),XD=at(),QD=YD(XD,"Promise");bx.exports=QD});var Ql=d((wce,Nx)=>{var ZD=gr(),JD=at(),eF=ZD(JD,"Set");Nx.exports=eF});var Cx=d((kce,Ix)=>{var tF=gr(),rF=at(),nF=tF(rF,"WeakMap");Ix.exports=nF});var Fr=d((Mce,Ux)=>{var Zl=vx(),Jl=ma(),ec=Lx(),tc=Ql(),rc=Cx(),Px=mr(),zn=Fl(),Rx="[object Map]",iF="[object Object]",_x="[object Promise]",wx="[object Set]",kx="[object WeakMap]",Mx="[object DataView]",oF=zn(Zl),sF=zn(Jl),aF=zn(ec),uF=zn(tc),lF=zn(rc),Dr=Px;(Zl&&Dr(new Zl(new ArrayBuffer(1)))!=Mx||Jl&&Dr(new Jl)!=Rx||ec&&Dr(ec.resolve())!=_x||tc&&Dr(new tc)!=wx||rc&&Dr(new rc)!=kx)&&(Dr=function(e){var t=Px(e),r=t==iF?e.constructor:void 0,n=r?zn(r):"";if(n)switch(n){case oF:return Mx;case sF:return Rx;case aF:return _x;case uF:return wx;case lF:return kx}return t});Ux.exports=Dr});var Dx=d((Pce,qx)=>{var cF=Object.prototype,fF=cF.hasOwnProperty;function hF(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&fF.call(e,"index")&&(r.index=e.index,r.input=e.input),r}qx.exports=hF});var nc=d((Uce,Fx)=>{var dF=at(),pF=dF.Uint8Array;Fx.exports=pF});var Oa=d((qce,$x)=>{var Bx=nc();function mF(e){var t=new e.constructor(e.byteLength);return new Bx(t).set(new Bx(e)),t}$x.exports=mF});var Gx=d((Dce,Kx)=>{var gF=Oa();function EF(e,t){var r=t?gF(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}Kx.exports=EF});var Wx=d((Fce,jx)=>{var xF=/\w*$/;function TF(e){var t=new e.constructor(e.source,xF.exec(e));return t.lastIndex=e.lastIndex,t}jx.exports=TF});var Xx=d((Bce,Yx)=>{var Hx=Ur(),zx=Hx?Hx.prototype:void 0,Vx=zx?zx.valueOf:void 0;function yF(e){return Vx?Object(Vx.call(e)):{}}Yx.exports=yF});var ic=d(($ce,Qx)=>{var AF=Oa();function SF(e,t){var r=t?AF(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}Qx.exports=SF});var Jx=d((Kce,Zx)=>{var OF=Oa(),vF=Gx(),bF=Wx(),LF=Xx(),NF=ic(),IF="[object Boolean]",CF="[object Date]",RF="[object Map]",_F="[object Number]",wF="[object RegExp]",kF="[object Set]",MF="[object String]",PF="[object Symbol]",UF="[object ArrayBuffer]",qF="[object DataView]",DF="[object Float32Array]",FF="[object Float64Array]",BF="[object Int8Array]",$F="[object Int16Array]",KF="[object Int32Array]",GF="[object Uint8Array]",jF="[object Uint8ClampedArray]",WF="[object Uint16Array]",HF="[object Uint32Array]";function zF(e,t,r){var n=e.constructor;switch(t){case UF:return OF(e);case IF:case CF:return new n(+e);case qF:return vF(e,r);case DF:case FF:case BF:case $F:case KF:case GF:case jF:case WF:case HF:return NF(e,r);case RF:return new n;case _F:case MF:return new n(e);case wF:return bF(e);case kF:return new n;case PF:return LF(e)}}Zx.exports=zF});var oc=d((Gce,tT)=>{var VF=Qe(),eT=Object.create,YF=(function(){function e(){}return function(t){if(!VF(t))return{};if(eT)return eT(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();tT.exports=YF});var sc=d((jce,rT)=>{var XF=oc(),QF=Vi(),ZF=Hi();function JF(e){return typeof e.constructor=="function"&&!ZF(e)?XF(QF(e)):{}}rT.exports=JF});var iT=d((Wce,nT)=>{var eB=Fr(),tB=mt(),rB="[object Map]";function nB(e){return tB(e)&&eB(e)==rB}nT.exports=nB});var uT=d((Hce,aT)=>{var iB=iT(),oB=Gi(),oT=Ta(),sT=oT&&oT.isMap,sB=sT?oB(sT):iB;aT.exports=sB});var cT=d((zce,lT)=>{var aB=Fr(),uB=mt(),lB="[object Set]";function cB(e){return uB(e)&&aB(e)==lB}lT.exports=cB});var pT=d((Vce,dT)=>{var fB=cT(),hB=Gi(),fT=Ta(),hT=fT&&fT.isSet,dB=hT?hB(hT):fB;dT.exports=dB});var ac=d((Yce,xT)=>{var pB=Di(),mB=Ea(),gB=Bi(),EB=YE(),xB=rx(),TB=jl(),yB=Wl(),AB=dx(),SB=xx(),OB=Xl(),vB=Sx(),bB=Fr(),LB=Dx(),NB=Jx(),IB=sc(),CB=pe(),RB=qr(),_B=uT(),wB=Qe(),kB=pT(),MB=Kt(),PB=Er(),UB=1,qB=2,DB=4,mT="[object Arguments]",FB="[object Array]",BB="[object Boolean]",$B="[object Date]",KB="[object Error]",gT="[object Function]",GB="[object GeneratorFunction]",jB="[object Map]",WB="[object Number]",ET="[object Object]",HB="[object RegExp]",zB="[object Set]",VB="[object String]",YB="[object Symbol]",XB="[object WeakMap]",QB="[object ArrayBuffer]",ZB="[object DataView]",JB="[object Float32Array]",e$="[object Float64Array]",t$="[object Int8Array]",r$="[object Int16Array]",n$="[object Int32Array]",i$="[object Uint8Array]",o$="[object Uint8ClampedArray]",s$="[object Uint16Array]",a$="[object Uint32Array]",Z={};Z[mT]=Z[FB]=Z[QB]=Z[ZB]=Z[BB]=Z[$B]=Z[JB]=Z[e$]=Z[t$]=Z[r$]=Z[n$]=Z[jB]=Z[WB]=Z[ET]=Z[HB]=Z[zB]=Z[VB]=Z[YB]=Z[i$]=Z[o$]=Z[s$]=Z[a$]=!0;Z[KB]=Z[gT]=Z[XB]=!1;function va(e,t,r,n,i,o){var a,s=t&UB,u=t&qB,l=t&DB;if(r&&(a=i?r(e,n,i,o):r(e)),a!==void 0)return a;if(!wB(e))return e;var c=CB(e);if(c){if(a=LB(e),!s)return yB(e,a)}else{var f=bB(e),h=f==gT||f==GB;if(RB(e))return TB(e,s);if(f==ET||f==mT||h&&!i){if(a=u||h?{}:IB(e),!s)return u?SB(e,xB(a,e)):AB(e,EB(a,e))}else{if(!Z[f])return i?e:{};a=NB(e,f,s)}}o||(o=new pB);var p=o.get(e);if(p)return p;o.set(e,a),kB(e)?e.forEach(function(E){a.add(va(E,t,r,E,e,o))}):_B(e)&&e.forEach(function(E,y){a.set(y,va(E,t,r,y,e,o))});var m=l?u?vB:OB:u?PB:MB,g=c?void 0:m(e);return mB(g||e,function(E,y){g&&(y=E,E=e[y]),gB(a,y,va(E,t,r,y,e,o))}),a}xT.exports=va});var yT=d((Xce,TT)=>{var u$=ac(),l$=4;function c$(e){return u$(e,l$)}TT.exports=c$});var ba=d((Qce,AT)=>{function f$(e){return function(){return e}}AT.exports=f$});var OT=d((Zce,ST)=>{function h$(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++i];if(r(o[u],u,o)===!1)break}return t}}ST.exports=h$});var La=d((Jce,vT)=>{var d$=OT(),p$=d$();vT.exports=p$});var Na=d((efe,bT)=>{var m$=La(),g$=Kt();function E$(e,t){return e&&m$(e,t,g$)}bT.exports=E$});var NT=d((tfe,LT)=>{var x$=Nt();function T$(e,t){return function(r,n){if(r==null)return r;if(!x$(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}LT.exports=T$});var Yi=d((rfe,IT)=>{var y$=Na(),A$=NT(),S$=A$(y$);IT.exports=S$});var xr=d((nfe,CT)=>{function O$(e){return e}CT.exports=O$});var uc=d((ife,RT)=>{var v$=xr();function b$(e){return typeof e=="function"?e:v$}RT.exports=b$});var lc=d((ofe,_T)=>{var L$=Ea(),N$=Yi(),I$=uc(),C$=pe();function R$(e,t){var r=C$(e)?L$:N$;return r(e,I$(t))}_T.exports=R$});var cc=d((sfe,wT)=>{wT.exports=lc()});var MT=d((afe,kT)=>{var _$=Yi();function w$(e,t){var r=[];return _$(e,function(n,i,o){t(n,i,o)&&r.push(n)}),r}kT.exports=w$});var UT=d((ufe,PT)=>{var k$="__lodash_hash_undefined__";function M$(e){return this.__data__.set(e,k$),this}PT.exports=M$});var DT=d((lfe,qT)=>{function P$(e){return this.__data__.has(e)}qT.exports=P$});var fc=d((cfe,FT)=>{var U$=ga(),q$=UT(),D$=DT();function Ia(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new U$;++t<r;)this.add(e[t])}Ia.prototype.add=Ia.prototype.push=q$;Ia.prototype.has=D$;FT.exports=Ia});var $T=d((ffe,BT)=>{function F$(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}BT.exports=F$});var hc=d((hfe,KT)=>{function B$(e,t){return e.has(t)}KT.exports=B$});var dc=d((dfe,GT)=>{var $$=fc(),K$=$T(),G$=hc(),j$=1,W$=2;function H$(e,t,r,n,i,o){var a=r&j$,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var f=-1,h=!0,p=r&W$?new $$:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var m=e[f],g=t[f];if(n)var E=a?n(g,m,f,t,e,o):n(m,g,f,e,t,o);if(E!==void 0){if(E)continue;h=!1;break}if(p){if(!K$(t,function(y,x){if(!G$(p,x)&&(m===y||i(m,y,r,n,o)))return p.push(x)})){h=!1;break}}else if(!(m===g||i(m,g,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}GT.exports=H$});var WT=d((pfe,jT)=>{function z$(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}jT.exports=z$});var Ca=d((mfe,HT)=>{function V$(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}HT.exports=V$});var QT=d((gfe,XT)=>{var zT=Ur(),VT=nc(),Y$=Pr(),X$=dc(),Q$=WT(),Z$=Ca(),J$=1,e2=2,t2="[object Boolean]",r2="[object Date]",n2="[object Error]",i2="[object Map]",o2="[object Number]",s2="[object RegExp]",a2="[object Set]",u2="[object String]",l2="[object Symbol]",c2="[object ArrayBuffer]",f2="[object DataView]",YT=zT?zT.prototype:void 0,pc=YT?YT.valueOf:void 0;function h2(e,t,r,n,i,o,a){switch(r){case f2:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case c2:return!(e.byteLength!=t.byteLength||!o(new VT(e),new VT(t)));case t2:case r2:case o2:return Y$(+e,+t);case n2:return e.name==t.name&&e.message==t.message;case s2:case u2:return e==t+"";case i2:var s=Q$;case a2:var u=n&J$;if(s||(s=Z$),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;n|=e2,a.set(e,t);var c=X$(s(e),s(t),n,i,o,a);return a.delete(e),c;case l2:if(pc)return pc.call(e)==pc.call(t)}return!1}XT.exports=h2});var ey=d((Efe,JT)=>{var ZT=Xl(),d2=1,p2=Object.prototype,m2=p2.hasOwnProperty;function g2(e,t,r,n,i,o){var a=r&d2,s=ZT(e),u=s.length,l=ZT(t),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in t:m2.call(t,h)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);for(var E=a;++f<u;){h=s[f];var y=e[h],x=t[h];if(n)var A=a?n(x,y,h,t,e,o):n(y,x,h,e,t,o);if(!(A===void 0?y===x||i(y,x,r,n,o):A)){g=!1;break}E||(E=h=="constructor")}if(g&&!E){var O=e.constructor,N=t.constructor;O!=N&&"constructor"in e&&"constructor"in t&&!(typeof O=="function"&&O instanceof O&&typeof N=="function"&&N instanceof N)&&(g=!1)}return o.delete(e),o.delete(t),g}JT.exports=g2});var uy=d((xfe,ay)=>{var mc=Di(),E2=dc(),x2=QT(),T2=ey(),ty=Fr(),ry=pe(),ny=qr(),y2=Wn(),A2=1,iy="[object Arguments]",oy="[object Array]",Ra="[object Object]",S2=Object.prototype,sy=S2.hasOwnProperty;function O2(e,t,r,n,i,o){var a=ry(e),s=ry(t),u=a?oy:ty(e),l=s?oy:ty(t);u=u==iy?Ra:u,l=l==iy?Ra:l;var c=u==Ra,f=l==Ra,h=u==l;if(h&&ny(e)){if(!ny(t))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new mc),a||y2(e)?E2(e,t,r,n,i,o):x2(e,t,u,r,n,i,o);if(!(r&A2)){var p=c&&sy.call(e,"__wrapped__"),m=f&&sy.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,E=m?t.value():t;return o||(o=new mc),i(g,E,r,n,o)}}return h?(o||(o=new mc),T2(e,t,r,n,i,o)):!1}ay.exports=O2});var gc=d((Tfe,fy)=>{var v2=uy(),ly=mt();function cy(e,t,r,n,i){return e===t?!0:e==null||t==null||!ly(e)&&!ly(t)?e!==e&&t!==t:v2(e,t,r,n,cy,i)}fy.exports=cy});var dy=d((yfe,hy)=>{var b2=Di(),L2=gc(),N2=1,I2=2;function C2(e,t,r,n){var i=r.length,o=i,a=!n;if(e==null)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=r[i];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(l===void 0&&!(u in e))return!1}else{var f=new b2;if(n)var h=n(l,c,u,e,t,f);if(!(h===void 0?L2(c,l,N2|I2,n,f):h))return!1}}return!0}hy.exports=C2});var Ec=d((Afe,py)=>{var R2=Qe();function _2(e){return e===e&&!R2(e)}py.exports=_2});var gy=d((Sfe,my)=>{var w2=Ec(),k2=Kt();function M2(e){for(var t=k2(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,w2(i)]}return t}my.exports=M2});var xc=d((Ofe,Ey)=>{function P2(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}Ey.exports=P2});var Ty=d((vfe,xy)=>{var U2=dy(),q2=gy(),D2=xc();function F2(e){var t=q2(e);return t.length==1&&t[0][2]?D2(t[0][0],t[0][1]):function(r){return r===e||U2(r,e,t)}}xy.exports=F2});var Br=d((bfe,yy)=>{var B2=mr(),$2=mt(),K2="[object Symbol]";function G2(e){return typeof e=="symbol"||$2(e)&&B2(e)==K2}yy.exports=G2});var _a=d((Lfe,Ay)=>{var j2=pe(),W2=Br(),H2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z2=/^\w*$/;function V2(e,t){if(j2(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||W2(e)?!0:z2.test(e)||!H2.test(e)||t!=null&&e in Object(t)}Ay.exports=V2});var vy=d((Nfe,Oy)=>{var Sy=ga(),Y2="Expected a function";function Tc(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Y2);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Tc.Cache||Sy),r}Tc.Cache=Sy;Oy.exports=Tc});var Ly=d((Ife,by)=>{var X2=vy(),Q2=500;function Z2(e){var t=X2(e,function(n){return r.size===Q2&&r.clear(),n}),r=t.cache;return t}by.exports=Z2});var Iy=d((Cfe,Ny)=>{var J2=Ly(),eK=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tK=/\\(\\)?/g,rK=J2(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(eK,function(r,n,i,o){t.push(i?o.replace(tK,"$1"):n||r)}),t});Ny.exports=rK});var Xi=d((Rfe,Cy)=>{function nK(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}Cy.exports=nK});var Py=d((_fe,My)=>{var Ry=Ur(),iK=Xi(),oK=pe(),sK=Br(),aK=1/0,_y=Ry?Ry.prototype:void 0,wy=_y?_y.toString:void 0;function ky(e){if(typeof e=="string")return e;if(oK(e))return iK(e,ky)+"";if(sK(e))return wy?wy.call(e):"";var t=e+"";return t=="0"&&1/e==-aK?"-0":t}My.exports=ky});var yc=d((wfe,Uy)=>{var uK=Py();function lK(e){return e==null?"":uK(e)}Uy.exports=lK});var Qi=d((kfe,qy)=>{var cK=pe(),fK=_a(),hK=Iy(),dK=yc();function pK(e,t){return cK(e)?e:fK(e,t)?[e]:hK(dK(e))}qy.exports=pK});var Vn=d((Mfe,Dy)=>{var mK=Br(),gK=1/0;function EK(e){if(typeof e=="string"||mK(e))return e;var t=e+"";return t=="0"&&1/e==-gK?"-0":t}Dy.exports=EK});var Zi=d((Pfe,Fy)=>{var xK=Qi(),TK=Vn();function yK(e,t){t=xK(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[TK(t[r++])];return r&&r==n?e:void 0}Fy.exports=yK});var $y=d((Ufe,By)=>{var AK=Zi();function SK(e,t,r){var n=e==null?void 0:AK(e,t);return n===void 0?r:n}By.exports=SK});var Gy=d((qfe,Ky)=>{function OK(e,t){return e!=null&&t in Object(e)}Ky.exports=OK});var Ac=d((Dfe,jy)=>{var vK=Qi(),bK=Kn(),LK=pe(),NK=Ki(),IK=xa(),CK=Vn();function RK(e,t,r){t=vK(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=CK(t[n]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&IK(i)&&NK(a,i)&&(LK(e)||bK(e)))}jy.exports=RK});var Sc=d((Ffe,Wy)=>{var _K=Gy(),wK=Ac();function kK(e,t){return e!=null&&wK(e,t,_K)}Wy.exports=kK});var zy=d((Bfe,Hy)=>{var MK=gc(),PK=$y(),UK=Sc(),qK=_a(),DK=Ec(),FK=xc(),BK=Vn(),$K=1,KK=2;function GK(e,t){return qK(e)&&DK(t)?FK(BK(e),t):function(r){var n=PK(r,e);return n===void 0&&n===t?UK(r,e):MK(t,n,$K|KK)}}Hy.exports=GK});var Oc=d(($fe,Vy)=>{function jK(e){return function(t){return t?.[e]}}Vy.exports=jK});var Xy=d((Kfe,Yy)=>{var WK=Zi();function HK(e){return function(t){return WK(t,e)}}Yy.exports=HK});var Zy=d((Gfe,Qy)=>{var zK=Oc(),VK=Xy(),YK=_a(),XK=Vn();function QK(e){return YK(e)?zK(XK(e)):VK(e)}Qy.exports=QK});var It=d((jfe,Jy)=>{var ZK=Ty(),JK=zy(),eG=xr(),tG=pe(),rG=Zy();function nG(e){return typeof e=="function"?e:e==null?eG:typeof e=="object"?tG(e)?JK(e[0],e[1]):ZK(e):rG(e)}Jy.exports=nG});var vc=d((Wfe,eA)=>{var iG=Hl(),oG=MT(),sG=It(),aG=pe();function uG(e,t){var r=aG(e)?iG:oG;return r(e,sG(t,3))}eA.exports=uG});var rA=d((Hfe,tA)=>{var lG=Object.prototype,cG=lG.hasOwnProperty;function fG(e,t){return e!=null&&cG.call(e,t)}tA.exports=fG});var bc=d((zfe,nA)=>{var hG=rA(),dG=Ac();function pG(e,t){return e!=null&&dG(e,t,hG)}nA.exports=pG});var oA=d((Vfe,iA)=>{var mG=ya(),gG=Fr(),EG=Kn(),xG=pe(),TG=Nt(),yG=qr(),AG=Hi(),SG=Wn(),OG="[object Map]",vG="[object Set]",bG=Object.prototype,LG=bG.hasOwnProperty;function NG(e){if(e==null)return!0;if(TG(e)&&(xG(e)||typeof e=="string"||typeof e.splice=="function"||yG(e)||SG(e)||EG(e)))return!e.length;var t=gG(e);if(t==OG||t==vG)return!e.size;if(AG(e))return!mG(e).length;for(var r in e)if(LG.call(e,r))return!1;return!0}iA.exports=NG});var Lc=d((Yfe,sA)=>{function IG(e){return e===void 0}sA.exports=IG});var Nc=d((Xfe,aA)=>{var CG=Yi(),RG=Nt();function _G(e,t){var r=-1,n=RG(e)?Array(e.length):[];return CG(e,function(i,o,a){n[++r]=t(i,o,a)}),n}aA.exports=_G});var Ic=d((Qfe,uA)=>{var wG=Xi(),kG=It(),MG=Nc(),PG=pe();function UG(e,t){var r=PG(e)?wG:MG;return r(e,kG(t,3))}uA.exports=UG});var cA=d((Zfe,lA)=>{function qG(e,t,r,n){var i=-1,o=e==null?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}lA.exports=qG});var hA=d((Jfe,fA)=>{function DG(e,t,r,n,i){return i(e,function(o,a,s){r=n?(n=!1,o):t(r,o,a,s)}),r}fA.exports=DG});var Cc=d((ehe,dA)=>{var FG=cA(),BG=Yi(),$G=It(),KG=hA(),GG=pe();function jG(e,t,r){var n=GG(e)?FG:KG,i=arguments.length<3;return n(e,$G(t,4),r,i,BG)}dA.exports=jG});var mA=d((the,pA)=>{var WG=mr(),HG=pe(),zG=mt(),VG="[object String]";function YG(e){return typeof e=="string"||!HG(e)&&zG(e)&&WG(e)==VG}pA.exports=YG});var EA=d((rhe,gA)=>{var XG=Oc(),QG=XG("length");gA.exports=QG});var TA=d((nhe,xA)=>{var ZG="\\ud800-\\udfff",JG="\\u0300-\\u036f",ej="\\ufe20-\\ufe2f",tj="\\u20d0-\\u20ff",rj=JG+ej+tj,nj="\\ufe0e\\ufe0f",ij="\\u200d",oj=RegExp("["+ij+ZG+rj+nj+"]");function sj(e){return oj.test(e)}xA.exports=sj});var IA=d((ihe,NA)=>{var AA="\\ud800-\\udfff",aj="\\u0300-\\u036f",uj="\\ufe20-\\ufe2f",lj="\\u20d0-\\u20ff",cj=aj+uj+lj,fj="\\ufe0e\\ufe0f",hj="["+AA+"]",Rc="["+cj+"]",_c="\\ud83c[\\udffb-\\udfff]",dj="(?:"+Rc+"|"+_c+")",SA="[^"+AA+"]",OA="(?:\\ud83c[\\udde6-\\uddff]){2}",vA="[\\ud800-\\udbff][\\udc00-\\udfff]",pj="\\u200d",bA=dj+"?",LA="["+fj+"]?",mj="(?:"+pj+"(?:"+[SA,OA,vA].join("|")+")"+LA+bA+")*",gj=LA+bA+mj,Ej="(?:"+[SA+Rc+"?",Rc,OA,vA,hj].join("|")+")",yA=RegExp(_c+"(?="+_c+")|"+Ej+gj,"g");function xj(e){for(var t=yA.lastIndex=0;yA.test(e);)++t;return t}NA.exports=xj});var RA=d((ohe,CA)=>{var Tj=EA(),yj=TA(),Aj=IA();function Sj(e){return yj(e)?Aj(e):Tj(e)}CA.exports=Sj});var wA=d((she,_A)=>{var Oj=ya(),vj=Fr(),bj=Nt(),Lj=mA(),Nj=RA(),Ij="[object Map]",Cj="[object Set]";function Rj(e){if(e==null)return 0;if(bj(e))return Lj(e)?Nj(e):e.length;var t=vj(e);return t==Ij||t==Cj?e.size:Oj(e).length}_A.exports=Rj});var MA=d((ahe,kA)=>{var _j=Ea(),wj=oc(),kj=Na(),Mj=It(),Pj=Vi(),Uj=pe(),qj=qr(),Dj=qn(),Fj=Qe(),Bj=Wn();function $j(e,t,r){var n=Uj(e),i=n||qj(e)||Bj(e);if(t=Mj(t,4),r==null){var o=e&&e.constructor;i?r=n?new o:[]:Fj(e)?r=Dj(o)?wj(Pj(e)):{}:r={}}return(i?_j:kj)(e,function(a,s,u){return t(r,a,s,u)}),r}kA.exports=$j});var DA=d((uhe,qA)=>{var PA=Ur(),Kj=Kn(),Gj=pe(),UA=PA?PA.isConcatSpreadable:void 0;function jj(e){return Gj(e)||Kj(e)||!!(UA&&e&&e[UA])}qA.exports=jj});var wa=d((lhe,BA)=>{var Wj=Sa(),Hj=DA();function FA(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=Hj),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?FA(s,t-1,r,n,i):Wj(i,s):n||(i[i.length]=s)}return i}BA.exports=FA});var KA=d((che,$A)=>{function zj(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}$A.exports=zj});var wc=d((fhe,jA)=>{var Vj=KA(),GA=Math.max;function Yj(e,t,r){return t=GA(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=GA(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),Vj(e,this,s)}}jA.exports=Yj});var zA=d((hhe,HA)=>{var Xj=ba(),WA=Bl(),Qj=xr(),Zj=WA?function(e,t){return WA(e,"toString",{configurable:!0,enumerable:!1,value:Xj(t),writable:!0})}:Qj;HA.exports=Zj});var YA=d((dhe,VA)=>{var Jj=800,eW=16,tW=Date.now;function rW(e){var t=0,r=0;return function(){var n=tW(),i=eW-(n-r);if(r=n,i>0){if(++t>=Jj)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}VA.exports=rW});var kc=d((phe,XA)=>{var nW=zA(),iW=YA(),oW=iW(nW);XA.exports=oW});var Ji=d((mhe,QA)=>{var sW=xr(),aW=wc(),uW=kc();function lW(e,t){return uW(aW(e,t,sW),e+"")}QA.exports=lW});var Mc=d((ghe,ZA)=>{function cW(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}ZA.exports=cW});var eS=d((Ehe,JA)=>{function fW(e){return e!==e}JA.exports=fW});var rS=d((xhe,tS)=>{function hW(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}tS.exports=hW});var iS=d((The,nS)=>{var dW=Mc(),pW=eS(),mW=rS();function gW(e,t,r){return t===t?mW(e,t,r):dW(e,pW,r)}nS.exports=gW});var sS=d((yhe,oS)=>{var EW=iS();function xW(e,t){var r=e==null?0:e.length;return!!r&&EW(e,t,0)>-1}oS.exports=xW});var uS=d((Ahe,aS)=>{function TW(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}aS.exports=TW});var cS=d((She,lS)=>{function yW(){}lS.exports=yW});var hS=d((Ohe,fS)=>{var Pc=Ql(),AW=cS(),SW=Ca(),OW=1/0,vW=Pc&&1/SW(new Pc([,-0]))[1]==OW?function(e){return new Pc(e)}:AW;fS.exports=vW});var pS=d((vhe,dS)=>{var bW=fc(),LW=sS(),NW=uS(),IW=hc(),CW=hS(),RW=Ca(),_W=200;function wW(e,t,r){var n=-1,i=LW,o=e.length,a=!0,s=[],u=s;if(r)a=!1,i=NW;else if(o>=_W){var l=t?null:CW(e);if(l)return RW(l);a=!1,i=IW,u=new bW}else u=t?[]:s;e:for(;++n<o;){var c=e[n],f=t?t(c):c;if(c=r||c!==0?c:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(c)}else i(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}dS.exports=wW});var Uc=d((bhe,mS)=>{var kW=Nt(),MW=mt();function PW(e){return MW(e)&&kW(e)}mS.exports=PW});var ES=d((Lhe,gS)=>{var UW=wa(),qW=Ji(),DW=pS(),FW=Uc(),BW=qW(function(e){return DW(UW(e,1,FW,!0))});gS.exports=BW});var TS=d((Nhe,xS)=>{var $W=Xi();function KW(e,t){return $W(t,function(r){return e[r]})}xS.exports=KW});var qc=d((Ihe,yS)=>{var GW=TS(),jW=Kt();function WW(e){return e==null?[]:GW(e,jW(e))}yS.exports=WW});var Ze=d((Che,AS)=>{var ka;if(typeof Wr=="function")try{ka={clone:yT(),constant:ba(),each:cc(),filter:vc(),has:bc(),isArray:pe(),isEmpty:oA(),isFunction:qn(),isUndefined:Lc(),keys:Kt(),map:Ic(),reduce:Cc(),size:wA(),transform:MA(),union:ES(),values:qc()}}catch{}ka||(ka=window._);AS.exports=ka});var Ma=d((_he,bS)=>{"use strict";var C=Ze();bS.exports=M;var HW="\0",$r="\0",SS="";function M(e){this._isDirected=C.has(e,"directed")?e.directed:!0,this._isMultigraph=C.has(e,"multigraph")?e.multigraph:!1,this._isCompound=C.has(e,"compound")?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=C.constant(void 0),this._defaultEdgeLabelFn=C.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[$r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}M.prototype._nodeCount=0;M.prototype._edgeCount=0;M.prototype.isDirected=function(){return this._isDirected};M.prototype.isMultigraph=function(){return this._isMultigraph};M.prototype.isCompound=function(){return this._isCompound};M.prototype.setGraph=function(e){return this._label=e,this};M.prototype.graph=function(){return this._label};M.prototype.setDefaultNodeLabel=function(e){return C.isFunction(e)||(e=C.constant(e)),this._defaultNodeLabelFn=e,this};M.prototype.nodeCount=function(){return this._nodeCount};M.prototype.nodes=function(){return C.keys(this._nodes)};M.prototype.sources=function(){var e=this;return C.filter(this.nodes(),function(t){return C.isEmpty(e._in[t])})};M.prototype.sinks=function(){var e=this;return C.filter(this.nodes(),function(t){return C.isEmpty(e._out[t])})};M.prototype.setNodes=function(e,t){var r=arguments,n=this;return C.each(e,function(i){r.length>1?n.setNode(i,t):n.setNode(i)}),this};M.prototype.setNode=function(e,t){return C.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=$r,this._children[e]={},this._children[$r][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)};M.prototype.node=function(e){return this._nodes[e]};M.prototype.hasNode=function(e){return C.has(this._nodes,e)};M.prototype.removeNode=function(e){var t=this;if(C.has(this._nodes,e)){var r=function(n){t.removeEdge(t._edgeObjs[n])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],C.each(this.children(e),function(n){t.setParent(n)}),delete this._children[e]),C.each(C.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],C.each(C.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this};M.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(C.isUndefined(t))t=$r;else{t+="";for(var r=t;!C.isUndefined(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this};M.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]};M.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==$r)return t}};M.prototype.children=function(e){if(C.isUndefined(e)&&(e=$r),this._isCompound){var t=this._children[e];if(t)return C.keys(t)}else{if(e===$r)return this.nodes();if(this.hasNode(e))return[]}};M.prototype.predecessors=function(e){var t=this._preds[e];if(t)return C.keys(t)};M.prototype.successors=function(e){var t=this._sucs[e];if(t)return C.keys(t)};M.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return C.union(t,this.successors(e))};M.prototype.isLeaf=function(e){var t;return this.isDirected()?t=this.successors(e):t=this.neighbors(e),t.length===0};M.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;C.each(this._nodes,function(o,a){e(a)&&t.setNode(a,o)}),C.each(this._edgeObjs,function(o){t.hasNode(o.v)&&t.hasNode(o.w)&&t.setEdge(o,r.edge(o))});var n={};function i(o){var a=r.parent(o);return a===void 0||t.hasNode(a)?(n[o]=a,a):a in n?n[a]:i(a)}return this._isCompound&&C.each(t.nodes(),function(o){t.setParent(o,i(o))}),t};M.prototype.setDefaultEdgeLabel=function(e){return C.isFunction(e)||(e=C.constant(e)),this._defaultEdgeLabelFn=e,this};M.prototype.edgeCount=function(){return this._edgeCount};M.prototype.edges=function(){return C.values(this._edgeObjs)};M.prototype.setPath=function(e,t){var r=this,n=arguments;return C.reduce(e,function(i,o){return n.length>1?r.setEdge(i,o,t):r.setEdge(i,o),o}),this};M.prototype.setEdge=function(){var e,t,r,n,i=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(e=o.v,t=o.w,r=o.name,arguments.length===2&&(n=arguments[1],i=!0)):(e=o,t=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),e=""+e,t=""+t,C.isUndefined(r)||(r=""+r);var a=eo(this._isDirected,e,t,r);if(C.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=n),this;if(!C.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=i?n:this._defaultEdgeLabelFn(e,t,r);var s=zW(this._isDirected,e,t,r);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,OS(this._preds[t],e),OS(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this};M.prototype.edge=function(e,t,r){var n=arguments.length===1?Dc(this._isDirected,arguments[0]):eo(this._isDirected,e,t,r);return this._edgeLabels[n]};M.prototype.hasEdge=function(e,t,r){var n=arguments.length===1?Dc(this._isDirected,arguments[0]):eo(this._isDirected,e,t,r);return C.has(this._edgeLabels,n)};M.prototype.removeEdge=function(e,t,r){var n=arguments.length===1?Dc(this._isDirected,arguments[0]):eo(this._isDirected,e,t,r),i=this._edgeObjs[n];return i&&(e=i.v,t=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],vS(this._preds[t],e),vS(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this};M.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var n=C.values(r);return t?C.filter(n,function(i){return i.v===t}):n}};M.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var n=C.values(r);return t?C.filter(n,function(i){return i.w===t}):n}};M.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))};function OS(e,t){e[t]?e[t]++:e[t]=1}function vS(e,t){--e[t]||delete e[t]}function eo(e,t,r,n){var i=""+t,o=""+r;if(!e&&i>o){var a=i;i=o,o=a}return i+SS+o+SS+(C.isUndefined(n)?HW:n)}function zW(e,t,r,n){var i=""+t,o=""+r;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return n&&(s.name=n),s}function Dc(e,t){return eo(e,t.v,t.w,t.name)}});var NS=d((whe,LS)=>{LS.exports="2.1.8"});var CS=d((khe,IS)=>{IS.exports={Graph:Ma(),version:NS()}});var _S=d((Mhe,RS)=>{var Ct=Ze(),VW=Ma();RS.exports={write:YW,read:ZW};function YW(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:XW(e),edges:QW(e)};return Ct.isUndefined(e.graph())||(t.value=Ct.clone(e.graph())),t}function XW(e){return Ct.map(e.nodes(),function(t){var r=e.node(t),n=e.parent(t),i={v:t};return Ct.isUndefined(r)||(i.value=r),Ct.isUndefined(n)||(i.parent=n),i})}function QW(e){return Ct.map(e.edges(),function(t){var r=e.edge(t),n={v:t.v,w:t.w};return Ct.isUndefined(t.name)||(n.name=t.name),Ct.isUndefined(r)||(n.value=r),n})}function ZW(e){var t=new VW(e.options).setGraph(e.value);return Ct.each(e.nodes,function(r){t.setNode(r.v,r.value),r.parent&&t.setParent(r.v,r.parent)}),Ct.each(e.edges,function(r){t.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),t}});var kS=d((Phe,wS)=>{var Pa=Ze();wS.exports=JW;function JW(e){var t={},r=[],n;function i(o){Pa.has(t,o)||(t[o]=!0,n.push(o),Pa.each(e.successors(o),i),Pa.each(e.predecessors(o),i))}return Pa.each(e.nodes(),function(o){n=[],i(o),n.length&&r.push(n)}),r}});var Fc=d((Uhe,PS)=>{var MS=Ze();PS.exports=ut;function ut(){this._arr=[],this._keyIndices={}}ut.prototype.size=function(){return this._arr.length};ut.prototype.keys=function(){return this._arr.map(function(e){return e.key})};ut.prototype.has=function(e){return MS.has(this._keyIndices,e)};ut.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority};ut.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};ut.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!MS.has(r,e)){var n=this._arr,i=n.length;return r[e]=i,n.push({key:e,priority:t}),this._decrease(i),!0}return!1};ut.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key};ut.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)};ut.prototype._heapify=function(e){var t=this._arr,r=2*e,n=r+1,i=e;r<t.length&&(i=t[r].priority<t[i].priority?r:i,n<t.length&&(i=t[n].priority<t[i].priority?n:i),i!==e&&(this._swap(e,i),this._heapify(i)))};ut.prototype._decrease=function(e){for(var t=this._arr,r=t[e].priority,n;e!==0&&(n=e>>1,!(t[n].priority<r));)this._swap(e,n),e=n};ut.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,i=r[e],o=r[t];r[e]=o,r[t]=i,n[o.key]=e,n[i.key]=t}});var Bc=d((qhe,US)=>{var eH=Ze(),tH=Fc();US.exports=nH;var rH=eH.constant(1);function nH(e,t,r,n){return iH(e,String(t),r||rH,n||function(i){return e.outEdges(i)})}function iH(e,t,r,n){var i={},o=new tH,a,s,u=function(l){var c=l.v!==a?l.v:l.w,f=i[c],h=r(l),p=s.distance+h;if(h<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+l+" Weight: "+h);p<f.distance&&(f.distance=p,f.predecessor=a,o.decrease(c,p))};for(e.nodes().forEach(function(l){var c=l===t?0:Number.POSITIVE_INFINITY;i[l]={distance:c},o.add(l,c)});o.size()>0&&(a=o.removeMin(),s=i[a],s.distance!==Number.POSITIVE_INFINITY);)n(a).forEach(u);return i}});var DS=d((Dhe,qS)=>{var oH=Bc(),sH=Ze();qS.exports=aH;function aH(e,t,r){return sH.transform(e.nodes(),function(n,i){n[i]=oH(e,i,t,r)},{})}});var $c=d((Fhe,BS)=>{var FS=Ze();BS.exports=uH;function uH(e){var t=0,r=[],n={},i=[];function o(a){var s=n[a]={onStack:!0,lowlink:t,index:t++};if(r.push(a),e.successors(a).forEach(function(c){FS.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(o(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var u=[],l;do l=r.pop(),n[l].onStack=!1,u.push(l);while(a!==l);i.push(u)}}return e.nodes().forEach(function(a){FS.has(n,a)||o(a)}),i}});var KS=d((Bhe,$S)=>{var lH=Ze(),cH=$c();$S.exports=fH;function fH(e){return lH.filter(cH(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}});var jS=d(($he,GS)=>{var hH=Ze();GS.exports=pH;var dH=hH.constant(1);function pH(e,t,r){return mH(e,t||dH,r||function(n){return e.outEdges(n)})}function mH(e,t,r){var n={},i=e.nodes();return i.forEach(function(o){n[o]={},n[o][o]={distance:0},i.forEach(function(a){o!==a&&(n[o][a]={distance:Number.POSITIVE_INFINITY})}),r(o).forEach(function(a){var s=a.v===o?a.w:a.v,u=t(a);n[o][s]={distance:u,predecessor:o}})}),i.forEach(function(o){var a=n[o];i.forEach(function(s){var u=n[s];i.forEach(function(l){var c=u[o],f=a[l],h=u[l],p=c.distance+f.distance;p<h.distance&&(h.distance=p,h.predecessor=f.predecessor)})})}),n}});var Kc=d((Khe,HS)=>{var to=Ze();HS.exports=WS;WS.CycleException=Ua;function WS(e){var t={},r={},n=[];function i(o){if(to.has(r,o))throw new Ua;to.has(t,o)||(r[o]=!0,t[o]=!0,to.each(e.predecessors(o),i),delete r[o],n.push(o))}if(to.each(e.sinks(),i),to.size(t)!==e.nodeCount())throw new Ua;return n}function Ua(){}Ua.prototype=new Error});var YS=d((Ghe,VS)=>{var zS=Kc();VS.exports=gH;function gH(e){try{zS(e)}catch(t){if(t instanceof zS.CycleException)return!1;throw t}return!0}});var Gc=d((jhe,QS)=>{var qa=Ze();QS.exports=EH;function EH(e,t,r){qa.isArray(t)||(t=[t]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],o={};return qa.each(t,function(a){if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);XS(e,a,r==="post",o,n,i)}),i}function XS(e,t,r,n,i,o){qa.has(n,t)||(n[t]=!0,r||o.push(t),qa.each(i(t),function(a){XS(e,a,r,n,i,o)}),r&&o.push(t))}});var JS=d((Whe,ZS)=>{var xH=Gc();ZS.exports=TH;function TH(e,t){return xH(e,t,"post")}});var tO=d((Hhe,eO)=>{var yH=Gc();eO.exports=AH;function AH(e,t){return yH(e,t,"pre")}});var iO=d((zhe,nO)=>{var rO=Ze(),SH=Ma(),OH=Fc();nO.exports=vH;function vH(e,t){var r=new SH,n={},i=new OH,o;function a(u){var l=u.v===o?u.w:u.v,c=i.priority(l);if(c!==void 0){var f=t(u);f<c&&(n[l]=o,i.decrease(l,f))}}if(e.nodeCount()===0)return r;rO.each(e.nodes(),function(u){i.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),i.decrease(e.nodes()[0],0);for(var s=!1;i.size()>0;){if(o=i.removeMin(),rO.has(n,o))r.setEdge(o,n[o]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(o).forEach(a)}return r}});var sO=d((Vhe,oO)=>{oO.exports={components:kS(),dijkstra:Bc(),dijkstraAll:DS(),findCycles:KS(),floydWarshall:jS(),isAcyclic:YS(),postorder:JS(),preorder:tO(),prim:iO(),tarjan:$c(),topsort:Kc()}});var lO=d((Yhe,uO)=>{var aO=CS();uO.exports={Graph:aO.Graph,json:_S(),alg:sO(),version:aO.version}});var lt=d((Xhe,cO)=>{var Da;if(typeof Wr=="function")try{Da=lO()}catch{}Da||(Da=window.graphlib);cO.exports=Da});var hO=d((Zhe,fO)=>{var bH=ac(),LH=1,NH=4;function IH(e){return bH(e,LH|NH)}fO.exports=IH});var ro=d((Jhe,dO)=>{var CH=Pr(),RH=Nt(),_H=Ki(),wH=Qe();function kH(e,t,r){if(!wH(r))return!1;var n=typeof t;return(n=="number"?RH(r)&&_H(t,r.length):n=="string"&&t in r)?CH(r[t],e):!1}dO.exports=kH});var gO=d((ede,mO)=>{var MH=Ji(),PH=Pr(),UH=ro(),qH=Er(),pO=Object.prototype,DH=pO.hasOwnProperty,FH=MH(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&UH(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=qH(o),s=-1,u=a.length;++s<u;){var l=a[s],c=e[l];(c===void 0||PH(c,pO[l])&&!DH.call(e,l))&&(e[l]=o[l])}return e});mO.exports=FH});var xO=d((tde,EO)=>{var BH=It(),$H=Nt(),KH=Kt();function GH(e){return function(t,r,n){var i=Object(t);if(!$H(t)){var o=BH(r,3);t=KH(t),r=function(s){return o(i[s],s,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}EO.exports=GH});var yO=d((rde,TO)=>{var jH=/\s/;function WH(e){for(var t=e.length;t--&&jH.test(e.charAt(t)););return t}TO.exports=WH});var SO=d((nde,AO)=>{var HH=yO(),zH=/^\s+/;function VH(e){return e&&e.slice(0,HH(e)+1).replace(zH,"")}AO.exports=VH});var LO=d((ide,bO)=>{var YH=SO(),OO=Qe(),XH=Br(),vO=NaN,QH=/^[-+]0x[0-9a-f]+$/i,ZH=/^0b[01]+$/i,JH=/^0o[0-7]+$/i,ez=parseInt;function tz(e){if(typeof e=="number")return e;if(XH(e))return vO;if(OO(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=OO(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=YH(e);var r=ZH.test(e);return r||JH.test(e)?ez(e.slice(2),r?2:8):QH.test(e)?vO:+e}bO.exports=tz});var jc=d((ode,IO)=>{var rz=LO(),NO=1/0,nz=17976931348623157e292;function iz(e){if(!e)return e===0?e:0;if(e=rz(e),e===NO||e===-NO){var t=e<0?-1:1;return t*nz}return e===e?e:0}IO.exports=iz});var RO=d((sde,CO)=>{var oz=jc();function sz(e){var t=oz(e),r=t%1;return t===t?r?t-r:t:0}CO.exports=sz});var wO=d((ade,_O)=>{var az=Mc(),uz=It(),lz=RO(),cz=Math.max;function fz(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:lz(r);return i<0&&(i=cz(n+i,0)),az(e,uz(t,3),i)}_O.exports=fz});var MO=d((ude,kO)=>{var hz=xO(),dz=wO(),pz=hz(dz);kO.exports=pz});var Wc=d((lde,PO)=>{var mz=wa();function gz(e){var t=e==null?0:e.length;return t?mz(e,1):[]}PO.exports=gz});var qO=d((cde,UO)=>{var Ez=La(),xz=uc(),Tz=Er();function yz(e,t){return e==null?e:Ez(e,xz(t),Tz)}UO.exports=yz});var FO=d((fde,DO)=>{function Az(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}DO.exports=Az});var $O=d((hde,BO)=>{var Sz=Fi(),Oz=Na(),vz=It();function bz(e,t){var r={};return t=vz(t,3),Oz(e,function(n,i,o){Sz(r,i,t(n,i,o))}),r}BO.exports=bz});var Fa=d((dde,KO)=>{var Lz=Br();function Nz(e,t,r){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=t(o);if(a!=null&&(s===void 0?a===a&&!Lz(a):r(a,s)))var s=a,u=o}return u}KO.exports=Nz});var jO=d((pde,GO)=>{function Iz(e,t){return e>t}GO.exports=Iz});var HO=d((mde,WO)=>{var Cz=Fa(),Rz=jO(),_z=xr();function wz(e){return e&&e.length?Cz(e,_z,Rz):void 0}WO.exports=wz});var Hc=d((gde,zO)=>{var kz=Fi(),Mz=Pr();function Pz(e,t,r){(r!==void 0&&!Mz(e[t],r)||r===void 0&&!(t in e))&&kz(e,t,r)}zO.exports=Pz});var XO=d((Ede,YO)=>{var Uz=mr(),qz=Vi(),Dz=mt(),Fz="[object Object]",Bz=Function.prototype,$z=Object.prototype,VO=Bz.toString,Kz=$z.hasOwnProperty,Gz=VO.call(Object);function jz(e){if(!Dz(e)||Uz(e)!=Fz)return!1;var t=qz(e);if(t===null)return!0;var r=Kz.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&VO.call(r)==Gz}YO.exports=jz});var zc=d((xde,QO)=>{function Wz(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}QO.exports=Wz});var JO=d((Tde,ZO)=>{var Hz=$n(),zz=Er();function Vz(e){return Hz(e,zz(e))}ZO.exports=Vz});var ov=d((yde,iv)=>{var ev=Hc(),Yz=jl(),Xz=ic(),Qz=Wl(),Zz=sc(),tv=Kn(),rv=pe(),Jz=Uc(),e3=qr(),t3=qn(),r3=Qe(),n3=XO(),i3=Wn(),nv=zc(),o3=JO();function s3(e,t,r,n,i,o,a){var s=nv(e,r),u=nv(t,r),l=a.get(u);if(l){ev(e,r,l);return}var c=o?o(s,u,r+"",e,t,a):void 0,f=c===void 0;if(f){var h=rv(u),p=!h&&e3(u),m=!h&&!p&&i3(u);c=u,h||p||m?rv(s)?c=s:Jz(s)?c=Qz(s):p?(f=!1,c=Yz(u,!0)):m?(f=!1,c=Xz(u,!0)):c=[]:n3(u)||tv(u)?(c=s,tv(s)?c=o3(s):(!r3(s)||t3(s))&&(c=Zz(u))):f=!1}f&&(a.set(u,c),i(c,u,n,o,a),a.delete(u)),ev(e,r,c)}iv.exports=s3});var uv=d((Ade,av)=>{var a3=Di(),u3=Hc(),l3=La(),c3=ov(),f3=Qe(),h3=Er(),d3=zc();function sv(e,t,r,n,i){e!==t&&l3(t,function(o,a){if(i||(i=new a3),f3(o))c3(e,t,a,r,sv,n,i);else{var s=n?n(d3(e,a),o,a+"",e,t,i):void 0;s===void 0&&(s=o),u3(e,a,s)}},h3)}av.exports=sv});var cv=d((Sde,lv)=>{var p3=Ji(),m3=ro();function g3(e){return p3(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&m3(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t})}lv.exports=g3});var hv=d((Ode,fv)=>{var E3=uv(),x3=cv(),T3=x3(function(e,t,r){E3(e,t,r)});fv.exports=T3});var Vc=d((vde,dv)=>{function y3(e,t){return e<t}dv.exports=y3});var mv=d((bde,pv)=>{var A3=Fa(),S3=Vc(),O3=xr();function v3(e){return e&&e.length?A3(e,O3,S3):void 0}pv.exports=v3});var Ev=d((Lde,gv)=>{var b3=Fa(),L3=It(),N3=Vc();function I3(e,t){return e&&e.length?b3(e,L3(t,2),N3):void 0}gv.exports=I3});var Tv=d((Nde,xv)=>{var C3=at(),R3=function(){return C3.Date.now()};xv.exports=R3});var Sv=d((Ide,Av)=>{var _3=Bi(),w3=Qi(),k3=Ki(),yv=Qe(),M3=Vn();function P3(e,t,r,n){if(!yv(e))return e;t=w3(t,e);for(var i=-1,o=t.length,a=o-1,s=e;s!=null&&++i<o;){var u=M3(t[i]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(i!=a){var c=s[u];l=n?n(c,u,s):void 0,l===void 0&&(l=yv(c)?c:k3(t[i+1])?[]:{})}_3(s,u,l),s=s[u]}return e}Av.exports=P3});var vv=d((Cde,Ov)=>{var U3=Zi(),q3=Sv(),D3=Qi();function F3(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=U3(e,a);r(s,a)&&q3(o,D3(a,e),s)}return o}Ov.exports=F3});var Lv=d((Rde,bv)=>{var B3=vv(),$3=Sc();function K3(e,t){return B3(e,t,function(r,n){return $3(e,n)})}bv.exports=K3});var Iv=d((_de,Nv)=>{var G3=Wc(),j3=wc(),W3=kc();function H3(e){return W3(j3(e,void 0,G3),e+"")}Nv.exports=H3});var Rv=d((wde,Cv)=>{var z3=Lv(),V3=Iv(),Y3=V3(function(e,t){return e==null?{}:z3(e,t)});Cv.exports=Y3});var wv=d((kde,_v)=>{var X3=Math.ceil,Q3=Math.max;function Z3(e,t,r,n){for(var i=-1,o=Q3(X3((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}_v.exports=Z3});var Mv=d((Mde,kv)=>{var J3=wv(),eV=ro(),Yc=jc();function tV(e){return function(t,r,n){return n&&typeof n!="number"&&eV(t,r,n)&&(r=n=void 0),t=Yc(t),r===void 0?(r=t,t=0):r=Yc(r),n=n===void 0?t<r?1:-1:Yc(n),J3(t,r,n,e)}}kv.exports=tV});var Uv=d((Pde,Pv)=>{var rV=Mv(),nV=rV();Pv.exports=nV});var Dv=d((Ude,qv)=>{function iV(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}qv.exports=iV});var $v=d((qde,Bv)=>{var Fv=Br();function oV(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,o=Fv(e),a=t!==void 0,s=t===null,u=t===t,l=Fv(t);if(!s&&!l&&!o&&e>t||o&&a&&u&&!s&&!l||n&&a&&u||!r&&u||!i)return 1;if(!n&&!o&&!l&&e<t||l&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!u)return-1}return 0}Bv.exports=oV});var Gv=d((Dde,Kv)=>{var sV=$v();function aV(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,a=i.length,s=r.length;++n<a;){var u=sV(i[n],o[n]);if(u){if(n>=s)return u;var l=r[n];return u*(l=="desc"?-1:1)}}return e.index-t.index}Kv.exports=aV});var Wv=d((Fde,jv)=>{var Xc=Xi(),uV=Zi(),lV=It(),cV=Nc(),fV=Dv(),hV=Gi(),dV=Gv(),pV=xr(),mV=pe();function gV(e,t,r){t.length?t=Xc(t,function(o){return mV(o)?function(a){return uV(a,o.length===1?o[0]:o)}:o}):t=[pV];var n=-1;t=Xc(t,hV(lV));var i=cV(e,function(o,a,s){var u=Xc(t,function(l){return l(o)});return{criteria:u,index:++n,value:o}});return fV(i,function(o,a){return dV(o,a,r)})}jv.exports=gV});var Vv=d((Bde,zv)=>{var EV=wa(),xV=Wv(),TV=Ji(),Hv=ro(),yV=TV(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Hv(e,t[0],t[1])?t=[]:r>2&&Hv(t[0],t[1],t[2])&&(t=[t[0]]),xV(e,EV(t,1),[])});zv.exports=yV});var Xv=d(($de,Yv)=>{var AV=yc(),SV=0;function OV(e){var t=++SV;return AV(e)+t}Yv.exports=OV});var Zv=d((Kde,Qv)=>{function vV(e,t,r){for(var n=-1,i=e.length,o=t.length,a={};++n<i;){var s=n<o?t[n]:void 0;r(a,e[n],s)}return a}Qv.exports=vV});var eb=d((Gde,Jv)=>{var bV=Bi(),LV=Zv();function NV(e,t){return LV(e||[],t||[],bV)}Jv.exports=NV});var re=d((jde,tb)=>{var Ba;if(typeof Wr=="function")try{Ba={cloneDeep:hO(),constant:ba(),defaults:gO(),each:cc(),filter:vc(),find:MO(),flatten:Wc(),forEach:lc(),forIn:qO(),has:bc(),isUndefined:Lc(),last:FO(),map:Ic(),mapValues:$O(),max:HO(),merge:hv(),min:mv(),minBy:Ev(),now:Tv(),pick:Rv(),range:Uv(),reduce:Cc(),sortBy:Vv(),uniqueId:Xv(),values:qc(),zipObject:eb()}}catch{}Ba||(Ba=window._);tb.exports=Ba});var ib=d((Hde,nb)=>{nb.exports=$a;function $a(){var e={};e._next=e._prev=e,this._sentinel=e}$a.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return rb(t),t};$a.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&rb(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};$a.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,IV)),r=r._prev;return"["+e.join(", ")+"]"};function rb(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function IV(e,t){if(e!=="_next"&&e!=="_prev")return t}});var sb=d((zde,ob)=>{var Gt=re(),CV=lt().Graph,RV=ib();ob.exports=wV;var _V=Gt.constant(1);function wV(e,t){if(e.nodeCount()<=1)return[];var r=MV(e,t||_V),n=kV(r.graph,r.buckets,r.zeroIdx);return Gt.flatten(Gt.map(n,function(i){return e.outEdges(i.v,i.w)}),!0)}function kV(e,t,r){for(var n=[],i=t[t.length-1],o=t[0],a;e.nodeCount();){for(;a=o.dequeue();)Qc(e,t,r,a);for(;a=i.dequeue();)Qc(e,t,r,a);if(e.nodeCount()){for(var s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){n=n.concat(Qc(e,t,r,a,!0));break}}}return n}function Qc(e,t,r,n,i){var o=i?[]:void 0;return Gt.forEach(e.inEdges(n.v),function(a){var s=e.edge(a),u=e.node(a.v);i&&o.push({v:a.v,w:a.w}),u.out-=s,Zc(t,r,u)}),Gt.forEach(e.outEdges(n.v),function(a){var s=e.edge(a),u=a.w,l=e.node(u);l.in-=s,Zc(t,r,l)}),e.removeNode(n.v),o}function MV(e,t){var r=new CV,n=0,i=0;Gt.forEach(e.nodes(),function(s){r.setNode(s,{v:s,in:0,out:0})}),Gt.forEach(e.edges(),function(s){var u=r.edge(s.v,s.w)||0,l=t(s),c=u+l;r.setEdge(s.v,s.w,c),i=Math.max(i,r.node(s.v).out+=l),n=Math.max(n,r.node(s.w).in+=l)});var o=Gt.range(i+n+3).map(function(){return new RV}),a=n+1;return Gt.forEach(r.nodes(),function(s){Zc(o,a,r.node(s))}),{graph:r,buckets:o,zeroIdx:a}}function Zc(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}});var ub=d((Vde,ab)=>{"use strict";var Kr=re(),PV=sb();ab.exports={run:UV,undo:DV};function UV(e){var t=e.graph().acyclicer==="greedy"?PV(e,r(e)):qV(e);Kr.forEach(t,function(n){var i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,Kr.uniqueId("rev"))});function r(n){return function(i){return n.edge(i).weight}}}function qV(e){var t=[],r={},n={};function i(o){Kr.has(n,o)||(n[o]=!0,r[o]=!0,Kr.forEach(e.outEdges(o),function(a){Kr.has(r,a.w)?t.push(a):i(a.w)}),delete r[o])}return Kr.forEach(e.nodes(),i),t}function DV(e){Kr.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}});var Be=d((Yde,hb)=>{"use strict";var D=re(),lb=lt().Graph;hb.exports={addDummyNode:cb,simplify:FV,asNonCompoundGraph:BV,successorWeights:$V,predecessorWeights:KV,intersectRect:GV,buildLayerMatrix:jV,normalizeRanks:WV,removeEmptyRanks:HV,addBorderNode:zV,maxRank:fb,partition:VV,time:YV,notime:XV};function cb(e,t,r,n){var i;do i=D.uniqueId(n);while(e.hasNode(i));return r.dummy=t,e.setNode(i,r),i}function FV(e){var t=new lb().setGraph(e.graph());return D.forEach(e.nodes(),function(r){t.setNode(r,e.node(r))}),D.forEach(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function BV(e){var t=new lb({multigraph:e.isMultigraph()}).setGraph(e.graph());return D.forEach(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),D.forEach(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t}function $V(e){var t=D.map(e.nodes(),function(r){var n={};return D.forEach(e.outEdges(r),function(i){n[i.w]=(n[i.w]||0)+e.edge(i).weight}),n});return D.zipObject(e.nodes(),t)}function KV(e){var t=D.map(e.nodes(),function(r){var n={};return D.forEach(e.inEdges(r),function(i){n[i.v]=(n[i.v]||0)+e.edge(i).weight}),n});return D.zipObject(e.nodes(),t)}function GV(e,t){var r=e.x,n=e.y,i=t.x-r,o=t.y-n,a=e.width/2,s=e.height/2;if(!i&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(o)*a>Math.abs(i)*s?(o<0&&(s=-s),u=s*i/o,l=s):(i<0&&(a=-a),u=a,l=a*o/i),{x:r+u,y:n+l}}function jV(e){var t=D.map(D.range(fb(e)+1),function(){return[]});return D.forEach(e.nodes(),function(r){var n=e.node(r),i=n.rank;D.isUndefined(i)||(t[i][n.order]=r)}),t}function WV(e){var t=D.min(D.map(e.nodes(),function(r){return e.node(r).rank}));D.forEach(e.nodes(),function(r){var n=e.node(r);D.has(n,"rank")&&(n.rank-=t)})}function HV(e){var t=D.min(D.map(e.nodes(),function(o){return e.node(o).rank})),r=[];D.forEach(e.nodes(),function(o){var a=e.node(o).rank-t;r[a]||(r[a]=[]),r[a].push(o)});var n=0,i=e.graph().nodeRankFactor;D.forEach(r,function(o,a){D.isUndefined(o)&&a%i!==0?--n:n&&D.forEach(o,function(s){e.node(s).rank+=n})})}function zV(e,t,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),cb(e,"border",i,t)}function fb(e){return D.max(D.map(e.nodes(),function(t){var r=e.node(t).rank;if(!D.isUndefined(r))return r}))}function VV(e,t){var r={lhs:[],rhs:[]};return D.forEach(e,function(n){t(n)?r.lhs.push(n):r.rhs.push(n)}),r}function YV(e,t){var r=D.now();try{return t()}finally{console.log(e+" time: "+(D.now()-r)+"ms")}}function XV(e,t){return t()}});var mb=d((Xde,pb)=>{"use strict";var db=re(),QV=Be();pb.exports={run:ZV,undo:eY};function ZV(e){e.graph().dummyChains=[],db.forEach(e.edges(),function(t){JV(e,t)})}function JV(e,t){var r=t.v,n=e.node(r).rank,i=t.w,o=e.node(i).rank,a=t.name,s=e.edge(t),u=s.labelRank;if(o!==n+1){e.removeEdge(t);var l,c,f;for(f=0,++n;n<o;++f,++n)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:t,rank:n},l=QV.addDummyNode(e,"edge",c,"_d"),n===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),e.setEdge(r,l,{weight:s.weight},a),f===0&&e.graph().dummyChains.push(l),r=l;e.setEdge(r,i,{weight:s.weight},a)}}function eY(e){db.forEach(e.graph().dummyChains,function(t){var r=e.node(t),n=r.edgeLabel,i;for(e.setEdge(r.edgeObj,n);r.dummy;)i=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=i,r=e.node(t)})}});var no=d((Qde,gb)=>{"use strict";var Ka=re();gb.exports={longestPath:tY,slack:rY};function tY(e){var t={};function r(n){var i=e.node(n);if(Ka.has(t,n))return i.rank;t[n]=!0;var o=Ka.min(Ka.map(e.outEdges(n),function(a){return r(a.w)-e.edge(a).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),i.rank=o}Ka.forEach(e.sources(),r)}function rY(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}});var Jc=d((Zde,Eb)=>{"use strict";var Ga=re(),nY=lt().Graph,ja=no().slack;Eb.exports=iY;function iY(e){var t=new nY({directed:!1}),r=e.nodes()[0],n=e.nodeCount();t.setNode(r,{});for(var i,o;oY(t,e)<n;)i=sY(t,e),o=t.hasNode(i.v)?ja(e,i):-ja(e,i),aY(t,e,o);return t}function oY(e,t){function r(n){Ga.forEach(t.nodeEdges(n),function(i){var o=i.v,a=n===o?i.w:o;!e.hasNode(a)&&!ja(t,i)&&(e.setNode(a,{}),e.setEdge(n,a,{}),r(a))})}return Ga.forEach(e.nodes(),r),e.nodeCount()}function sY(e,t){return Ga.minBy(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return ja(t,r)})}function aY(e,t,r){Ga.forEach(e.nodes(),function(n){t.node(n).rank+=r})}});var bb=d((Jde,vb)=>{"use strict";var jt=re(),uY=Jc(),lY=no().slack,cY=no().longestPath,fY=lt().alg.preorder,hY=lt().alg.postorder,dY=Be().simplify;vb.exports=Gr;Gr.initLowLimValues=tf;Gr.initCutValues=ef;Gr.calcCutValue=Tb;Gr.leaveEdge=Ab;Gr.enterEdge=Sb;Gr.exchangeEdges=Ob;function Gr(e){e=dY(e),cY(e);var t=uY(e);tf(t),ef(t,e);for(var r,n;r=Ab(t);)n=Sb(t,e,r),Ob(t,e,r,n)}function ef(e,t){var r=hY(e,e.nodes());r=r.slice(0,r.length-1),jt.forEach(r,function(n){pY(e,t,n)})}function pY(e,t,r){var n=e.node(r),i=n.parent;e.edge(r,i).cutvalue=Tb(e,t,r)}function Tb(e,t,r){var n=e.node(r),i=n.parent,o=!0,a=t.edge(r,i),s=0;return a||(o=!1,a=t.edge(i,r)),s=a.weight,jt.forEach(t.nodeEdges(r),function(u){var l=u.v===r,c=l?u.w:u.v;if(c!==i){var f=l===o,h=t.edge(u).weight;if(s+=f?h:-h,gY(e,r,c)){var p=e.edge(r,c).cutvalue;s+=f?-p:p}}}),s}function tf(e,t){arguments.length<2&&(t=e.nodes()[0]),yb(e,{},1,t)}function yb(e,t,r,n,i){var o=r,a=e.node(n);return t[n]=!0,jt.forEach(e.neighbors(n),function(s){jt.has(t,s)||(r=yb(e,t,r,s,n))}),a.low=o,a.lim=r++,i?a.parent=i:delete a.parent,r}function Ab(e){return jt.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Sb(e,t,r){var n=r.v,i=r.w;t.hasEdge(n,i)||(n=r.w,i=r.v);var o=e.node(n),a=e.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var l=jt.filter(t.edges(),function(c){return u===xb(e,e.node(c.v),s)&&u!==xb(e,e.node(c.w),s)});return jt.minBy(l,function(c){return lY(t,c)})}function Ob(e,t,r,n){var i=r.v,o=r.w;e.removeEdge(i,o),e.setEdge(n.v,n.w,{}),tf(e),ef(e,t),mY(e,t)}function mY(e,t){var r=jt.find(e.nodes(),function(i){return!t.node(i).parent}),n=fY(e,r);n=n.slice(1),jt.forEach(n,function(i){var o=e.node(i).parent,a=t.edge(i,o),s=!1;a||(a=t.edge(o,i),s=!0),t.node(i).rank=t.node(o).rank+(s?a.minlen:-a.minlen)})}function gY(e,t,r){return e.hasEdge(t,r)}function xb(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}});var Cb=d((epe,Ib)=>{"use strict";var EY=no(),Nb=EY.longestPath,xY=Jc(),TY=bb();Ib.exports=yY;function yY(e){switch(e.graph().ranker){case"network-simplex":Lb(e);break;case"tight-tree":SY(e);break;case"longest-path":AY(e);break;default:Lb(e)}}var AY=Nb;function SY(e){Nb(e),xY(e)}function Lb(e){TY(e)}});var _b=d((tpe,Rb)=>{var rf=re();Rb.exports=OY;function OY(e){var t=bY(e);rf.forEach(e.graph().dummyChains,function(r){for(var n=e.node(r),i=n.edgeObj,o=vY(e,t,i.v,i.w),a=o.path,s=o.lca,u=0,l=a[u],c=!0;r!==i.w;){if(n=e.node(r),c){for(;(l=a[u])!==s&&e.node(l).maxRank<n.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<a.length-1&&e.node(l=a[u+1]).minRank<=n.rank;)u++;l=a[u]}e.setParent(r,l),r=e.successors(r)[0]}})}function vY(e,t,r,n){var i=[],o=[],a=Math.min(t[r].low,t[n].low),s=Math.max(t[r].lim,t[n].lim),u,l;u=r;do u=e.parent(u),i.push(u);while(u&&(t[u].low>a||s>t[u].lim));for(l=u,u=n;(u=e.parent(u))!==l;)o.push(u);return{path:i.concat(o.reverse()),lca:l}}function bY(e){var t={},r=0;function n(i){var o=r;rf.forEach(e.children(i),n),t[i]={low:o,lim:r++}}return rf.forEach(e.children(),n),t}});var Mb=d((rpe,kb)=>{var Wt=re(),nf=Be();kb.exports={run:LY,cleanup:CY};function LY(e){var t=nf.addDummyNode(e,"root",{},"_root"),r=NY(e),n=Wt.max(Wt.values(r))-1,i=2*n+1;e.graph().nestingRoot=t,Wt.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var o=IY(e)+1;Wt.forEach(e.children(),function(a){wb(e,t,i,o,n,r,a)}),e.graph().nodeRankFactor=i}function wb(e,t,r,n,i,o,a){var s=e.children(a);if(!s.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:r});return}var u=nf.addBorderNode(e,"_bt"),l=nf.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(u,a),c.borderTop=u,e.setParent(l,a),c.borderBottom=l,Wt.forEach(s,function(f){wb(e,t,r,n,i,o,f);var h=e.node(f),p=h.borderTop?h.borderTop:f,m=h.borderBottom?h.borderBottom:f,g=h.borderTop?n:2*n,E=p!==m?1:i-o[a]+1;e.setEdge(u,p,{weight:g,minlen:E,nestingEdge:!0}),e.setEdge(m,l,{weight:g,minlen:E,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,u,{weight:0,minlen:i+o[a]})}function NY(e){var t={};function r(n,i){var o=e.children(n);o&&o.length&&Wt.forEach(o,function(a){r(a,i+1)}),t[n]=i}return Wt.forEach(e.children(),function(n){r(n,1)}),t}function IY(e){return Wt.reduce(e.edges(),function(t,r){return t+e.edge(r).weight},0)}function CY(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Wt.forEach(e.edges(),function(r){var n=e.edge(r);n.nestingEdge&&e.removeEdge(r)})}});var qb=d((npe,Ub)=>{var of=re(),RY=Be();Ub.exports=_Y;function _Y(e){function t(r){var n=e.children(r),i=e.node(r);if(n.length&&of.forEach(n,t),of.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Pb(e,"borderLeft","_bl",r,i,o),Pb(e,"borderRight","_br",r,i,o)}}of.forEach(e.children(),t)}function Pb(e,t,r,n,i,o){var a={width:0,height:0,rank:o,borderType:t},s=i[t][o-1],u=RY.addDummyNode(e,"border",a,r);i[t][o]=u,e.setParent(u,n),s&&e.setEdge(s,u,{weight:1})}});var $b=d((ipe,Bb)=>{"use strict";var Rt=re();Bb.exports={adjust:wY,undo:kY};function wY(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Fb(e)}function kY(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&MY(e),(t==="lr"||t==="rl")&&(PY(e),Fb(e))}function Fb(e){Rt.forEach(e.nodes(),function(t){Db(e.node(t))}),Rt.forEach(e.edges(),function(t){Db(e.edge(t))})}function Db(e){var t=e.width;e.width=e.height,e.height=t}function MY(e){Rt.forEach(e.nodes(),function(t){sf(e.node(t))}),Rt.forEach(e.edges(),function(t){var r=e.edge(t);Rt.forEach(r.points,sf),Rt.has(r,"y")&&sf(r)})}function sf(e){e.y=-e.y}function PY(e){Rt.forEach(e.nodes(),function(t){af(e.node(t))}),Rt.forEach(e.edges(),function(t){var r=e.edge(t);Rt.forEach(r.points,af),Rt.has(r,"x")&&af(r)})}function af(e){var t=e.x;e.x=e.y,e.y=t}});var Gb=d((ope,Kb)=>{"use strict";var Ht=re();Kb.exports=UY;function UY(e){var t={},r=Ht.filter(e.nodes(),function(s){return!e.children(s).length}),n=Ht.max(Ht.map(r,function(s){return e.node(s).rank})),i=Ht.map(Ht.range(n+1),function(){return[]});function o(s){if(!Ht.has(t,s)){t[s]=!0;var u=e.node(s);i[u.rank].push(s),Ht.forEach(e.successors(s),o)}}var a=Ht.sortBy(r,function(s){return e.node(s).rank});return Ht.forEach(a,o),i}});var Wb=d((spe,jb)=>{"use strict";var Tr=re();jb.exports=qY;function qY(e,t){for(var r=0,n=1;n<t.length;++n)r+=DY(e,t[n-1],t[n]);return r}function DY(e,t,r){for(var n=Tr.zipObject(r,Tr.map(r,function(l,c){return c})),i=Tr.flatten(Tr.map(t,function(l){return Tr.sortBy(Tr.map(e.outEdges(l),function(c){return{pos:n[c.w],weight:e.edge(c).weight}}),"pos")}),!0),o=1;o<r.length;)o<<=1;var a=2*o-1;o-=1;var s=Tr.map(new Array(a),function(){return 0}),u=0;return Tr.forEach(i.forEach(function(l){var c=l.pos+o;s[c]+=l.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=l.weight;u+=l.weight*f})),u}});var Vb=d((ape,zb)=>{var Hb=re();zb.exports=FY;function FY(e,t){return Hb.map(t,function(r){var n=e.inEdges(r);if(n.length){var i=Hb.reduce(n,function(o,a){var s=e.edge(a),u=e.node(a.v);return{sum:o.sum+s.weight*u.order,weight:o.weight+s.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:r}})}});var Xb=d((upe,Yb)=>{"use strict";var Je=re();Yb.exports=BY;function BY(e,t){var r={};Je.forEach(e,function(i,o){var a=r[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:o};Je.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),Je.forEach(t.edges(),function(i){var o=r[i.v],a=r[i.w];!Je.isUndefined(o)&&!Je.isUndefined(a)&&(a.indegree++,o.out.push(r[i.w]))});var n=Je.filter(r,function(i){return!i.indegree});return $Y(n)}function $Y(e){var t=[];function r(o){return function(a){a.merged||(Je.isUndefined(a.barycenter)||Je.isUndefined(o.barycenter)||a.barycenter>=o.barycenter)&&KY(o,a)}}function n(o){return function(a){a.in.push(o),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),Je.forEach(i.in.reverse(),r(i)),Je.forEach(i.out,n(i))}return Je.map(Je.filter(t,function(o){return!o.merged}),function(o){return Je.pick(o,["vs","i","barycenter","weight"])})}function KY(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}});var Jb=d((lpe,Zb)=>{var io=re(),GY=Be();Zb.exports=jY;function jY(e,t){var r=GY.partition(e,function(c){return io.has(c,"barycenter")}),n=r.lhs,i=io.sortBy(r.rhs,function(c){return-c.i}),o=[],a=0,s=0,u=0;n.sort(WY(!!t)),u=Qb(o,i,u),io.forEach(n,function(c){u+=c.vs.length,o.push(c.vs),a+=c.barycenter*c.weight,s+=c.weight,u=Qb(o,i,u)});var l={vs:io.flatten(o,!0)};return s&&(l.barycenter=a/s,l.weight=s),l}function Qb(e,t,r){for(var n;t.length&&(n=io.last(t)).i<=r;)t.pop(),e.push(n.vs),r++;return r}function WY(e){return function(t,r){return t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}}});var rL=d((cpe,tL)=>{var yr=re(),HY=Vb(),zY=Xb(),VY=Jb();tL.exports=eL;function eL(e,t,r,n){var i=e.children(t),o=e.node(t),a=o?o.borderLeft:void 0,s=o?o.borderRight:void 0,u={};a&&(i=yr.filter(i,function(m){return m!==a&&m!==s}));var l=HY(e,i);yr.forEach(l,function(m){if(e.children(m.v).length){var g=eL(e,m.v,r,n);u[m.v]=g,yr.has(g,"barycenter")&&XY(m,g)}});var c=zY(l,r);YY(c,u);var f=VY(c,n);if(a&&(f.vs=yr.flatten([a,f.vs,s],!0),e.predecessors(a).length)){var h=e.node(e.predecessors(a)[0]),p=e.node(e.predecessors(s)[0]);yr.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+p.order)/(f.weight+2),f.weight+=2}return f}function YY(e,t){yr.forEach(e,function(r){r.vs=yr.flatten(r.vs.map(function(n){return t[n]?t[n].vs:n}),!0)})}function XY(e,t){yr.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}});var iL=d((fpe,nL)=>{var oo=re(),QY=lt().Graph;nL.exports=ZY;function ZY(e,t,r){var n=JY(e),i=new QY({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(o){return e.node(o)});return oo.forEach(e.nodes(),function(o){var a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||n),oo.forEach(e[r](o),function(u){var l=u.v===o?u.w:u.v,c=i.edge(l,o),f=oo.isUndefined(c)?0:c.weight;i.setEdge(l,o,{weight:e.edge(u).weight+f})}),oo.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function JY(e){for(var t;e.hasNode(t=oo.uniqueId("_root")););return t}});var sL=d((hpe,oL)=>{var eX=re();oL.exports=tX;function tX(e,t,r){var n={},i;eX.forEach(r,function(o){for(var a=e.parent(o),s,u;a;){if(s=e.parent(a),s?(u=n[s],n[s]=a):(u=i,i=a),u&&u!==a){t.setEdge(u,a);return}a=s}})}});var fL=d((dpe,cL)=>{"use strict";var Ar=re(),rX=Gb(),nX=Wb(),iX=rL(),oX=iL(),sX=sL(),aX=lt().Graph,aL=Be();cL.exports=uX;function uX(e){var t=aL.maxRank(e),r=uL(e,Ar.range(1,t+1),"inEdges"),n=uL(e,Ar.range(t-1,-1,-1),"outEdges"),i=rX(e);lL(e,i);for(var o=Number.POSITIVE_INFINITY,a,s=0,u=0;u<4;++s,++u){lX(s%2?r:n,s%4>=2),i=aL.buildLayerMatrix(e);var l=nX(e,i);l<o&&(u=0,a=Ar.cloneDeep(i),o=l)}lL(e,a)}function uL(e,t,r){return Ar.map(t,function(n){return oX(e,n,r)})}function lX(e,t){var r=new aX;Ar.forEach(e,function(n){var i=n.graph().root,o=iX(n,i,r,t);Ar.forEach(o.vs,function(a,s){n.node(a).order=s}),sX(n,r,o.vs)})}function lL(e,t){Ar.forEach(t,function(r){Ar.forEach(r,function(n,i){e.node(n).order=i})})}});var AL=d((ppe,yL)=>{"use strict";var R=re(),cX=lt().Graph,fX=Be();yL.exports={positionX:pX,findType1Conflicts:hL,findType2Conflicts:dL,addConflict:uf,hasConflict:pL,verticalAlignment:mL,horizontalCompaction:gL,alignCoordinates:xL,findSmallestWidthAlignment:EL,balance:TL};function hL(e,t){var r={};function n(i,o){var a=0,s=0,u=i.length,l=R.last(o);return R.forEach(o,function(c,f){var h=hX(e,c),p=h?e.node(h).order:u;(h||c===l)&&(R.forEach(o.slice(s,f+1),function(m){R.forEach(e.predecessors(m),function(g){var E=e.node(g),y=E.order;(y<a||p<y)&&!(E.dummy&&e.node(m).dummy)&&uf(r,g,m)})}),s=f+1,a=p)}),o}return R.reduce(t,n),r}function dL(e,t){var r={};function n(o,a,s,u,l){var c;R.forEach(R.range(a,s),function(f){c=o[f],e.node(c).dummy&&R.forEach(e.predecessors(c),function(h){var p=e.node(h);p.dummy&&(p.order<u||p.order>l)&&uf(r,h,c)})})}function i(o,a){var s=-1,u,l=0;return R.forEach(a,function(c,f){if(e.node(c).dummy==="border"){var h=e.predecessors(c);h.length&&(u=e.node(h[0]).order,n(a,l,f,s,u),l=f,s=u)}n(a,l,a.length,u,o.length)}),a}return R.reduce(t,i),r}function hX(e,t){if(e.node(t).dummy)return R.find(e.predecessors(t),function(r){return e.node(r).dummy})}function uf(e,t,r){if(t>r){var n=t;t=r,r=n}var i=e[t];i||(e[t]=i={}),i[r]=!0}function pL(e,t,r){if(t>r){var n=t;t=r,r=n}return R.has(e[t],r)}function mL(e,t,r,n){var i={},o={},a={};return R.forEach(t,function(s){R.forEach(s,function(u,l){i[u]=u,o[u]=u,a[u]=l})}),R.forEach(t,function(s){var u=-1;R.forEach(s,function(l){var c=n(l);if(c.length){c=R.sortBy(c,function(g){return a[g]});for(var f=(c.length-1)/2,h=Math.floor(f),p=Math.ceil(f);h<=p;++h){var m=c[h];o[l]===l&&u<a[m]&&!pL(r,l,m)&&(o[m]=l,o[l]=i[l]=i[m],u=a[m])}}})}),{root:i,align:o}}function gL(e,t,r,n,i){var o={},a=dX(e,t,r,i),s=i?"borderLeft":"borderRight";function u(f,h){for(var p=a.nodes(),m=p.pop(),g={};m;)g[m]?f(m):(g[m]=!0,p.push(m),p=p.concat(h(m))),m=p.pop()}function l(f){o[f]=a.inEdges(f).reduce(function(h,p){return Math.max(h,o[p.v]+a.edge(p))},0)}function c(f){var h=a.outEdges(f).reduce(function(m,g){return Math.min(m,o[g.w]-a.edge(g))},Number.POSITIVE_INFINITY),p=e.node(f);h!==Number.POSITIVE_INFINITY&&p.borderType!==s&&(o[f]=Math.max(o[f],h))}return u(l,a.predecessors.bind(a)),u(c,a.successors.bind(a)),R.forEach(n,function(f){o[f]=o[r[f]]}),o}function dX(e,t,r,n){var i=new cX,o=e.graph(),a=mX(o.nodesep,o.edgesep,n);return R.forEach(t,function(s){var u;R.forEach(s,function(l){var c=r[l];if(i.setNode(c),u){var f=r[u],h=i.edge(f,c);i.setEdge(f,c,Math.max(a(e,l,u),h||0))}u=l})}),i}function EL(e,t){return R.minBy(R.values(t),function(r){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return R.forIn(r,function(o,a){var s=gX(e,a)/2;n=Math.max(o+s,n),i=Math.min(o-s,i)}),n-i})}function xL(e,t){var r=R.values(t),n=R.min(r),i=R.max(r);R.forEach(["u","d"],function(o){R.forEach(["l","r"],function(a){var s=o+a,u=e[s],l;if(u!==t){var c=R.values(u);l=a==="l"?n-R.min(c):i-R.max(c),l&&(e[s]=R.mapValues(u,function(f){return f+l}))}})})}function TL(e,t){return R.mapValues(e.ul,function(r,n){if(t)return e[t.toLowerCase()][n];var i=R.sortBy(R.map(e,n));return(i[1]+i[2])/2})}function pX(e){var t=fX.buildLayerMatrix(e),r=R.merge(hL(e,t),dL(e,t)),n={},i;R.forEach(["u","d"],function(a){i=a==="u"?t:R.values(t).reverse(),R.forEach(["l","r"],function(s){s==="r"&&(i=R.map(i,function(f){return R.values(f).reverse()}));var u=(a==="u"?e.predecessors:e.successors).bind(e),l=mL(e,i,r,u),c=gL(e,i,l.root,l.align,s==="r");s==="r"&&(c=R.mapValues(c,function(f){return-f})),n[a+s]=c})});var o=EL(e,n);return xL(n,o),TL(n,e.graph().align)}function mX(e,t,r){return function(n,i,o){var a=n.node(i),s=n.node(o),u=0,l;if(u+=a.width/2,R.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(u+=r?l:-l),l=0,u+=(a.dummy?t:e)/2,u+=(s.dummy?t:e)/2,u+=s.width/2,R.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(u+=r?l:-l),l=0,u}}function gX(e,t){return e.node(t).width}});var vL=d((mpe,OL)=>{"use strict";var so=re(),SL=Be(),EX=AL().positionX;OL.exports=xX;function xX(e){e=SL.asNonCompoundGraph(e),TX(e),so.forEach(EX(e),function(t,r){e.node(r).x=t})}function TX(e){var t=SL.buildLayerMatrix(e),r=e.graph().ranksep,n=0;so.forEach(t,function(i){var o=so.max(so.map(i,function(a){return e.node(a).height}));so.forEach(i,function(a){e.node(a).y=n+o/2}),n+=o+r})}});var RL=d((gpe,CL)=>{"use strict";var w=re(),bL=ub(),LL=mb(),yX=Cb(),AX=Be().normalizeRanks,SX=_b(),OX=Be().removeEmptyRanks,NL=Mb(),vX=qb(),IL=$b(),bX=fL(),LX=vL(),Sr=Be(),NX=lt().Graph;CL.exports=IX;function IX(e,t){var r=t&&t.debugTiming?Sr.time:Sr.notime;r("layout",function(){var n=r("  buildLayoutGraph",function(){return FX(e)});r("  runLayout",function(){CX(n,r)}),r("  updateInputGraph",function(){RX(e,n)})})}function CX(e,t){t("    makeSpaceForEdgeLabels",function(){BX(e)}),t("    removeSelfEdges",function(){YX(e)}),t("    acyclic",function(){bL.run(e)}),t("    nestingGraph.run",function(){NL.run(e)}),t("    rank",function(){yX(Sr.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){$X(e)}),t("    removeEmptyRanks",function(){OX(e)}),t("    nestingGraph.cleanup",function(){NL.cleanup(e)}),t("    normalizeRanks",function(){AX(e)}),t("    assignRankMinMax",function(){KX(e)}),t("    removeEdgeLabelProxies",function(){GX(e)}),t("    normalize.run",function(){LL.run(e)}),t("    parentDummyChains",function(){SX(e)}),t("    addBorderSegments",function(){vX(e)}),t("    order",function(){bX(e)}),t("    insertSelfEdges",function(){XX(e)}),t("    adjustCoordinateSystem",function(){IL.adjust(e)}),t("    position",function(){LX(e)}),t("    positionSelfEdges",function(){QX(e)}),t("    removeBorderNodes",function(){VX(e)}),t("    normalize.undo",function(){LL.undo(e)}),t("    fixupEdgeLabelCoords",function(){HX(e)}),t("    undoCoordinateSystem",function(){IL.undo(e)}),t("    translateGraph",function(){jX(e)}),t("    assignNodeIntersects",function(){WX(e)}),t("    reversePoints",function(){zX(e)}),t("    acyclic.undo",function(){bL.undo(e)})}function RX(e,t){w.forEach(e.nodes(),function(r){var n=e.node(r),i=t.node(r);n&&(n.x=i.x,n.y=i.y,t.children(r).length&&(n.width=i.width,n.height=i.height))}),w.forEach(e.edges(),function(r){var n=e.edge(r),i=t.edge(r);n.points=i.points,w.has(i,"x")&&(n.x=i.x,n.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var _X=["nodesep","edgesep","ranksep","marginx","marginy"],wX={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},kX=["acyclicer","ranker","rankdir","align"],MX=["width","height"],PX={width:0,height:0},UX=["minlen","weight","width","height","labeloffset"],qX={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},DX=["labelpos"];function FX(e){var t=new NX({multigraph:!0,compound:!0}),r=cf(e.graph());return t.setGraph(w.merge({},wX,lf(r,_X),w.pick(r,kX))),w.forEach(e.nodes(),function(n){var i=cf(e.node(n));t.setNode(n,w.defaults(lf(i,MX),PX)),t.setParent(n,e.parent(n))}),w.forEach(e.edges(),function(n){var i=cf(e.edge(n));t.setEdge(n,w.merge({},qX,lf(i,UX),w.pick(i,DX)))}),t}function BX(e){var t=e.graph();t.ranksep/=2,w.forEach(e.edges(),function(r){var n=e.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function $X(e){w.forEach(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var n=e.node(t.v),i=e.node(t.w),o={rank:(i.rank-n.rank)/2+n.rank,e:t};Sr.addDummyNode(e,"edge-proxy",o,"_ep")}})}function KX(e){var t=0;w.forEach(e.nodes(),function(r){var n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=w.max(t,n.maxRank))}),e.graph().maxRank=t}function GX(e){w.forEach(e.nodes(),function(t){var r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function jX(e){var t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function u(l){var c=l.x,f=l.y,h=l.width,p=l.height;t=Math.min(t,c-h/2),r=Math.max(r,c+h/2),n=Math.min(n,f-p/2),i=Math.max(i,f+p/2)}w.forEach(e.nodes(),function(l){u(e.node(l))}),w.forEach(e.edges(),function(l){var c=e.edge(l);w.has(c,"x")&&u(c)}),t-=a,n-=s,w.forEach(e.nodes(),function(l){var c=e.node(l);c.x-=t,c.y-=n}),w.forEach(e.edges(),function(l){var c=e.edge(l);w.forEach(c.points,function(f){f.x-=t,f.y-=n}),w.has(c,"x")&&(c.x-=t),w.has(c,"y")&&(c.y-=n)}),o.width=r-t+a,o.height=i-n+s}function WX(e){w.forEach(e.edges(),function(t){var r=e.edge(t),n=e.node(t.v),i=e.node(t.w),o,a;r.points?(o=r.points[0],a=r.points[r.points.length-1]):(r.points=[],o=i,a=n),r.points.unshift(Sr.intersectRect(n,o)),r.points.push(Sr.intersectRect(i,a))})}function HX(e){w.forEach(e.edges(),function(t){var r=e.edge(t);if(w.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function zX(e){w.forEach(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}function VX(e){w.forEach(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),n=e.node(r.borderTop),i=e.node(r.borderBottom),o=e.node(w.last(r.borderLeft)),a=e.node(w.last(r.borderRight));r.width=Math.abs(a.x-o.x),r.height=Math.abs(i.y-n.y),r.x=o.x+r.width/2,r.y=n.y+r.height/2}}),w.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function YX(e){w.forEach(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function XX(e){var t=Sr.buildLayerMatrix(e);w.forEach(t,function(r){var n=0;w.forEach(r,function(i,o){var a=e.node(i);a.order=o+n,w.forEach(a.selfEdges,function(s){Sr.addDummyNode(e,"selfedge",{width:s.label.width,height:s.label.height,rank:a.rank,order:o+ ++n,e:s.e,label:s.label},"_se")}),delete a.selfEdges})})}function QX(e){w.forEach(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v),i=n.x+n.width/2,o=n.y,a=r.x-i,s=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],r.label.x=r.x,r.label.y=r.y}})}function lf(e,t){return w.mapValues(w.pick(e,t),Number)}function cf(e){var t={};return w.forEach(e,function(r,n){t[n.toLowerCase()]=r}),t}});var wL=d((Epe,_L)=>{var Wa=re(),ZX=Be(),JX=lt().Graph;_L.exports={debugOrdering:e6};function e6(e){var t=ZX.buildLayerMatrix(e),r=new JX({compound:!0,multigraph:!0}).setGraph({});return Wa.forEach(e.nodes(),function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+e.node(n).rank)}),Wa.forEach(e.edges(),function(n){r.setEdge(n.v,n.w,{},n.name)}),Wa.forEach(t,function(n,i){var o="layer"+i;r.setNode(o,{rank:"same"}),Wa.reduce(n,function(a,s){return r.setEdge(a,s,{style:"invis"}),s})}),r}});var ML=d((xpe,kL)=>{kL.exports="0.8.5"});var UL=d((Tpe,PL)=>{PL.exports={graphlib:lt(),layout:RL(),debug:wL(),util:{time:Be().time,notime:Be().notime},version:ML()}});var WL=typeof global=="object"&&global&&global.Object===Object&&global,ho=WL;var HL=typeof self=="object"&&self&&self.Object===Object&&self,zL=ho||HL||Function("return this")(),me=zL;var VL=me.Symbol,Se=VL;var Tf=Object.prototype,YL=Tf.hasOwnProperty,XL=Tf.toString,Qn=Se?Se.toStringTag:void 0;function QL(e){var t=YL.call(e,Qn),r=e[Qn];try{e[Qn]=void 0;var n=!0}catch{}var i=XL.call(e);return n&&(t?e[Qn]=r:delete e[Qn]),i}var yf=QL;var ZL=Object.prototype,JL=ZL.toString;function eN(e){return JL.call(e)}var Af=eN;var tN="[object Null]",rN="[object Undefined]",Sf=Se?Se.toStringTag:void 0;function nN(e){return e==null?e===void 0?rN:tN:Sf&&Sf in Object(e)?yf(e):Af(e)}var ke=nN;function iN(e){return e!=null&&typeof e=="object"}var ce=iN;var oN="[object Symbol]";function sN(e){return typeof e=="symbol"||ce(e)&&ke(e)==oN}var Yt=sN;function aN(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var gt=aN;var uN=Array.isArray,L=uN;var lN=1/0,Of=Se?Se.prototype:void 0,vf=Of?Of.toString:void 0;function bf(e){if(typeof e=="string")return e;if(L(e))return gt(e,bf)+"";if(Yt(e))return vf?vf.call(e):"";var t=e+"";return t=="0"&&1/e==-lN?"-0":t}var Lf=bf;var cN=/\s/;function fN(e){for(var t=e.length;t--&&cN.test(e.charAt(t)););return t}var Nf=fN;var hN=/^\s+/;function dN(e){return e&&e.slice(0,Nf(e)+1).replace(hN,"")}var If=dN;function pN(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var oe=pN;var Cf=NaN,mN=/^[-+]0x[0-9a-f]+$/i,gN=/^0b[01]+$/i,EN=/^0o[0-7]+$/i,xN=parseInt;function TN(e){if(typeof e=="number")return e;if(Yt(e))return Cf;if(oe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=If(e);var r=gN.test(e);return r||EN.test(e)?xN(e.slice(2),r?2:8):mN.test(e)?Cf:+e}var Rf=TN;var _f=1/0,yN=17976931348623157e292;function AN(e){if(!e)return e===0?e:0;if(e=Rf(e),e===_f||e===-_f){var t=e<0?-1:1;return t*yN}return e===e?e:0}var wf=AN;function SN(e){var t=wf(e),r=t%1;return t===t?r?t-r:t:0}var Et=SN;function ON(e){return e}var rt=ON;var vN="[object AsyncFunction]",bN="[object Function]",LN="[object GeneratorFunction]",NN="[object Proxy]";function IN(e){if(!oe(e))return!1;var t=ke(e);return t==bN||t==LN||t==vN||t==NN}var Me=IN;var CN=me["__core-js_shared__"],po=CN;var kf=(function(){var e=/[^.]+$/.exec(po&&po.keys&&po.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function RN(e){return!!kf&&kf in e}var Mf=RN;var _N=Function.prototype,wN=_N.toString;function kN(e){if(e!=null){try{return wN.call(e)}catch{}try{return e+""}catch{}}return""}var kt=kN;var MN=/[\\^$.*+?()[\]{}|]/g,PN=/^\[object .+?Constructor\]$/,UN=Function.prototype,qN=Object.prototype,DN=UN.toString,FN=qN.hasOwnProperty,BN=RegExp("^"+DN.call(FN).replace(MN,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $N(e){if(!oe(e)||Mf(e))return!1;var t=Me(e)?BN:PN;return t.test(kt(e))}var Pf=$N;function KN(e,t){return e?.[t]}var Uf=KN;function GN(e,t){var r=Uf(e,t);return Pf(r)?r:void 0}var $e=GN;var jN=$e(me,"WeakMap"),mo=jN;var qf=Object.create,WN=(function(){function e(){}return function(t){if(!oe(t))return{};if(qf)return qf(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})(),Df=WN;function HN(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Ff=HN;function zN(){}var se=zN;function VN(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Bf=VN;var YN=800,XN=16,QN=Date.now;function ZN(e){var t=0,r=0;return function(){var n=QN(),i=XN-(n-r);if(r=n,i>0){if(++t>=YN)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var $f=ZN;function JN(e){return function(){return e}}var Kf=JN;var eI=(function(){try{var e=$e(Object,"defineProperty");return e({},"",{}),e}catch{}})(),Hr=eI;var tI=Hr?function(e,t){return Hr(e,"toString",{configurable:!0,enumerable:!1,value:Kf(t),writable:!0})}:rt,Gf=tI;var rI=$f(Gf),jf=rI;function nI(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var go=nI;function iI(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}var Eo=iI;function oI(e){return e!==e}var Wf=oI;function sI(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var Hf=sI;function aI(e,t,r){return t===t?Hf(e,t,r):Eo(e,Wf,r)}var zr=aI;function uI(e,t){var r=e==null?0:e.length;return!!r&&zr(e,t,0)>-1}var xo=uI;var lI=9007199254740991,cI=/^(?:0|[1-9]\d*)$/;function fI(e,t){var r=typeof e;return t=t??lI,!!t&&(r=="number"||r!="symbol"&&cI.test(e))&&e>-1&&e%1==0&&e<t}var Xt=fI;function hI(e,t,r){t=="__proto__"&&Hr?Hr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Vr=hI;function dI(e,t){return e===t||e!==e&&t!==t}var xt=dI;var pI=Object.prototype,mI=pI.hasOwnProperty;function gI(e,t,r){var n=e[t];(!(mI.call(e,t)&&xt(n,r))||r===void 0&&!(t in e))&&Vr(e,t,r)}var Qt=gI;function EI(e,t,r,n){var i=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=n?n(r[s],e[s],s,r,e):void 0;u===void 0&&(u=e[s]),i?Vr(r,s,u):Qt(r,s,u)}return r}var Tt=EI;var zf=Math.max;function xI(e,t,r){return t=zf(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=zf(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),Ff(e,this,s)}}var Vf=xI;function TI(e,t){return jf(Vf(e,t,rt),e+"")}var Yr=TI;var yI=9007199254740991;function AI(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yI}var Xr=AI;function SI(e){return e!=null&&Xr(e.length)&&!Me(e)}var ge=SI;function OI(e,t,r){if(!oe(r))return!1;var n=typeof t;return(n=="number"?ge(r)&&Xt(t,r.length):n=="string"&&t in r)?xt(r[t],e):!1}var Zt=OI;function vI(e){return Yr(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&Zt(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,o)}return t})}var Yf=vI;var bI=Object.prototype;function LI(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||bI;return e===r}var yt=LI;function NI(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Xf=NI;var II="[object Arguments]";function CI(e){return ce(e)&&ke(e)==II}var Va=CI;var Qf=Object.prototype,RI=Qf.hasOwnProperty,_I=Qf.propertyIsEnumerable,wI=Va((function(){return arguments})())?Va:function(e){return ce(e)&&RI.call(e,"callee")&&!_I.call(e,"callee")},Jt=wI;function kI(){return!1}var Zf=kI;var th=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jf=th&&typeof module=="object"&&module&&!module.nodeType&&module,MI=Jf&&Jf.exports===th,eh=MI?me.Buffer:void 0,PI=eh?eh.isBuffer:void 0,UI=PI||Zf,Mt=UI;var qI="[object Arguments]",DI="[object Array]",FI="[object Boolean]",BI="[object Date]",$I="[object Error]",KI="[object Function]",GI="[object Map]",jI="[object Number]",WI="[object Object]",HI="[object RegExp]",zI="[object Set]",VI="[object String]",YI="[object WeakMap]",XI="[object ArrayBuffer]",QI="[object DataView]",ZI="[object Float32Array]",JI="[object Float64Array]",eC="[object Int8Array]",tC="[object Int16Array]",rC="[object Int32Array]",nC="[object Uint8Array]",iC="[object Uint8ClampedArray]",oC="[object Uint16Array]",sC="[object Uint32Array]",J={};J[ZI]=J[JI]=J[eC]=J[tC]=J[rC]=J[nC]=J[iC]=J[oC]=J[sC]=!0;J[qI]=J[DI]=J[XI]=J[FI]=J[QI]=J[BI]=J[$I]=J[KI]=J[GI]=J[jI]=J[WI]=J[HI]=J[zI]=J[VI]=J[YI]=!1;function aC(e){return ce(e)&&Xr(e.length)&&!!J[ke(e)]}var rh=aC;function uC(e){return function(t){return e(t)}}var At=uC;var nh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zn=nh&&typeof module=="object"&&module&&!module.nodeType&&module,lC=Zn&&Zn.exports===nh,Ya=lC&&ho.process,cC=(function(){try{var e=Zn&&Zn.require&&Zn.require("util").types;return e||Ya&&Ya.binding&&Ya.binding("util")}catch{}})(),nt=cC;var ih=nt&&nt.isTypedArray,fC=ih?At(ih):rh,Qr=fC;var hC=Object.prototype,dC=hC.hasOwnProperty;function pC(e,t){var r=L(e),n=!r&&Jt(e),i=!r&&!n&&Mt(e),o=!r&&!n&&!i&&Qr(e),a=r||n||i||o,s=a?Xf(e.length,String):[],u=s.length;for(var l in e)(t||dC.call(e,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Xt(l,u)))&&s.push(l);return s}var To=pC;function mC(e,t){return function(r){return e(t(r))}}var yo=mC;var gC=yo(Object.keys,Object),oh=gC;var EC=Object.prototype,xC=EC.hasOwnProperty;function TC(e){if(!yt(e))return oh(e);var t=[];for(var r in Object(e))xC.call(e,r)&&r!="constructor"&&t.push(r);return t}var Ao=TC;function yC(e){return ge(e)?To(e):Ao(e)}var H=yC;var AC=Object.prototype,SC=AC.hasOwnProperty,OC=Yf(function(e,t){if(yt(t)||ge(t)){Tt(t,H(t),e);return}for(var r in t)SC.call(t,r)&&Qt(e,r,t[r])}),Le=OC;function vC(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var sh=vC;var bC=Object.prototype,LC=bC.hasOwnProperty;function NC(e){if(!oe(e))return sh(e);var t=yt(e),r=[];for(var n in e)n=="constructor"&&(t||!LC.call(e,n))||r.push(n);return r}var ah=NC;function IC(e){return ge(e)?To(e,!0):ah(e)}var er=IC;var CC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,RC=/^\w*$/;function _C(e,t){if(L(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Yt(e)?!0:RC.test(e)||!CC.test(e)||t!=null&&e in Object(t)}var Zr=_C;var wC=$e(Object,"create"),Pt=wC;function kC(){this.__data__=Pt?Pt(null):{},this.size=0}var uh=kC;function MC(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lh=MC;var PC="__lodash_hash_undefined__",UC=Object.prototype,qC=UC.hasOwnProperty;function DC(e){var t=this.__data__;if(Pt){var r=t[e];return r===PC?void 0:r}return qC.call(t,e)?t[e]:void 0}var ch=DC;var FC=Object.prototype,BC=FC.hasOwnProperty;function $C(e){var t=this.__data__;return Pt?t[e]!==void 0:BC.call(t,e)}var fh=$C;var KC="__lodash_hash_undefined__";function GC(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Pt&&t===void 0?KC:t,this}var hh=GC;function Jr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jr.prototype.clear=uh;Jr.prototype.delete=lh;Jr.prototype.get=ch;Jr.prototype.has=fh;Jr.prototype.set=hh;var Xa=Jr;function jC(){this.__data__=[],this.size=0}var dh=jC;function WC(e,t){for(var r=e.length;r--;)if(xt(e[r][0],t))return r;return-1}var tr=WC;var HC=Array.prototype,zC=HC.splice;function VC(e){var t=this.__data__,r=tr(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():zC.call(t,r,1),--this.size,!0}var ph=VC;function YC(e){var t=this.__data__,r=tr(t,e);return r<0?void 0:t[r][1]}var mh=YC;function XC(e){return tr(this.__data__,e)>-1}var gh=XC;function QC(e,t){var r=this.__data__,n=tr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Eh=QC;function en(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}en.prototype.clear=dh;en.prototype.delete=ph;en.prototype.get=mh;en.prototype.has=gh;en.prototype.set=Eh;var rr=en;var ZC=$e(me,"Map"),nr=ZC;function JC(){this.size=0,this.__data__={hash:new Xa,map:new(nr||rr),string:new Xa}}var xh=JC;function eR(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Th=eR;function tR(e,t){var r=e.__data__;return Th(t)?r[typeof t=="string"?"string":"hash"]:r.map}var ir=tR;function rR(e){var t=ir(this,e).delete(e);return this.size-=t?1:0,t}var yh=rR;function nR(e){return ir(this,e).get(e)}var Ah=nR;function iR(e){return ir(this,e).has(e)}var Sh=iR;function oR(e,t){var r=ir(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Oh=oR;function tn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}tn.prototype.clear=xh;tn.prototype.delete=yh;tn.prototype.get=Ah;tn.prototype.has=Sh;tn.prototype.set=Oh;var vr=tn;var sR="Expected a function";function Qa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(sR);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Qa.Cache||vr),r}Qa.Cache=vr;var vh=Qa;var aR=500;function uR(e){var t=vh(e,function(n){return r.size===aR&&r.clear(),n}),r=t.cache;return t}var bh=uR;var lR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cR=/\\(\\)?/g,fR=bh(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(lR,function(r,n,i,o){t.push(i?o.replace(cR,"$1"):n||r)}),t}),Lh=fR;function hR(e){return e==null?"":Lf(e)}var Nh=hR;function dR(e,t){return L(e)?e:Zr(e,t)?[e]:Lh(Nh(e))}var or=dR;var pR=1/0;function mR(e){if(typeof e=="string"||Yt(e))return e;var t=e+"";return t=="0"&&1/e==-pR?"-0":t}var St=mR;function gR(e,t){t=or(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[St(t[r++])];return r&&r==n?e:void 0}var rn=gR;function ER(e,t,r){var n=e==null?void 0:rn(e,t);return n===void 0?r:n}var Ih=ER;function xR(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var nn=xR;var Ch=Se?Se.isConcatSpreadable:void 0;function TR(e){return L(e)||Jt(e)||!!(Ch&&e&&e[Ch])}var Rh=TR;function _h(e,t,r,n,i){var o=-1,a=e.length;for(r||(r=Rh),i||(i=[]);++o<a;){var s=e[o];t>0&&r(s)?t>1?_h(s,t-1,r,n,i):nn(i,s):n||(i[i.length]=s)}return i}var on=_h;function yR(e){var t=e==null?0:e.length;return t?on(e,1):[]}var Te=yR;var AR=yo(Object.getPrototypeOf,Object),So=AR;function SR(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}var Oo=SR;function OR(e,t,r,n){var i=-1,o=e==null?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}var wh=OR;function vR(){this.__data__=new rr,this.size=0}var kh=vR;function bR(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Mh=bR;function LR(e){return this.__data__.get(e)}var Ph=LR;function NR(e){return this.__data__.has(e)}var Uh=NR;var IR=200;function CR(e,t){var r=this.__data__;if(r instanceof rr){var n=r.__data__;if(!nr||n.length<IR-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new vr(n)}return r.set(e,t),this.size=r.size,this}var qh=CR;function sn(e){var t=this.__data__=new rr(e);this.size=t.size}sn.prototype.clear=kh;sn.prototype.delete=Mh;sn.prototype.get=Ph;sn.prototype.has=Uh;sn.prototype.set=qh;var sr=sn;function RR(e,t){return e&&Tt(t,H(t),e)}var Dh=RR;function _R(e,t){return e&&Tt(t,er(t),e)}var Fh=_R;var Gh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bh=Gh&&typeof module=="object"&&module&&!module.nodeType&&module,wR=Bh&&Bh.exports===Gh,$h=wR?me.Buffer:void 0,Kh=$h?$h.allocUnsafe:void 0;function kR(e,t){if(t)return e.slice();var r=e.length,n=Kh?Kh(r):new e.constructor(r);return e.copy(n),n}var jh=kR;function MR(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}var an=MR;function PR(){return[]}var vo=PR;var UR=Object.prototype,qR=UR.propertyIsEnumerable,Wh=Object.getOwnPropertySymbols,DR=Wh?function(e){return e==null?[]:(e=Object(e),an(Wh(e),function(t){return qR.call(e,t)}))}:vo,un=DR;function FR(e,t){return Tt(e,un(e),t)}var Hh=FR;var BR=Object.getOwnPropertySymbols,$R=BR?function(e){for(var t=[];e;)nn(t,un(e)),e=So(e);return t}:vo,bo=$R;function KR(e,t){return Tt(e,bo(e),t)}var zh=KR;function GR(e,t,r){var n=t(e);return L(e)?n:nn(n,r(e))}var Lo=GR;function jR(e){return Lo(e,H,un)}var Jn=jR;function WR(e){return Lo(e,er,bo)}var No=WR;var HR=$e(me,"DataView"),Io=HR;var zR=$e(me,"Promise"),Co=zR;var VR=$e(me,"Set"),ar=VR;var Vh="[object Map]",YR="[object Object]",Yh="[object Promise]",Xh="[object Set]",Qh="[object WeakMap]",Zh="[object DataView]",XR=kt(Io),QR=kt(nr),ZR=kt(Co),JR=kt(ar),e_=kt(mo),br=ke;(Io&&br(new Io(new ArrayBuffer(1)))!=Zh||nr&&br(new nr)!=Vh||Co&&br(Co.resolve())!=Yh||ar&&br(new ar)!=Xh||mo&&br(new mo)!=Qh)&&(br=function(e){var t=ke(e),r=t==YR?e.constructor:void 0,n=r?kt(r):"";if(n)switch(n){case XR:return Zh;case QR:return Vh;case ZR:return Yh;case JR:return Xh;case e_:return Qh}return t});var ft=br;var t_=Object.prototype,r_=t_.hasOwnProperty;function n_(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&r_.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Jh=n_;var i_=me.Uint8Array,ln=i_;function o_(e){var t=new e.constructor(e.byteLength);return new ln(t).set(new ln(e)),t}var cn=o_;function s_(e,t){var r=t?cn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ed=s_;var a_=/\w*$/;function u_(e){var t=new e.constructor(e.source,a_.exec(e));return t.lastIndex=e.lastIndex,t}var td=u_;var rd=Se?Se.prototype:void 0,nd=rd?rd.valueOf:void 0;function l_(e){return nd?Object(nd.call(e)):{}}var id=l_;function c_(e,t){var r=t?cn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var od=c_;var f_="[object Boolean]",h_="[object Date]",d_="[object Map]",p_="[object Number]",m_="[object RegExp]",g_="[object Set]",E_="[object String]",x_="[object Symbol]",T_="[object ArrayBuffer]",y_="[object DataView]",A_="[object Float32Array]",S_="[object Float64Array]",O_="[object Int8Array]",v_="[object Int16Array]",b_="[object Int32Array]",L_="[object Uint8Array]",N_="[object Uint8ClampedArray]",I_="[object Uint16Array]",C_="[object Uint32Array]";function R_(e,t,r){var n=e.constructor;switch(t){case T_:return cn(e);case f_:case h_:return new n(+e);case y_:return ed(e,r);case A_:case S_:case O_:case v_:case b_:case L_:case N_:case I_:case C_:return od(e,r);case d_:return new n;case p_:case E_:return new n(e);case m_:return td(e);case g_:return new n;case x_:return id(e)}}var sd=R_;function __(e){return typeof e.constructor=="function"&&!yt(e)?Df(So(e)):{}}var ad=__;var w_="[object Map]";function k_(e){return ce(e)&&ft(e)==w_}var ud=k_;var ld=nt&&nt.isMap,M_=ld?At(ld):ud,cd=M_;var P_="[object Set]";function U_(e){return ce(e)&&ft(e)==P_}var fd=U_;var hd=nt&&nt.isSet,q_=hd?At(hd):fd,dd=q_;var D_=1,F_=2,B_=4,pd="[object Arguments]",$_="[object Array]",K_="[object Boolean]",G_="[object Date]",j_="[object Error]",md="[object Function]",W_="[object GeneratorFunction]",H_="[object Map]",z_="[object Number]",gd="[object Object]",V_="[object RegExp]",Y_="[object Set]",X_="[object String]",Q_="[object Symbol]",Z_="[object WeakMap]",J_="[object ArrayBuffer]",ew="[object DataView]",tw="[object Float32Array]",rw="[object Float64Array]",nw="[object Int8Array]",iw="[object Int16Array]",ow="[object Int32Array]",sw="[object Uint8Array]",aw="[object Uint8ClampedArray]",uw="[object Uint16Array]",lw="[object Uint32Array]",z={};z[pd]=z[$_]=z[J_]=z[ew]=z[K_]=z[G_]=z[tw]=z[rw]=z[nw]=z[iw]=z[ow]=z[H_]=z[z_]=z[gd]=z[V_]=z[Y_]=z[X_]=z[Q_]=z[sw]=z[aw]=z[uw]=z[lw]=!0;z[j_]=z[md]=z[Z_]=!1;function Ro(e,t,r,n,i,o){var a,s=t&D_,u=t&F_,l=t&B_;if(r&&(a=i?r(e,n,i,o):r(e)),a!==void 0)return a;if(!oe(e))return e;var c=L(e);if(c){if(a=Jh(e),!s)return Bf(e,a)}else{var f=ft(e),h=f==md||f==W_;if(Mt(e))return jh(e,s);if(f==gd||f==pd||h&&!i){if(a=u||h?{}:ad(e),!s)return u?zh(e,Fh(a,e)):Hh(e,Dh(a,e))}else{if(!z[f])return i?e:{};a=sd(e,f,s)}}o||(o=new sr);var p=o.get(e);if(p)return p;o.set(e,a),dd(e)?e.forEach(function(E){a.add(Ro(E,t,r,E,e,o))}):cd(e)&&e.forEach(function(E,y){a.set(y,Ro(E,t,r,y,e,o))});var m=l?u?No:Jn:u?er:H,g=c?void 0:m(e);return go(g||e,function(E,y){g&&(y=E,E=e[y]),Qt(a,y,Ro(E,t,r,y,e,o))}),a}var Ed=Ro;var cw=4;function fw(e){return Ed(e,cw)}var V=fw;function hw(e){for(var t=-1,r=e==null?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i}var Ot=hw;var dw="__lodash_hash_undefined__";function pw(e){return this.__data__.set(e,dw),this}var xd=pw;function mw(e){return this.__data__.has(e)}var Td=mw;function _o(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new vr;++t<r;)this.add(e[t])}_o.prototype.add=_o.prototype.push=xd;_o.prototype.has=Td;var fn=_o;function gw(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var wo=gw;function Ew(e,t){return e.has(t)}var hn=Ew;var xw=1,Tw=2;function yw(e,t,r,n,i,o){var a=r&xw,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(e),c=o.get(t);if(l&&c)return l==t&&c==e;var f=-1,h=!0,p=r&Tw?new fn:void 0;for(o.set(e,t),o.set(t,e);++f<s;){var m=e[f],g=t[f];if(n)var E=a?n(g,m,f,t,e,o):n(m,g,f,e,t,o);if(E!==void 0){if(E)continue;h=!1;break}if(p){if(!wo(t,function(y,x){if(!hn(p,x)&&(m===y||i(m,y,r,n,o)))return p.push(x)})){h=!1;break}}else if(!(m===g||i(m,g,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}var ko=yw;function Aw(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var yd=Aw;function Sw(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var dn=Sw;var Ow=1,vw=2,bw="[object Boolean]",Lw="[object Date]",Nw="[object Error]",Iw="[object Map]",Cw="[object Number]",Rw="[object RegExp]",_w="[object Set]",ww="[object String]",kw="[object Symbol]",Mw="[object ArrayBuffer]",Pw="[object DataView]",Ad=Se?Se.prototype:void 0,Za=Ad?Ad.valueOf:void 0;function Uw(e,t,r,n,i,o,a){switch(r){case Pw:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Mw:return!(e.byteLength!=t.byteLength||!o(new ln(e),new ln(t)));case bw:case Lw:case Cw:return xt(+e,+t);case Nw:return e.name==t.name&&e.message==t.message;case Rw:case ww:return e==t+"";case Iw:var s=yd;case _w:var u=n&Ow;if(s||(s=dn),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;n|=vw,a.set(e,t);var c=ko(s(e),s(t),n,i,o,a);return a.delete(e),c;case kw:if(Za)return Za.call(e)==Za.call(t)}return!1}var Sd=Uw;var qw=1,Dw=Object.prototype,Fw=Dw.hasOwnProperty;function Bw(e,t,r,n,i,o){var a=r&qw,s=Jn(e),u=s.length,l=Jn(t),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in t:Fw.call(t,h)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);for(var E=a;++f<u;){h=s[f];var y=e[h],x=t[h];if(n)var A=a?n(x,y,h,t,e,o):n(y,x,h,e,t,o);if(!(A===void 0?y===x||i(y,x,r,n,o):A)){g=!1;break}E||(E=h=="constructor")}if(g&&!E){var O=e.constructor,N=t.constructor;O!=N&&"constructor"in e&&"constructor"in t&&!(typeof O=="function"&&O instanceof O&&typeof N=="function"&&N instanceof N)&&(g=!1)}return o.delete(e),o.delete(t),g}var Od=Bw;var $w=1,vd="[object Arguments]",bd="[object Array]",Mo="[object Object]",Kw=Object.prototype,Ld=Kw.hasOwnProperty;function Gw(e,t,r,n,i,o){var a=L(e),s=L(t),u=a?bd:ft(e),l=s?bd:ft(t);u=u==vd?Mo:u,l=l==vd?Mo:l;var c=u==Mo,f=l==Mo,h=u==l;if(h&&Mt(e)){if(!Mt(t))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new sr),a||Qr(e)?ko(e,t,r,n,i,o):Sd(e,t,u,r,n,i,o);if(!(r&$w)){var p=c&&Ld.call(e,"__wrapped__"),m=f&&Ld.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,E=m?t.value():t;return o||(o=new sr),i(g,E,r,n,o)}}return h?(o||(o=new sr),Od(e,t,r,n,i,o)):!1}var Nd=Gw;function Id(e,t,r,n,i){return e===t?!0:e==null||t==null||!ce(e)&&!ce(t)?e!==e&&t!==t:Nd(e,t,r,n,Id,i)}var Po=Id;var jw=1,Ww=2;function Hw(e,t,r,n){var i=r.length,o=i,a=!n;if(e==null)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=r[i];var u=s[0],l=e[u],c=s[1];if(a&&s[2]){if(l===void 0&&!(u in e))return!1}else{var f=new sr;if(n)var h=n(l,c,u,e,t,f);if(!(h===void 0?Po(c,l,jw|Ww,n,f):h))return!1}}return!0}var Cd=Hw;function zw(e){return e===e&&!oe(e)}var Uo=zw;function Vw(e){for(var t=H(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Uo(i)]}return t}var Rd=Vw;function Yw(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var qo=Yw;function Xw(e){var t=Rd(e);return t.length==1&&t[0][2]?qo(t[0][0],t[0][1]):function(r){return r===e||Cd(r,e,t)}}var _d=Xw;function Qw(e,t){return e!=null&&t in Object(e)}var wd=Qw;function Zw(e,t,r){t=or(t,e);for(var n=-1,i=t.length,o=!1;++n<i;){var a=St(t[n]);if(!(o=e!=null&&r(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&Xr(i)&&Xt(a,i)&&(L(e)||Jt(e)))}var Do=Zw;function Jw(e,t){return e!=null&&Do(e,t,wd)}var kd=Jw;var ek=1,tk=2;function rk(e,t){return Zr(e)&&Uo(t)?qo(St(e),t):function(r){var n=Ih(r,e);return n===void 0&&n===t?kd(r,e):Po(t,n,ek|tk)}}var Md=rk;function nk(e){return function(t){return t?.[e]}}var Pd=nk;function ik(e){return function(t){return rn(t,e)}}var Ud=ik;function ok(e){return Zr(e)?Pd(St(e)):Ud(e)}var qd=ok;function sk(e){return typeof e=="function"?e:e==null?rt:typeof e=="object"?L(e)?Md(e[0],e[1]):_d(e):qd(e)}var Ee=sk;function ak(e,t,r,n){for(var i=-1,o=e==null?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}var Dd=ak;function uk(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++i];if(r(o[u],u,o)===!1)break}return t}}var Fd=uk;var lk=Fd(),Bd=lk;function ck(e,t){return e&&Bd(e,t,H)}var $d=ck;function fk(e,t){return function(r,n){if(r==null)return r;if(!ge(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var Kd=fk;var hk=Kd($d),Ke=hk;function dk(e,t,r,n){return Ke(e,function(i,o,a){t(n,i,r(i),a)}),n}var Gd=dk;function pk(e,t){return function(r,n){var i=L(r)?Dd:Gd,o=t?t():{};return i(r,e,Ee(n,2),o)}}var jd=pk;var Wd=Object.prototype,mk=Wd.hasOwnProperty,gk=Yr(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&Zt(t[0],t[1],i)&&(n=1);++r<n;)for(var o=t[r],a=er(o),s=-1,u=a.length;++s<u;){var l=a[s],c=e[l];(c===void 0||xt(c,Wd[l])&&!mk.call(e,l))&&(e[l]=o[l])}return e}),pn=gk;function Ek(e){return ce(e)&&ge(e)}var Ja=Ek;function xk(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var Fo=xk;var Tk=200;function yk(e,t,r,n){var i=-1,o=xo,a=!0,s=e.length,u=[],l=t.length;if(!s)return u;r&&(t=gt(t,At(r))),n?(o=Fo,a=!1):t.length>=Tk&&(o=hn,a=!1,t=new fn(t));e:for(;++i<s;){var c=e[i],f=r==null?c:r(c);if(c=n||c!==0?c:0,a&&f===f){for(var h=l;h--;)if(t[h]===f)continue e;u.push(c)}else o(t,f,n)||u.push(c)}return u}var Hd=yk;var Ak=Yr(function(e,t){return Ja(e)?Hd(e,on(t,1,Ja,!0)):[]}),ur=Ak;function Sk(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var vt=Sk;function Ok(e,t,r){var n=e==null?0:e.length;return n?(t=r||t===void 0?1:Et(t),Oo(e,t<0?0:t,n)):[]}var fe=Ok;function vk(e,t,r){var n=e==null?0:e.length;return n?(t=r||t===void 0?1:Et(t),t=n-t,Oo(e,0,t<0?0:t)):[]}var Ut=vk;function bk(e){return typeof e=="function"?e:rt}var zd=bk;function Lk(e,t){var r=L(e)?go:Ke;return r(e,zd(t))}var v=Lk;function Nk(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var Vd=Nk;function Ik(e,t){var r=!0;return Ke(e,function(n,i,o){return r=!!t(n,i,o),r}),r}var Yd=Ik;function Ck(e,t,r){var n=L(e)?Vd:Yd;return r&&Zt(e,t,r)&&(t=void 0),n(e,Ee(t,3))}var Ce=Ck;function Rk(e,t){var r=[];return Ke(e,function(n,i,o){t(n,i,o)&&r.push(n)}),r}var Bo=Rk;function _k(e,t){var r=L(e)?an:Bo;return r(e,Ee(t,3))}var Re=_k;function wk(e){return function(t,r,n){var i=Object(t);if(!ge(t)){var o=Ee(r,3);t=H(t),r=function(s){return o(i[s],s,i)}}var a=e(t,r,n);return a>-1?i[o?t[a]:a]:void 0}}var Xd=wk;var kk=Math.max;function Mk(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:Et(r);return i<0&&(i=kk(n+i,0)),Eo(e,Ee(t,3),i)}var Qd=Mk;var Pk=Xd(Qd),bt=Pk;function Uk(e){return e&&e.length?e[0]:void 0}var Oe=Uk;function qk(e,t){var r=-1,n=ge(e)?Array(e.length):[];return Ke(e,function(i,o,a){n[++r]=t(i,o,a)}),n}var Zd=qk;function Dk(e,t){var r=L(e)?gt:Zd;return r(e,Ee(t,3))}var S=Dk;function Fk(e,t){return on(S(e,t),1)}var Pe=Fk;var Bk=Object.prototype,$k=Bk.hasOwnProperty,Kk=jd(function(e,t,r){$k.call(e,r)?e[r].push(t):Vr(e,r,[t])}),eu=Kk;var Gk=Object.prototype,jk=Gk.hasOwnProperty;function Wk(e,t){return e!=null&&jk.call(e,t)}var Jd=Wk;function Hk(e,t){return e!=null&&Do(e,t,Jd)}var b=Hk;var zk="[object String]";function Vk(e){return typeof e=="string"||!L(e)&&ce(e)&&ke(e)==zk}var ye=Vk;function Yk(e,t){return gt(t,function(r){return e[r]})}var ep=Yk;function Xk(e){return e==null?[]:ep(e,H(e))}var K=Xk;var Qk=Math.max;function Zk(e,t,r,n){e=ge(e)?e:K(e),r=r&&!n?Et(r):0;var i=e.length;return r<0&&(r=Qk(i+r,0)),ye(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&zr(e,t,r)>-1}var ne=Zk;var Jk=Math.max;function eM(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:Et(r);return i<0&&(i=Jk(n+i,0)),zr(e,t,i)}var $o=eM;var tM="[object Map]",rM="[object Set]",nM=Object.prototype,iM=nM.hasOwnProperty;function oM(e){if(e==null)return!0;if(ge(e)&&(L(e)||typeof e=="string"||typeof e.splice=="function"||Mt(e)||Qr(e)||Jt(e)))return!e.length;var t=ft(e);if(t==tM||t==rM)return!e.size;if(yt(e))return!Ao(e).length;for(var r in e)if(iM.call(e,r))return!1;return!0}var k=oM;var sM="[object RegExp]";function aM(e){return ce(e)&&ke(e)==sM}var tp=aM;var rp=nt&&nt.isRegExp,uM=rp?At(rp):tp,it=uM;function lM(e){return e===void 0}var _e=lM;var cM="Expected a function";function fM(e){if(typeof e!="function")throw new TypeError(cM);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var np=fM;function hM(e,t,r,n){if(!oe(e))return e;t=or(t,e);for(var i=-1,o=t.length,a=o-1,s=e;s!=null&&++i<o;){var u=St(t[i]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(i!=a){var c=s[u];l=n?n(c,u,s):void 0,l===void 0&&(l=oe(c)?c:Xt(t[i+1])?[]:{})}Qt(s,u,l),s=s[u]}return e}var ip=hM;function dM(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=rn(e,a);r(s,a)&&ip(o,or(a,e),s)}return o}var op=dM;function pM(e,t){if(e==null)return{};var r=gt(No(e),function(n){return[n]});return t=Ee(t),op(e,r,function(n,i){return t(n,i[0])})}var Ge=pM;function mM(e,t,r,n,i){return i(e,function(o,a,s){r=n?(n=!1,o):t(r,o,a,s)}),r}var sp=mM;function gM(e,t,r){var n=L(e)?wh:sp,i=arguments.length<3;return n(e,Ee(t,4),r,i,Ke)}var xe=gM;function EM(e,t){var r=L(e)?an:Bo;return r(e,np(Ee(t,3)))}var lr=EM;function xM(e,t){var r;return Ke(e,function(n,i,o){return r=t(n,i,o),!r}),!!r}var ap=xM;function TM(e,t,r){var n=L(e)?wo:ap;return r&&Zt(e,t,r)&&(t=void 0),n(e,Ee(t,3))}var ei=TM;var yM=1/0,AM=ar&&1/dn(new ar([,-0]))[1]==yM?function(e){return new ar(e)}:se,up=AM;var SM=200;function OM(e,t,r){var n=-1,i=xo,o=e.length,a=!0,s=[],u=s;if(r)a=!1,i=Fo;else if(o>=SM){var l=t?null:up(e);if(l)return dn(l);a=!1,i=hn,u=new fn}else u=t?[]:s;e:for(;++n<o;){var c=e[n],f=t?t(c):c;if(c=r||c!==0?c:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(c)}else i(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}var lp=OM;function vM(e){return e&&e.length?lp(e):[]}var mn=vM;function gn(e){console&&console.error&&console.error(`Error: ${e}`)}function ti(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function ri(e){let t=new Date().getTime(),r=e();return{time:new Date().getTime()-t,value:r}}function ni(e){function t(){}t.prototype=e;let r=new t;function n(){return typeof r.bar}return n(),n(),e;(0,eval)(e)}function bM(e){return LM(e)?e.LABEL:e.name}function LM(e){return ye(e.LABEL)&&e.LABEL!==""}var Ve=class{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),v(this.definition,r=>{r.accept(t)})}},Y=class extends Ve{constructor(t){super([]),this.idx=1,Le(this,Ge(t,r=>r!==void 0))}set definition(t){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(t){t.visit(this)}},Ue=class extends Ve{constructor(t){super(t.definition),this.orgText="",Le(this,Ge(t,r=>r!==void 0))}},X=class extends Ve{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,Le(this,Ge(t,r=>r!==void 0))}},ee=class extends Ve{constructor(t){super(t.definition),this.idx=1,Le(this,Ge(t,r=>r!==void 0))}},he=class extends Ve{constructor(t){super(t.definition),this.idx=1,Le(this,Ge(t,r=>r!==void 0))}},de=class extends Ve{constructor(t){super(t.definition),this.idx=1,Le(this,Ge(t,r=>r!==void 0))}},F=class extends Ve{constructor(t){super(t.definition),this.idx=1,Le(this,Ge(t,r=>r!==void 0))}},ue=class extends Ve{constructor(t){super(t.definition),this.idx=1,Le(this,Ge(t,r=>r!==void 0))}},le=class extends Ve{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Le(this,Ge(t,r=>r!==void 0))}},P=class{constructor(t){this.idx=1,Le(this,Ge(t,r=>r!==void 0))}accept(t){t.visit(this)}};function Ko(e){return S(e,En)}function En(e){function t(r){return S(r,En)}if(e instanceof Y){let r={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return ye(e.label)&&(r.label=e.label),r}else{if(e instanceof X)return{type:"Alternative",definition:t(e.definition)};if(e instanceof ee)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof he)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof de)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:En(new P({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof ue)return{type:"RepetitionWithSeparator",idx:e.idx,separator:En(new P({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof F)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof le)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof P){let r={type:"Terminal",name:e.terminalType.name,label:bM(e.terminalType),idx:e.idx};ye(e.label)&&(r.terminalLabel=e.label);let n=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=it(n)?n.source:n),r}else{if(e instanceof Ue)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}}}var qe=class{visit(t){let r=t;switch(r.constructor){case Y:return this.visitNonTerminal(r);case X:return this.visitAlternative(r);case ee:return this.visitOption(r);case he:return this.visitRepetitionMandatory(r);case de:return this.visitRepetitionMandatoryWithSeparator(r);case ue:return this.visitRepetitionWithSeparator(r);case F:return this.visitRepetition(r);case le:return this.visitAlternation(r);case P:return this.visitTerminal(r);case Ue:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}};function tu(e){return e instanceof X||e instanceof ee||e instanceof F||e instanceof he||e instanceof de||e instanceof ue||e instanceof P||e instanceof Ue}function Lr(e,t=[]){return e instanceof ee||e instanceof F||e instanceof ue?!0:e instanceof le?ei(e.definition,n=>Lr(n,t)):e instanceof Y&&ne(t,e)?!1:e instanceof Ve?(e instanceof Y&&t.push(e),Ce(e.definition,n=>Lr(n,t))):!1}function ru(e){return e instanceof le}function je(e){if(e instanceof Y)return"SUBRULE";if(e instanceof ee)return"OPTION";if(e instanceof le)return"OR";if(e instanceof he)return"AT_LEAST_ONE";if(e instanceof de)return"AT_LEAST_ONE_SEP";if(e instanceof ue)return"MANY_SEP";if(e instanceof F)return"MANY";if(e instanceof P)return"CONSUME";throw Error("non exhaustive match")}var qt=class{walk(t,r=[]){v(t.definition,(n,i)=>{let o=fe(t.definition,i+1);if(n instanceof Y)this.walkProdRef(n,o,r);else if(n instanceof P)this.walkTerminal(n,o,r);else if(n instanceof X)this.walkFlat(n,o,r);else if(n instanceof ee)this.walkOption(n,o,r);else if(n instanceof he)this.walkAtLeastOne(n,o,r);else if(n instanceof de)this.walkAtLeastOneSep(n,o,r);else if(n instanceof ue)this.walkManySep(n,o,r);else if(n instanceof F)this.walkMany(n,o,r);else if(n instanceof le)this.walkOr(n,o,r);else throw Error("non exhaustive match")})}walkTerminal(t,r,n){}walkProdRef(t,r,n){}walkFlat(t,r,n){let i=r.concat(n);this.walk(t,i)}walkOption(t,r,n){let i=r.concat(n);this.walk(t,i)}walkAtLeastOne(t,r,n){let i=[new ee({definition:t.definition})].concat(r,n);this.walk(t,i)}walkAtLeastOneSep(t,r,n){let i=cp(t,r,n);this.walk(t,i)}walkMany(t,r,n){let i=[new ee({definition:t.definition})].concat(r,n);this.walk(t,i)}walkManySep(t,r,n){let i=cp(t,r,n);this.walk(t,i)}walkOr(t,r,n){let i=r.concat(n);v(t.definition,o=>{let a=new X({definition:[o]});this.walk(a,i)})}};function cp(e,t,r){return[new ee({definition:[new P({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}function Nr(e){if(e instanceof Y)return Nr(e.referencedRule);if(e instanceof P)return CM(e);if(tu(e))return NM(e);if(ru(e))return IM(e);throw Error("non exhaustive match")}function NM(e){let t=[],r=e.definition,n=0,i=r.length>n,o,a=!0;for(;i&&a;)o=r[n],a=Lr(o),t=t.concat(Nr(o)),n=n+1,i=r.length>n;return mn(t)}function IM(e){let t=S(e.definition,r=>Nr(r));return mn(Te(t))}function CM(e){return[e.terminalType]}var Go="_~IN~_";var nu=class extends qt{constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,r,n){}walkProdRef(t,r,n){let i=RM(t.referencedRule,t.idx)+this.topProd.name,o=r.concat(n),a=new X({definition:o}),s=Nr(a);this.follows[i]=s}};function fp(e){let t={};return v(e,r=>{let n=new nu(r).startWalking();Le(t,n)}),t}function RM(e,t){return e.name+t+Go}function I(e){return e.charCodeAt(0)}function jo(e,t){Array.isArray(e)?e.forEach(function(r){t.push(r)}):t.push(e)}function xn(e,t){if(e[t]===!0)throw"duplicate flag "+t;let r=e[t];e[t]=!0}function Ir(e){if(e===void 0)throw Error("Internal Error - Should never get here!");return!0}function ii(){throw Error("Internal Error - Should never get here!")}function iu(e){return e.type==="Character"}var oi=[];for(let e=I("0");e<=I("9");e++)oi.push(e);var si=[I("_")].concat(oi);for(let e=I("a");e<=I("z");e++)si.push(e);for(let e=I("A");e<=I("Z");e++)si.push(e);var ou=[I(" "),I("\f"),I(`
`),I("\r"),I("	"),I("\v"),I("	"),I("\xA0"),I("\u1680"),I("\u2000"),I("\u2001"),I("\u2002"),I("\u2003"),I("\u2004"),I("\u2005"),I("\u2006"),I("\u2007"),I("\u2008"),I("\u2009"),I("\u200A"),I("\u2028"),I("\u2029"),I("\u202F"),I("\u205F"),I("\u3000"),I("\uFEFF")];var _M=/[0-9a-fA-F]/,Wo=/[0-9]/,wM=/[1-9]/,ai=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");let r=this.disjunction();this.consumeChar("/");let n={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":xn(n,"global");break;case"i":xn(n,"ignoreCase");break;case"m":xn(n,"multiLine");break;case"u":xn(n,"unicode");break;case"y":xn(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){let t=[],r=this.idx;for(t.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(r)}}alternative(){let t=[],r=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break}Ir(r);let n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(t)}}return ii()}quantifier(t=!1){let r,n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":let i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let o;this.isDigit()?(o=this.integerIncludingZero(),r={atLeast:i,atMost:o}):r={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(t===!0&&r===void 0)return;Ir(r);break}if(!(t===!0&&r===void 0)&&Ir(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let t,r=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group();break}return t===void 0&&this.isPatternCharacter()&&(t=this.patternCharacter()),Ir(t)?(t.loc=this.loc(r),this.isQuantifier()&&(t.quantifier=this.quantifier()),t):ii()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[I(`
`),I("\r"),I("\u2028"),I("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,r=!1;switch(this.popChar()){case"d":t=oi;break;case"D":t=oi,r=!0;break;case"s":t=ou;break;case"S":t=ou,r=!0;break;case"w":t=si;break;case"W":t=si,r=!0;break}return Ir(t)?{type:"Set",value:t,complement:r}:ii()}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=I("\f");break;case"n":t=I(`
`);break;case"r":t=I("\r");break;case"t":t=I("	");break;case"v":t=I("\v");break}return Ir(t)?{type:"Character",value:t}:ii()}controlLetterEscapeAtom(){this.consumeChar("c");let t=this.popChar();if(/[a-zA-Z]/.test(t)===!1)throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:I("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let t=this.popChar();return{type:"Character",value:I(t)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let t=this.popChar();return{type:"Character",value:I(t)}}}characterClass(){let t=[],r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){let n=this.classAtom(),i=n.type==="Character";if(iu(n)&&this.isRangeDash()){this.consumeChar("-");let o=this.classAtom(),a=o.type==="Character";if(iu(o)){if(o.value<n.value)throw Error("Range out of order in character class");t.push({from:n.value,to:o.value})}else jo(n.value,t),t.push(I("-")),jo(o.value,t)}else jo(n.value,t)}return this.consumeChar("]"),{type:"Set",complement:r,value:t}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:I("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++;break}let r=this.disjunction();this.consumeChar(")");let n={type:"Group",capturing:t,value:r};return t&&(n.idx=this.groupIdx),n}positiveInteger(){let t=this.popChar();if(wM.test(t)===!1)throw Error("Expecting a positive integer");for(;Wo.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(Wo.test(t)===!1)throw Error("Expecting an integer");for(;Wo.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){let t=this.popChar();switch(t){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:I(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Wo.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){let t=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let r="";for(let i=0;i<t;i++){let o=this.popChar();if(_M.test(o)===!1)throw Error("Expecting a HexDecimal digits");r+=o}return{type:"Character",value:parseInt(r,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){let t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(t!==void 0&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}};var cr=class{visitChildren(t){for(let r in t){let n=t[r];t.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(i=>{this.visit(i)},this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t);break}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}};var Ho={},kM=new ai;function Tn(e){let t=e.toString();if(Ho.hasOwnProperty(t))return Ho[t];{let r=kM.pattern(t);return Ho[t]=r,r}}function hp(){Ho={}}var pp="Complement Sets are not supported for first char optimization",ui=`Unable to use "first char" lexer optimizations:
`;function mp(e,t=!1){try{let r=Tn(e);return su(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===pp)t&&ti(`${ui}	Unable to optimize: < ${e.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";t&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),gn(`${ui}
	Failed parsing: < ${e.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function su(e,t,r){switch(e.type){case"Disjunction":for(let i=0;i<e.value.length;i++)su(e.value[i],t,r);break;case"Alternative":let n=e.value;for(let i=0;i<n.length;i++){let o=n[i];switch(o.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=o;switch(a.type){case"Character":zo(a.value,t,r);break;case"Set":if(a.complement===!0)throw Error(pp);v(a.value,u=>{if(typeof u=="number")zo(u,t,r);else{let l=u;if(r===!0)for(let c=l.from;c<=l.to;c++)zo(c,t,r);else{for(let c=l.from;c<=l.to&&c<yn;c++)zo(c,t,r);if(l.to>=yn){let c=l.from>=yn?l.from:yn,f=l.to,h=Lt(c),p=Lt(f);for(let m=h;m<=p;m++)t[m]=m}}}});break;case"Group":su(a.value,t,r);break;default:throw Error("Non Exhaustive Match")}let s=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&au(a)===!1||a.type!=="Group"&&s===!1)break}break;default:throw Error("non exhaustive match!")}return K(t)}function zo(e,t,r){let n=Lt(e);t[n]=n,r===!0&&MM(e,t)}function MM(e,t){let r=String.fromCharCode(e),n=r.toUpperCase();if(n!==r){let i=Lt(n.charCodeAt(0));t[i]=i}else{let i=r.toLowerCase();if(i!==r){let o=Lt(i.charCodeAt(0));t[o]=o}}}function dp(e,t){return bt(e.value,r=>{if(typeof r=="number")return ne(t,r);{let n=r;return bt(t,i=>n.from<=i&&i<=n.to)!==void 0}})}function au(e){let t=e.quantifier;return t&&t.atLeast===0?!0:e.value?L(e.value)?Ce(e.value,au):au(e.value):!1}var uu=class extends cr{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(this.found!==!0){switch(t.type){case"Lookahead":this.visitLookahead(t);return;case"NegativeLookahead":this.visitNegativeLookahead(t);return}super.visitChildren(t)}}visitCharacter(t){ne(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?dp(t,this.targetCharCodes)===void 0&&(this.found=!0):dp(t,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Vo(e,t){if(t instanceof RegExp){let r=Tn(t),n=new uu(e);return n.visit(r),n.found}else return bt(t,r=>ne(e,r.charCodeAt(0)))!==void 0}var Cr="PATTERN",An="defaultMode",Yo="modes",cu=typeof new RegExp("(?:)").sticky=="boolean";function xp(e,t){t=pn(t,{useSticky:cu,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(x,A)=>A()});let r=t.tracer;r("initCharCodeToOptimizedIndexMap",()=>{ZM()});let n;r("Reject Lexer.NA",()=>{n=lr(e,x=>x[Cr]===B.NA)});let i=!1,o;r("Transform Patterns",()=>{i=!1,o=S(n,x=>{let A=x[Cr];if(it(A)){let O=A.source;return O.length===1&&O!=="^"&&O!=="$"&&O!=="."&&!A.ignoreCase?O:O.length===2&&O[0]==="\\"&&!ne(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],O[1])?O[1]:t.useSticky?Ep(A):gp(A)}else{if(Me(A))return i=!0,{exec:A};if(typeof A=="object")return i=!0,A;if(typeof A=="string"){if(A.length===1)return A;{let O=A.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),N=new RegExp(O);return t.useSticky?Ep(N):gp(N)}}else throw Error("non exhaustive match")}})});let a,s,u,l,c;r("misc mapping",()=>{a=S(n,x=>x.tokenTypeIdx),s=S(n,x=>{let A=x.GROUP;if(A!==B.SKIPPED){if(ye(A))return A;if(_e(A))return!1;throw Error("non exhaustive match")}}),u=S(n,x=>{let A=x.LONGER_ALT;if(A)return L(A)?S(A,N=>$o(n,N)):[$o(n,A)]}),l=S(n,x=>x.PUSH_MODE),c=S(n,x=>b(x,"POP_MODE"))});let f;r("Line Terminator Handling",()=>{let x=Lp(t.lineTerminatorCharacters);f=S(n,A=>!1),t.positionTracking!=="onlyOffset"&&(f=S(n,A=>b(A,"LINE_BREAKS")?!!A.LINE_BREAKS:bp(A,x)===!1&&Vo(x,A.PATTERN)))});let h,p,m,g;r("Misc Mapping #2",()=>{h=S(n,Op),p=S(o,XM),m=xe(n,(x,A)=>{let O=A.GROUP;return ye(O)&&O!==B.SKIPPED&&(x[O]=[]),x},{}),g=S(o,(x,A)=>({pattern:o[A],longerAlt:u[A],canLineTerminator:f[A],isCustom:h[A],short:p[A],group:s[A],push:l[A],pop:c[A],tokenTypeIdx:a[A],tokenType:n[A]}))});let E=!0,y=[];return t.safeMode||r("First Char Optimization",()=>{y=xe(n,(x,A,O)=>{if(typeof A.PATTERN=="string"){let N=A.PATTERN.charCodeAt(0),_=Lt(N);lu(x,_,g[O])}else if(L(A.START_CHARS_HINT)){let N;v(A.START_CHARS_HINT,_=>{let G=typeof _=="string"?_.charCodeAt(0):_,$=Lt(G);N!==$&&(N=$,lu(x,$,g[O]))})}else if(it(A.PATTERN))if(A.PATTERN.unicode)E=!1,t.ensureOptimizations&&gn(`${ui}	Unable to analyze < ${A.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let N=mp(A.PATTERN,t.ensureOptimizations);k(N)&&(E=!1),v(N,_=>{lu(x,_,g[O])})}else t.ensureOptimizations&&gn(`${ui}	TokenType: <${A.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),E=!1;return x},[])}),{emptyGroups:m,patternIdxToConfig:g,charCodeToPatternIdxToConfig:y,hasCustom:i,canBeOptimized:E}}function Tp(e,t){let r=[],n=UM(e);r=r.concat(n.errors);let i=qM(n.valid),o=i.valid;return r=r.concat(i.errors),r=r.concat(PM(o)),r=r.concat(WM(o)),r=r.concat(HM(o,t)),r=r.concat(zM(o)),r}function PM(e){let t=[],r=Re(e,n=>it(n[Cr]));return t=t.concat(FM(r)),t=t.concat(KM(r)),t=t.concat(GM(r)),t=t.concat(jM(r)),t=t.concat(BM(r)),t}function UM(e){let t=Re(e,i=>!b(i,Cr)),r=S(t,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:ie.MISSING_PATTERN,tokenTypes:[i]})),n=ur(e,t);return{errors:r,valid:n}}function qM(e){let t=Re(e,i=>{let o=i[Cr];return!it(o)&&!Me(o)&&!b(o,"exec")&&!ye(o)}),r=S(t,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:ie.INVALID_PATTERN,tokenTypes:[i]})),n=ur(e,t);return{errors:r,valid:n}}var DM=/[^\\][$]/;function FM(e){class t extends cr{constructor(){super(...arguments),this.found=!1}visitEndAnchor(o){this.found=!0}}let r=Re(e,i=>{let o=i.PATTERN;try{let a=Tn(o),s=new t;return s.visit(a),s.found}catch{return DM.test(o.source)}});return S(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ie.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function BM(e){let t=Re(e,n=>n.PATTERN.test(""));return S(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:ie.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}var $M=/[^\\[][\^]|^\^/;function KM(e){class t extends cr{constructor(){super(...arguments),this.found=!1}visitStartAnchor(o){this.found=!0}}let r=Re(e,i=>{let o=i.PATTERN;try{let a=Tn(o),s=new t;return s.visit(a),s.found}catch{return $M.test(o.source)}});return S(r,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:ie.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function GM(e){let t=Re(e,n=>{let i=n[Cr];return i instanceof RegExp&&(i.multiline||i.global)});return S(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:ie.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}function jM(e){let t=[],r=S(e,o=>xe(e,(a,s)=>(o.PATTERN.source===s.PATTERN.source&&!ne(t,s)&&s.PATTERN!==B.NA&&(t.push(s),a.push(s)),a),[]));r=Ot(r);let n=Re(r,o=>o.length>1);return S(n,o=>{let a=S(o,u=>u.name);return{message:`The same RegExp pattern ->${Oe(o).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:ie.DUPLICATE_PATTERNS_FOUND,tokenTypes:o}})}function WM(e){let t=Re(e,n=>{if(!b(n,"GROUP"))return!1;let i=n.GROUP;return i!==B.SKIPPED&&i!==B.NA&&!ye(i)});return S(t,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:ie.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}function HM(e,t){let r=Re(e,i=>i.PUSH_MODE!==void 0&&!ne(t,i.PUSH_MODE));return S(r,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:ie.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function zM(e){let t=[],r=xe(e,(n,i,o)=>{let a=i.PATTERN;return a===B.NA||(ye(a)?n.push({str:a,idx:o,tokenType:i}):it(a)&&YM(a)&&n.push({str:a.source,idx:o,tokenType:i})),n},[]);return v(e,(n,i)=>{v(r,({str:o,idx:a,tokenType:s})=>{if(i<a&&VM(o,n.PATTERN)){let u=`Token: ->${s.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:u,type:ie.UNREACHABLE_PATTERN,tokenTypes:[n,s]})}})}),t}function VM(e,t){if(it(t)){let r=t.exec(e);return r!==null&&r.index===0}else{if(Me(t))return t(e,0,[],{});if(b(t,"exec"))return t.exec(e,0,[],{});if(typeof t=="string")return t===e;throw Error("non exhaustive match")}}function YM(e){return bt([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>e.source.indexOf(r)!==-1)===void 0}function gp(e){let t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function Ep(e){let t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function yp(e,t,r){let n=[];return b(e,An)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+An+`> property in its definition
`,type:ie.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),b(e,Yo)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Yo+`> property in its definition
`,type:ie.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),b(e,Yo)&&b(e,An)&&!b(e.modes,e.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${An}: <${e.defaultMode}>which does not exist
`,type:ie.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),b(e,Yo)&&v(e.modes,(i,o)=>{v(i,(a,s)=>{if(_e(a))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${o}> at index: <${s}>
`,type:ie.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(b(a,"LONGER_ALT")){let u=L(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];v(u,l=>{!_e(l)&&!ne(i,l)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${o}>
`,type:ie.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function Ap(e,t,r){let n=[],i=!1,o=Ot(Te(K(e.modes))),a=lr(o,u=>u[Cr]===B.NA),s=Lp(r);return t&&v(a,u=>{let l=bp(u,s);if(l!==!1){let f={message:QM(u,l),type:l.issue,tokenType:u};n.push(f)}else b(u,"LINE_BREAKS")?u.LINE_BREAKS===!0&&(i=!0):Vo(s,u.PATTERN)&&(i=!0)}),t&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:ie.NO_LINE_BREAKS_FLAGS}),n}function Sp(e){let t={},r=H(e);return v(r,n=>{let i=e[n];if(L(i))t[n]=[];else throw Error("non exhaustive match")}),t}function Op(e){let t=e.PATTERN;if(it(t))return!1;if(Me(t))return!0;if(b(t,"exec"))return!0;if(ye(t))return!1;throw Error("non exhaustive match")}function XM(e){return ye(e)&&e.length===1?e.charCodeAt(0):!1}var vp={test:function(e){let t=e.length;for(let r=this.lastIndex;r<t;r++){let n=e.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return e.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function bp(e,t){if(b(e,"LINE_BREAKS"))return!1;if(it(e.PATTERN)){try{Vo(t,e.PATTERN)}catch(r){return{issue:ie.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(ye(e.PATTERN))return!1;if(Op(e))return{issue:ie.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function QM(e,t){if(t.issue===ie.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${e.name}> Token Type
	 Root cause: ${t.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===ie.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${e.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Lp(e){return S(e,r=>ye(r)?r.charCodeAt(0):r)}function lu(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}var yn=256,Xo=[];function Lt(e){return e<yn?e:Xo[e]}function ZM(){if(k(Xo)){Xo=new Array(65536);for(let e=0;e<65536;e++)Xo[e]=e>255?255+~~(e/255):e}}function Dt(e,t){let r=e.tokenTypeIdx;return r===t.tokenTypeIdx?!0:t.isParent===!0&&t.categoryMatchesMap[r]===!0}function Sn(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var Np=1,Cp={};function Ft(e){let t=JM(e);eP(t),rP(t),tP(t),v(t,r=>{r.isParent=r.categoryMatches.length>0})}function JM(e){let t=V(e),r=e,n=!0;for(;n;){r=Ot(Te(S(r,o=>o.CATEGORIES)));let i=ur(r,t);t=t.concat(i),k(i)?n=!1:r=i}return t}function eP(e){v(e,t=>{fu(t)||(Cp[Np]=t,t.tokenTypeIdx=Np++),Ip(t)&&!L(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),Ip(t)||(t.CATEGORIES=[]),nP(t)||(t.categoryMatches=[]),iP(t)||(t.categoryMatchesMap={})})}function tP(e){v(e,t=>{t.categoryMatches=[],v(t.categoryMatchesMap,(r,n)=>{t.categoryMatches.push(Cp[n].tokenTypeIdx)})})}function rP(e){v(e,t=>{Rp([],t)})}function Rp(e,t){v(e,r=>{t.categoryMatchesMap[r.tokenTypeIdx]=!0}),v(t.CATEGORIES,r=>{let n=e.concat(t);ne(n,r)||Rp(n,r)})}function fu(e){return b(e,"tokenTypeIdx")}function Ip(e){return b(e,"CATEGORIES")}function nP(e){return b(e,"categoryMatches")}function iP(e){return b(e,"categoryMatchesMap")}function _p(e){return b(e,"tokenTypeIdx")}var hu={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,r,n,i){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`}};var ie;(function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(ie||(ie={}));var li={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:hu,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(li);var B=class{constructor(t,r=li){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,o)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);let{time:s,value:u}=ri(o),l=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${i}> time: ${s}ms`),this.traceInitIndent--,u}else return o()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Le({},li,r);let n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,o=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===li.lineTerminatorsPattern)this.config.lineTerminatorsPattern=vp;else if(this.config.lineTerminatorCharacters===li.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),L(t)?i={modes:{defaultMode:V(t)},defaultMode:An}:(o=!1,i=V(t))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(yp(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Ap(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},v(i.modes,(s,u)=>{i.modes[u]=lr(s,l=>_e(l))});let a=H(i.modes);if(v(i.modes,(s,u)=>{this.TRACE_INIT(`Mode: <${u}> processing`,()=>{if(this.modes.push(u),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Tp(s,a))}),k(this.lexerDefinitionErrors)){Ft(s);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=xp(s,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[u]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[u]=l.charCodeToPatternIdxToConfig,this.emptyGroups=Le({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[u]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!k(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let u=S(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+u)}v(this.lexerDefinitionWarning,s=>{ti(s.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(cu?(this.chopInput=rt,this.match=this.matchWithTest):(this.updateLastIndex=se,this.match=this.matchWithExec),o&&(this.handleModes=se),this.trackStartLines===!1&&(this.computeNewColumn=rt),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=se),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let s=xe(this.canModeBeOptimized,(u,l,c)=>(l===!1&&u.push(c),u),[]);if(r.ensureOptimizations&&!k(s))throw Error(`Lexer Modes: < ${s.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{hp()}),this.TRACE_INIT("toFastProperties",()=>{ni(this)})})}tokenize(t,r=this.defaultMode){if(!k(this.lexerDefinitionErrors)){let i=S(this.lexerDefinitionErrors,o=>o.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(t,r)}tokenizeInternal(t,r){let n,i,o,a,s,u,l,c,f,h,p,m,g,E,y,x,A=t,O=A.length,N=0,_=0,G=this.hasCustom?0:Math.floor(t.length/10),$=new Array(G),He=[],Ne=this.trackStartLines?1:void 0,W=this.trackStartLines?1:void 0,be=Sp(this.emptyGroups),et=this.trackStartLines,lo=this.config.lineTerminatorsPattern,co=0,zt=[],Yn=[],fo=[],hf=[];Object.freeze(hf);let Xn;function df(){return zt}function pf(Ie){let tt=Lt(Ie),jr=Yn[tt];return jr===void 0?hf:jr}let qL=Ie=>{if(fo.length===1&&Ie.tokenType.PUSH_MODE===void 0){let tt=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Ie);He.push({offset:Ie.startOffset,line:Ie.startLine,column:Ie.startColumn,length:Ie.image.length,message:tt})}else{fo.pop();let tt=vt(fo);zt=this.patternIdxToConfig[tt],Yn=this.charCodeToPatternIdxToConfig[tt],co=zt.length;let jr=this.canModeBeOptimized[tt]&&this.config.safeMode===!1;Yn&&jr?Xn=pf:Xn=df}};function mf(Ie){fo.push(Ie),Yn=this.charCodeToPatternIdxToConfig[Ie],zt=this.patternIdxToConfig[Ie],co=zt.length,co=zt.length;let tt=this.canModeBeOptimized[Ie]&&this.config.safeMode===!1;Yn&&tt?Xn=pf:Xn=df}mf.call(this,r);let ct,gf=this.config.recoveryEnabled;for(;N<O;){u=null;let Ie=A.charCodeAt(N),tt=Xn(Ie),jr=tt.length;for(n=0;n<jr;n++){ct=tt[n];let ze=ct.pattern;l=null;let _t=ct.short;if(_t!==!1?Ie===_t&&(u=ze):ct.isCustom===!0?(x=ze.exec(A,N,$,be),x!==null?(u=x[0],x.payload!==void 0&&(l=x.payload)):u=null):(this.updateLastIndex(ze,N),u=this.match(ze,t,N)),u!==null){if(s=ct.longerAlt,s!==void 0){let Vt=s.length;for(o=0;o<Vt;o++){let wt=zt[s[o]],Or=wt.pattern;if(c=null,wt.isCustom===!0?(x=Or.exec(A,N,$,be),x!==null?(a=x[0],x.payload!==void 0&&(c=x.payload)):a=null):(this.updateLastIndex(Or,N),a=this.match(Or,t,N)),a&&a.length>u.length){u=a,l=c,ct=wt;break}}}break}}if(u!==null){if(f=u.length,h=ct.group,h!==void 0&&(p=ct.tokenTypeIdx,m=this.createTokenInstance(u,N,p,ct.tokenType,Ne,W,f),this.handlePayload(m,l),h===!1?_=this.addToken($,_,m):be[h].push(m)),t=this.chopInput(t,f),N=N+f,W=this.computeNewColumn(W,f),et===!0&&ct.canLineTerminator===!0){let ze=0,_t,Vt;lo.lastIndex=0;do _t=lo.test(u),_t===!0&&(Vt=lo.lastIndex-1,ze++);while(_t===!0);ze!==0&&(Ne=Ne+ze,W=f-Vt,this.updateTokenEndLineColumnLocation(m,h,Vt,ze,Ne,W,f))}this.handleModes(ct,qL,mf,m)}else{let ze=N,_t=Ne,Vt=W,wt=gf===!1;for(;wt===!1&&N<O;)for(t=this.chopInput(t,1),N++,i=0;i<co;i++){let Or=zt[i],za=Or.pattern,Ef=Or.short;if(Ef!==!1?A.charCodeAt(N)===Ef&&(wt=!0):Or.isCustom===!0?wt=za.exec(A,N,$,be)!==null:(this.updateLastIndex(za,N),wt=za.exec(t)!==null),wt===!0)break}if(g=N-ze,W=this.computeNewColumn(W,g),y=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(A,ze,g,_t,Vt),He.push({offset:ze,line:_t,column:Vt,length:g,message:y}),gf===!1)break}}return this.hasCustom||($.length=_),{tokens:$,groups:be,errors:He}}handleModes(t,r,n,i){if(t.pop===!0){let o=t.push;r(i),o!==void 0&&n.call(this,o)}else t.push!==void 0&&n.call(this,t.push)}chopInput(t,r){return t.substring(r)}updateLastIndex(t,r){t.lastIndex=r}updateTokenEndLineColumnLocation(t,r,n,i,o,a,s){let u,l;r!==void 0&&(u=n===s-1,l=u?-1:0,i===1&&u===!0||(t.endLine=o+l,t.endColumn=a-1+-l))}computeNewColumn(t,r){return t+r}createOffsetOnlyToken(t,r,n,i){return{image:t,startOffset:r,tokenTypeIdx:n,tokenType:i}}createStartOnlyToken(t,r,n,i,o,a){return{image:t,startOffset:r,startLine:o,startColumn:a,tokenTypeIdx:n,tokenType:i}}createFullToken(t,r,n,i,o,a,s){return{image:t,startOffset:r,endOffset:r+s-1,startLine:o,endLine:o,startColumn:a,endColumn:a+s-1,tokenTypeIdx:n,tokenType:i}}addTokenUsingPush(t,r,n){return t.push(n),r}addTokenUsingMemberAccess(t,r,n){return t[r]=n,r++,r}handlePayloadNoCustom(t,r){}handlePayloadWithCustom(t,r){r!==null&&(t.payload=r)}matchWithTest(t,r,n){return t.test(r)===!0?r.substring(n,t.lastIndex):null}matchWithExec(t,r){let n=t.exec(r);return n!==null?n[0]:null}};B.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";B.NA=/NOT_APPLICABLE/;function Rr(e){return du(e)?e.LABEL:e.name}function du(e){return ye(e.LABEL)&&e.LABEL!==""}var oP="parent",wp="categories",kp="label",Mp="group",Pp="push_mode",Up="pop_mode",qp="longer_alt",Dp="line_breaks",Fp="start_chars_hint";function T(e){return sP(e)}function sP(e){let t=e.pattern,r={};if(r.name=e.name,_e(t)||(r.PATTERN=t),b(e,oP))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return b(e,wp)&&(r.CATEGORIES=e[wp]),Ft([r]),b(e,kp)&&(r.LABEL=e[kp]),b(e,Mp)&&(r.GROUP=e[Mp]),b(e,Up)&&(r.POP_MODE=e[Up]),b(e,Pp)&&(r.PUSH_MODE=e[Pp]),b(e,qp)&&(r.LONGER_ALT=e[qp]),b(e,Dp)&&(r.LINE_BREAKS=e[Dp]),b(e,Fp)&&(r.START_CHARS_HINT=e[Fp]),r}var De=T({name:"EOF",pattern:B.NA});Ft([De]);function _r(e,t,r,n,i,o,a,s){return{image:t,startOffset:r,endOffset:n,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function pu(e,t){return Dt(e,t)}var Qo={buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:n}){return`Expecting ${du(e)?`--> ${Rr(e)} <--`:`token of type --> ${e.name} <--`} but found --> '${t.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:n,ruleName:i}){let o="Expecting: ",s=`
but found: '`+Oe(t).image+"'";if(n)return o+n+s;{let u=xe(e,(h,p)=>h.concat(p),[]),l=S(u,h=>`[${S(h,p=>Rr(p)).join(", ")}]`),f=`one of these possible Token sequences:
${S(l,(h,p)=>`  ${p+1}. ${h}`).join(`
`)}`;return o+f+s}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:n}){let i="Expecting: ",a=`
but found: '`+Oe(t).image+"'";if(r)return i+r+a;{let u=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${S(e,l=>`[${S(l,c=>Rr(c)).join(",")}]`).join(" ,")}>`;return i+u+a}}};Object.freeze(Qo);var Bp={buildRuleNotFoundError(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+`<-
inside top level rule: ->`+e.name+"<-"}},ht={buildDuplicateFoundError(e,t){function r(c){return c instanceof P?c.terminalType.name:c instanceof Y?c.nonTerminalName:""}let n=e.name,i=Oe(t),o=i.idx,a=je(i),s=r(i),u=o>0,l=`->${a}${u?o:""}<- ${s?`with argument: ->${s}<-`:""}
                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(e){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(e){let t=S(e.prefixPath,i=>Rr(i)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(e){let t=S(e.prefixPath,i=>Rr(i)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx,n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(e){let t=je(e.repetition);return e.repetition.idx!==0&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){return`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(e){return`An Alternation cannot have more than 256 alternatives:
<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
 has ${e.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(e){let t=e.topLevelRule.name,r=S(e.leftRecursionPath,o=>o.name),n=`${t} --> ${r.concat([t]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${t}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;return e.topLevelRule instanceof Ue?t=e.topLevelRule.name:t=e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};function $p(e,t){let r=new mu(e,t);return r.resolveRefs(),r.errors}var mu=class extends qe{constructor(t,r){super(),this.nameToTopRule=t,this.errMsgProvider=r,this.errors=[]}resolveRefs(){v(K(this.nameToTopRule),t=>{this.currTopLevel=t,t.accept(this)})}visitNonTerminal(t){let r=this.nameToTopRule[t.nonTerminalName];if(r)t.referencedRule=r;else{let n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:n,type:Ae.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}};var gu=class extends qt{constructor(t,r){super(),this.topProd=t,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=V(this.path.ruleStack).reverse(),this.occurrenceStack=V(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,r=[]){this.found||super.walk(t,r)}walkProdRef(t,r,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){let i=r.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,i)}}updateExpectedNext(){k(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Zo=class extends gu{constructor(t,r){super(t,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,r,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){let i=r.concat(n),o=new X({definition:i});this.possibleTokTypes=Nr(o),this.found=!0}}},On=class extends qt{constructor(t,r){super(),this.topRule=t,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},Jo=class extends On{walkMany(t,r,n){if(t.idx===this.occurrence){let i=Oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(t,r,n)}},ci=class extends On{walkManySep(t,r,n){if(t.idx===this.occurrence){let i=Oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(t,r,n)}},es=class extends On{walkAtLeastOne(t,r,n){if(t.idx===this.occurrence){let i=Oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(t,r,n)}},fi=class extends On{walkAtLeastOneSep(t,r,n){if(t.idx===this.occurrence){let i=Oe(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof P&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(t,r,n)}};function ts(e,t,r=[]){r=V(r);let n=[],i=0;function o(s){return s.concat(fe(e,i+1))}function a(s){let u=ts(o(s),t,r);return n.concat(u)}for(;r.length<t&&i<e.length;){let s=e[i];if(s instanceof X)return a(s.definition);if(s instanceof Y)return a(s.definition);if(s instanceof ee)n=a(s.definition);else if(s instanceof he){let u=s.definition.concat([new F({definition:s.definition})]);return a(u)}else if(s instanceof de){let u=[new X({definition:s.definition}),new F({definition:[new P({terminalType:s.separator})].concat(s.definition)})];return a(u)}else if(s instanceof ue){let u=s.definition.concat([new F({definition:[new P({terminalType:s.separator})].concat(s.definition)})]);n=a(u)}else if(s instanceof F){let u=s.definition.concat([new F({definition:s.definition})]);n=a(u)}else{if(s instanceof le)return v(s.definition,u=>{k(u.definition)===!1&&(n=a(u.definition))}),n;if(s instanceof P)r.push(s.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:fe(e,i)}),n}function rs(e,t,r,n){let i="EXIT_NONE_TERMINAL",o=[i],a="EXIT_ALTERNATIVE",s=!1,u=t.length,l=u-n-1,c=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!k(f);){let h=f.pop();if(h===a){s&&vt(f).idx<=l&&f.pop();continue}let p=h.def,m=h.idx,g=h.ruleStack,E=h.occurrenceStack;if(k(p))continue;let y=p[0];if(y===i){let x={idx:m,def:fe(p),ruleStack:Ut(g),occurrenceStack:Ut(E)};f.push(x)}else if(y instanceof P)if(m<u-1){let x=m+1,A=t[x];if(r(A,y.terminalType)){let O={idx:x,def:fe(p),ruleStack:g,occurrenceStack:E};f.push(O)}}else if(m===u-1)c.push({nextTokenType:y.terminalType,nextTokenOccurrence:y.idx,ruleStack:g,occurrenceStack:E}),s=!0;else throw Error("non exhaustive match");else if(y instanceof Y){let x=V(g);x.push(y.nonTerminalName);let A=V(E);A.push(y.idx);let O={idx:m,def:y.definition.concat(o,fe(p)),ruleStack:x,occurrenceStack:A};f.push(O)}else if(y instanceof ee){let x={idx:m,def:fe(p),ruleStack:g,occurrenceStack:E};f.push(x),f.push(a);let A={idx:m,def:y.definition.concat(fe(p)),ruleStack:g,occurrenceStack:E};f.push(A)}else if(y instanceof he){let x=new F({definition:y.definition,idx:y.idx}),A=y.definition.concat([x],fe(p)),O={idx:m,def:A,ruleStack:g,occurrenceStack:E};f.push(O)}else if(y instanceof de){let x=new P({terminalType:y.separator}),A=new F({definition:[x].concat(y.definition),idx:y.idx}),O=y.definition.concat([A],fe(p)),N={idx:m,def:O,ruleStack:g,occurrenceStack:E};f.push(N)}else if(y instanceof ue){let x={idx:m,def:fe(p),ruleStack:g,occurrenceStack:E};f.push(x),f.push(a);let A=new P({terminalType:y.separator}),O=new F({definition:[A].concat(y.definition),idx:y.idx}),N=y.definition.concat([O],fe(p)),_={idx:m,def:N,ruleStack:g,occurrenceStack:E};f.push(_)}else if(y instanceof F){let x={idx:m,def:fe(p),ruleStack:g,occurrenceStack:E};f.push(x),f.push(a);let A=new F({definition:y.definition,idx:y.idx}),O=y.definition.concat([A],fe(p)),N={idx:m,def:O,ruleStack:g,occurrenceStack:E};f.push(N)}else if(y instanceof le)for(let x=y.definition.length-1;x>=0;x--){let A=y.definition[x],O={idx:m,def:A.definition.concat(fe(p)),ruleStack:g,occurrenceStack:E};f.push(O),f.push(a)}else if(y instanceof X)f.push({idx:m,def:y.definition.concat(fe(p)),ruleStack:g,occurrenceStack:E});else if(y instanceof Ue)f.push(aP(y,m,g,E));else throw Error("non exhaustive match")}return c}function aP(e,t,r,n){let i=V(r);i.push(e.name);let o=V(n);return o.push(1),{idx:t,def:e.definition,ruleStack:i,occurrenceStack:o}}var ae;(function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"})(ae||(ae={}));function is(e){if(e instanceof ee||e==="Option")return ae.OPTION;if(e instanceof F||e==="Repetition")return ae.REPETITION;if(e instanceof he||e==="RepetitionMandatory")return ae.REPETITION_MANDATORY;if(e instanceof de||e==="RepetitionMandatoryWithSeparator")return ae.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof ue||e==="RepetitionWithSeparator")return ae.REPETITION_WITH_SEPARATOR;if(e instanceof le||e==="Alternation")return ae.ALTERNATION;throw Error("non exhaustive match")}function Gp(e,t,r,n,i,o){let a=hi(e,t,r),s=Yp(a)?Sn:Dt;return o(a,n,s,i)}function jp(e,t,r,n,i,o){let a=di(e,t,i,r),s=Yp(a)?Sn:Dt;return o(a[0],s,n)}function Wp(e,t,r,n){let i=e.length,o=Ce(e,a=>Ce(a,s=>s.length===1));if(t)return function(a){let s=S(a,u=>u.GATE);for(let u=0;u<i;u++){let l=e[u],c=l.length,f=s[u];if(!(f!==void 0&&f.call(this)===!1))e:for(let h=0;h<c;h++){let p=l[h],m=p.length;for(let g=0;g<m;g++){let E=this.LA(g+1);if(r(E,p[g])===!1)continue e}return u}}};if(o&&!n){let a=S(e,u=>Te(u)),s=xe(a,(u,l,c)=>(v(l,f=>{b(u,f.tokenTypeIdx)||(u[f.tokenTypeIdx]=c),v(f.categoryMatches,h=>{b(u,h)||(u[h]=c)})}),u),{});return function(){let u=this.LA(1);return s[u.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){let s=e[a],u=s.length;e:for(let l=0;l<u;l++){let c=s[l],f=c.length;for(let h=0;h<f;h++){let p=this.LA(h+1);if(r(p,c[h])===!1)continue e}return a}}}}function Hp(e,t,r){let n=Ce(e,o=>o.length===1),i=e.length;if(n&&!r){let o=Te(e);if(o.length===1&&k(o[0].categoryMatches)){let s=o[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}else{let a=xe(o,(s,u,l)=>(s[u.tokenTypeIdx]=!0,v(u.categoryMatches,c=>{s[c]=!0}),s),[]);return function(){let s=this.LA(1);return a[s.tokenTypeIdx]===!0}}}else return function(){e:for(let o=0;o<i;o++){let a=e[o],s=a.length;for(let u=0;u<s;u++){let l=this.LA(u+1);if(t(l,a[u])===!1)continue e}return!0}return!1}}var xu=class extends qt{constructor(t,r,n){super(),this.topProd=t,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,r,n,i){return t.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(i),!0):!1}walkOption(t,r,n){this.checkIsTarget(t,ae.OPTION,r,n)||super.walkOption(t,r,n)}walkAtLeastOne(t,r,n){this.checkIsTarget(t,ae.REPETITION_MANDATORY,r,n)||super.walkOption(t,r,n)}walkAtLeastOneSep(t,r,n){this.checkIsTarget(t,ae.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(t,r,n)}walkMany(t,r,n){this.checkIsTarget(t,ae.REPETITION,r,n)||super.walkOption(t,r,n)}walkManySep(t,r,n){this.checkIsTarget(t,ae.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(t,r,n)}},ns=class extends qe{constructor(t,r,n){super(),this.targetOccurrence=t,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(t,r){t.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||t===this.targetRef)&&(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,ae.OPTION)}visitRepetition(t){this.checkIsTarget(t,ae.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,ae.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,ae.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,ae.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,ae.ALTERNATION)}};function Kp(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function Eu(e){let t=[""];for(let r=0;r<e.length;r++){let n=e[r],i=[];for(let o=0;o<t.length;o++){let a=t[o];i.push(a+"_"+n.tokenTypeIdx);for(let s=0;s<n.categoryMatches.length;s++){let u="_"+n.categoryMatches[s];i.push(a+u)}}t=i}return t}function uP(e,t,r){for(let n=0;n<e.length;n++){if(n===r)continue;let i=e[n];for(let o=0;o<t.length;o++){let a=t[o];if(i[a]===!0)return!1}}return!0}function zp(e,t){let r=S(e,a=>ts([a],1)),n=Kp(r.length),i=S(r,a=>{let s={};return v(a,u=>{let l=Eu(u.partialPath);v(l,c=>{s[c]=!0})}),s}),o=r;for(let a=1;a<=t;a++){let s=o;o=Kp(s.length);for(let u=0;u<s.length;u++){let l=s[u];for(let c=0;c<l.length;c++){let f=l[c].partialPath,h=l[c].suffixDef,p=Eu(f);if(uP(i,p,u)||k(h)||f.length===t){let g=n[u];if(os(g,f)===!1){g.push(f);for(let E=0;E<p.length;E++){let y=p[E];i[u][y]=!0}}}else{let g=ts(h,a+1,f);o[u]=o[u].concat(g),v(g,E=>{let y=Eu(E.partialPath);v(y,x=>{i[u][x]=!0})})}}}}return n}function hi(e,t,r,n){let i=new ns(e,ae.ALTERNATION,n);return t.accept(i),zp(i.result,r)}function di(e,t,r,n){let i=new ns(e,r);t.accept(i);let o=i.result,s=new xu(t,e,r).startWalking(),u=new X({definition:o}),l=new X({definition:s});return zp([u,l],n)}function os(e,t){e:for(let r=0;r<e.length;r++){let n=e[r];if(n.length===t.length){for(let i=0;i<n.length;i++){let o=t[i],a=n[i];if((o===a||a.categoryMatchesMap[o.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Vp(e,t){return e.length<t.length&&Ce(e,(r,n)=>{let i=t[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]})}function Yp(e){return Ce(e,t=>Ce(t,r=>Ce(r,n=>k(n.categoryMatches))))}function Xp(e){let t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return S(t,r=>Object.assign({type:Ae.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Qp(e,t,r,n){let i=Pe(e,u=>lP(u,r)),o=mP(e,t,r),a=Pe(e,u=>hP(u,r)),s=Pe(e,u=>fP(u,e,n,r));return i.concat(o,a,s)}function lP(e,t){let r=new Tu;e.accept(r);let n=r.allProductions,i=eu(n,cP),o=Ge(i,s=>s.length>1);return S(K(o),s=>{let u=Oe(s),l=t.buildDuplicateFoundError(e,s),c=je(u),f={message:l,type:Ae.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:c,occurrence:u.idx},h=Zp(u);return h&&(f.parameter=h),f})}function cP(e){return`${je(e)}_#_${e.idx}_#_${Zp(e)}`}function Zp(e){return e instanceof P?e.terminalType.name:e instanceof Y?e.nonTerminalName:""}var Tu=class extends qe{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}};function fP(e,t,r,n){let i=[];if(xe(t,(a,s)=>s.name===e.name?a+1:a,0)>1){let a=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});i.push({message:a,type:Ae.DUPLICATE_RULE_NAME,ruleName:e.name})}return i}function Jp(e,t,r){let n=[],i;return ne(t,e)||(i=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:Ae.INVALID_RULE_OVERRIDE,ruleName:e})),n}function Au(e,t,r,n=[]){let i=[],o=ss(t.definition);if(k(o))return[];{let a=e.name;ne(o,e)&&i.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:Ae.LEFT_RECURSION,ruleName:a});let u=ur(o,n.concat([e])),l=Pe(u,c=>{let f=V(n);return f.push(c),Au(e,c,r,f)});return i.concat(l)}}function ss(e){let t=[];if(k(e))return t;let r=Oe(e);if(r instanceof Y)t.push(r.referencedRule);else if(r instanceof X||r instanceof ee||r instanceof he||r instanceof de||r instanceof ue||r instanceof F)t=t.concat(ss(r.definition));else if(r instanceof le)t=Te(S(r.definition,o=>ss(o.definition)));else if(!(r instanceof P))throw Error("non exhaustive match");let n=Lr(r),i=e.length>1;if(n&&i){let o=fe(e);return t.concat(ss(o))}else return t}var pi=class extends qe{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}};function em(e,t){let r=new pi;e.accept(r);let n=r.alternations;return Pe(n,o=>{let a=Ut(o.definition);return Pe(a,(s,u)=>{let l=rs([s],[],Dt,1);return k(l)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:o,emptyChoiceIdx:u}),type:Ae.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:o.idx,alternative:u+1}]:[]})})}function tm(e,t,r){let n=new pi;e.accept(n);let i=n.alternations;return i=lr(i,a=>a.ignoreAmbiguities===!0),Pe(i,a=>{let s=a.idx,u=a.maxLookahead||t,l=hi(s,e,u,a),c=dP(l,a,e,r),f=pP(l,a,e,r);return c.concat(f)})}var yu=class extends qe{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}};function hP(e,t){let r=new pi;e.accept(r);let n=r.alternations;return Pe(n,o=>o.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:o}),type:Ae.TOO_MANY_ALTS,ruleName:e.name,occurrence:o.idx}]:[])}function rm(e,t,r){let n=[];return v(e,i=>{let o=new yu;i.accept(o);let a=o.allProductions;v(a,s=>{let u=is(s),l=s.maxLookahead||t,c=s.idx,h=di(c,i,u,l)[0];if(k(Te(h))){let p=r.buildEmptyRepetitionError({topLevelRule:i,repetition:s});n.push({message:p,type:Ae.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),n}function dP(e,t,r,n){let i=[],o=xe(e,(s,u,l)=>(t.definition[l].ignoreAmbiguities===!0||v(u,c=>{let f=[l];v(e,(h,p)=>{l!==p&&os(h,c)&&t.definition[p].ignoreAmbiguities!==!0&&f.push(p)}),f.length>1&&!os(i,c)&&(i.push(c),s.push({alts:f,path:c}))}),s),[]);return S(o,s=>{let u=S(s.alts,c=>c+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:u,prefixPath:s.path}),type:Ae.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:s.alts}})}function pP(e,t,r,n){let i=xe(e,(a,s,u)=>{let l=S(s,c=>({idx:u,path:c}));return a.concat(l)},[]);return Ot(Pe(i,a=>{if(t.definition[a.idx].ignoreAmbiguities===!0)return[];let u=a.idx,l=a.path,c=Re(i,h=>t.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<u&&Vp(h.path,l));return S(c,h=>{let p=[h.idx+1,u+1],m=t.idx===0?"":t.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:p,prefixPath:h.path}),type:Ae.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:m,alternatives:p}})}))}function mP(e,t,r){let n=[],i=S(t,o=>o.name);return v(e,o=>{let a=o.name;if(ne(i,a)){let s=r.buildNamespaceConflictError(o);n.push({message:s,type:Ae.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),n}function nm(e){let t=pn(e,{errMsgProvider:Bp}),r={};return v(e.rules,n=>{r[n.name]=n}),$p(r,t.errMsgProvider)}function im(e){return e=pn(e,{errMsgProvider:ht}),Qp(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}var om="MismatchedTokenException",sm="NoViableAltException",am="EarlyExitException",um="NotAllInputParsedException",lm=[om,sm,am,um];Object.freeze(lm);function fr(e){return ne(lm,e.name)}var vn=class extends Error{constructor(t,r){super(t),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},wr=class extends vn{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=om}},mi=class extends vn{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=sm}},gi=class extends vn{constructor(t,r){super(t,r),this.name=um}},Ei=class extends vn{constructor(t,r,n){super(t,r),this.previousToken=n,this.name=am}};var Su={},vu="InRuleRecoveryException",Ou=class extends Error{constructor(t){super(t),this.name=vu}},as=class{initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=b(t,"recoveryEnabled")?t.recoveryEnabled:Fe.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=gP)}getTokenToInsert(t){let r=_r(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,r,n,i){let o=this.findReSyncTokenType(),a=this.exportLexerState(),s=[],u=!1,l=this.LA(1),c=this.LA(1),f=()=>{let h=this.LA(0),p=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:h,ruleName:this.getCurrRuleFullName()}),m=new wr(p,l,this.LA(0));m.resyncedTokens=Ut(s),this.SAVE_ERROR(m)};for(;!u;)if(this.tokenMatcher(c,i)){f();return}else if(n.call(this)){f(),t.apply(this,r);return}else this.tokenMatcher(c,o)?u=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,s));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(t,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,r)))}getFollowsForInRuleRecovery(t,r){let n=this.getCurrentGrammarPath(t,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(t,r){if(this.canRecoverWithSingleTokenInsertion(t,r))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){let n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new Ou("sad sad panda")}canPerformInRuleRecovery(t,r){return this.canRecoverWithSingleTokenInsertion(t,r)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,r){if(!this.canTokenTypeBeInsertedInRecovery(t)||k(r))return!1;let n=this.LA(1);return bt(r,o=>this.tokenMatcher(n,o))!==void 0}canRecoverWithSingleTokenDeletion(t){return this.canTokenTypeBeDeletedInRecovery(t)?this.tokenMatcher(this.LA(2),t):!1}isInCurrentRuleReSyncSet(t){let r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return ne(n,t)}findReSyncTokenType(){let t=this.flattenFollowSet(),r=this.LA(1),n=2;for(;;){let i=bt(t,o=>pu(r,o));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Su;let t=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){let t=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return S(t,(n,i)=>i===0?Su:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(t[i-1])})}flattenFollowSet(){let t=S(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return Te(t)}getFollowSetFromFollowKey(t){if(t===Su)return[De];let r=t.ruleName+t.idxInCallingRule+Go+t.inRule;return this.resyncFollows[r]}addToResyncTokens(t,r){return this.tokenMatcher(t,De)||r.push(t),r}reSyncTo(t){let r=[],n=this.LA(1);for(;this.tokenMatcher(n,t)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return Ut(r)}attemptInRepetitionRecovery(t,r,n,i,o,a,s){}getCurrentGrammarPath(t,r){let n=this.getHumanReadableRuleStack(),i=V(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:i,lastTok:t,lastTokOccurrence:r}}getHumanReadableRuleStack(){return S(this.RULE_STACK,t=>this.shortRuleNameToFullName(t))}};function gP(e,t,r,n,i,o,a){let s=this.getKeyForAutomaticLookahead(n,i),u=this.firstAfterRepMap[s];if(u===void 0){let h=this.getCurrRuleFullName(),p=this.getGAstProductions()[h];u=new o(p,i).startWalking(),this.firstAfterRepMap[s]=u}let l=u.token,c=u.occurrence,f=u.isEndOfRule;this.RULE_STACK.length===1&&f&&l===void 0&&(l=De,c=1),!(l===void 0||c===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,c,a)&&this.tryInRepetitionRecovery(e,t,r,l)}function us(e,t,r){return r|t|e}var xi=class{constructor(t){var r;this.maxLookahead=(r=t?.maxLookahead)!==null&&r!==void 0?r:Fe.maxLookahead}validate(t){let r=this.validateNoLeftRecursion(t.rules);if(k(r)){let n=this.validateEmptyOrAlternatives(t.rules),i=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),o=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...r,...n,...i,...o]}return r}validateNoLeftRecursion(t){return Pe(t,r=>Au(r,r,ht))}validateEmptyOrAlternatives(t){return Pe(t,r=>em(r,ht))}validateAmbiguousAlternationAlternatives(t,r){return Pe(t,n=>tm(n,r,ht))}validateSomeNonEmptyLookaheadPath(t,r){return rm(t,r,ht)}buildLookaheadForAlternation(t){return Gp(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,Wp)}buildLookaheadForOptional(t){return jp(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,is(t.prodType),Hp)}};var cs=class{initLooksAhead(t){this.dynamicTokensEnabled=b(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:Fe.dynamicTokensEnabled,this.maxLookahead=b(t,"maxLookahead")?t.maxLookahead:Fe.maxLookahead,this.lookaheadStrategy=b(t,"lookaheadStrategy")?t.lookaheadStrategy:new xi({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){v(t,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{let{alternation:n,repetition:i,option:o,repetitionMandatory:a,repetitionMandatoryWithSeparator:s,repetitionWithSeparator:u}=EP(r);v(n,l=>{let c=l.idx===0?"":l.idx;this.TRACE_INIT(`${je(l)}${c}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:r,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=us(this.fullRuleNameToShort[r.name],256,l.idx);this.setLaFuncCache(h,f)})}),v(i,l=>{this.computeLookaheadFunc(r,l.idx,768,"Repetition",l.maxLookahead,je(l))}),v(o,l=>{this.computeLookaheadFunc(r,l.idx,512,"Option",l.maxLookahead,je(l))}),v(a,l=>{this.computeLookaheadFunc(r,l.idx,1024,"RepetitionMandatory",l.maxLookahead,je(l))}),v(s,l=>{this.computeLookaheadFunc(r,l.idx,1536,"RepetitionMandatoryWithSeparator",l.maxLookahead,je(l))}),v(u,l=>{this.computeLookaheadFunc(r,l.idx,1280,"RepetitionWithSeparator",l.maxLookahead,je(l))})})})}computeLookaheadFunc(t,r,n,i,o,a){this.TRACE_INIT(`${a}${r===0?"":r}`,()=>{let s=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:t,maxLookahead:o||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),u=us(this.fullRuleNameToShort[t.name],n,r);this.setLaFuncCache(u,s)})}getKeyForAutomaticLookahead(t,r){let n=this.getLastExplicitRuleShortName();return us(n,t,r)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,r){this.lookAheadFuncsCache.set(t,r)}},bu=class extends qe{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}},ls=new bu;function EP(e){ls.reset(),e.accept(ls);let t=ls.dslMethods;return ls.reset(),t}function Iu(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function Cu(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function cm(e,t,r){e.children[r]===void 0?e.children[r]=[t]:e.children[r].push(t)}function fm(e,t,r){e.children[t]===void 0?e.children[t]=[r]:e.children[t].push(r)}var xP="name";function Ru(e,t){Object.defineProperty(e,xP,{enumerable:!1,configurable:!0,writable:!1,value:t})}function TP(e,t){let r=H(e),n=r.length;for(let i=0;i<n;i++){let o=r[i],a=e[o],s=a.length;for(let u=0;u<s;u++){let l=a[u];l.tokenTypeIdx===void 0&&this[l.name](l.children,t)}}}function hm(e,t){let r=function(){};Ru(r,e+"BaseSemantics");let n={visit:function(i,o){if(L(i)&&(i=i[0]),!_e(i))return this[i.name](i.children,o)},validateVisitor:function(){let i=yP(this,t);if(!k(i)){let o=S(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${o.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=t,r}function dm(e,t,r){let n=function(){};Ru(n,e+"BaseSemanticsWithDefaults");let i=Object.create(r.prototype);return v(t,o=>{i[o]=TP}),n.prototype=i,n.prototype.constructor=n,n}var _u;(function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"})(_u||(_u={}));function yP(e,t){return AP(e,t)}function AP(e,t){let r=Re(t,i=>Me(e[i])===!1),n=S(r,i=>({msg:`Missing visitor method: <${i}> on ${e.constructor.name} CST Visitor.`,type:_u.MISSING_METHOD,methodName:i}));return Ot(n)}var ps=class{initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=b(t,"nodeLocationTracking")?t.nodeLocationTracking:Fe.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=se,this.cstFinallyStateUpdate=se,this.cstPostTerminal=se,this.cstPostNonTerminal=se,this.cstPostRule=se;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Cu,this.setNodeLocationFromNode=Cu,this.cstPostRule=se,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=se,this.setNodeLocationFromNode=se,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Iu,this.setNodeLocationFromNode=Iu,this.cstPostRule=se,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=se,this.setNodeLocationFromNode=se,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=se,this.setNodeLocationFromNode=se,this.cstPostRule=se,this.setInitialNodeLocation=se;else throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){let r=this.LA(1);t.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){let r={name:t,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){let r=this.LA(0),n=t.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(t){let r=this.LA(0),n=t.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(t,r){let n=this.CST_STACK[this.CST_STACK.length-1];cm(n,r,t),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(t,r){let n=this.CST_STACK[this.CST_STACK.length-1];fm(n,r,t),this.setNodeLocationFromNode(n.location,t.location)}getBaseCstVisitorConstructor(){if(_e(this.baseCstVisitorConstructor)){let t=hm(this.className,H(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(_e(this.baseCstVisitorWithDefaultsConstructor)){let t=dm(this.className,H(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){let t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}};var ms=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):bn}LA(t){let r=this.currIdx+t;return r<0||this.tokVectorLength<=r?bn:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var gs=class{ACTION(t){return t.call(this)}consume(t,r,n){return this.consumeInternal(r,t,n)}subrule(t,r,n){return this.subruleInternal(r,t,n)}option(t,r){return this.optionInternal(r,t)}or(t,r){return this.orInternal(r,t)}many(t,r){return this.manyInternal(t,r)}atLeastOne(t,r){return this.atLeastOneInternal(t,r)}CONSUME(t,r){return this.consumeInternal(t,0,r)}CONSUME1(t,r){return this.consumeInternal(t,1,r)}CONSUME2(t,r){return this.consumeInternal(t,2,r)}CONSUME3(t,r){return this.consumeInternal(t,3,r)}CONSUME4(t,r){return this.consumeInternal(t,4,r)}CONSUME5(t,r){return this.consumeInternal(t,5,r)}CONSUME6(t,r){return this.consumeInternal(t,6,r)}CONSUME7(t,r){return this.consumeInternal(t,7,r)}CONSUME8(t,r){return this.consumeInternal(t,8,r)}CONSUME9(t,r){return this.consumeInternal(t,9,r)}SUBRULE(t,r){return this.subruleInternal(t,0,r)}SUBRULE1(t,r){return this.subruleInternal(t,1,r)}SUBRULE2(t,r){return this.subruleInternal(t,2,r)}SUBRULE3(t,r){return this.subruleInternal(t,3,r)}SUBRULE4(t,r){return this.subruleInternal(t,4,r)}SUBRULE5(t,r){return this.subruleInternal(t,5,r)}SUBRULE6(t,r){return this.subruleInternal(t,6,r)}SUBRULE7(t,r){return this.subruleInternal(t,7,r)}SUBRULE8(t,r){return this.subruleInternal(t,8,r)}SUBRULE9(t,r){return this.subruleInternal(t,9,r)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,r,n=Ln){if(ne(this.definedRulesNames,t)){let a={message:ht.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:Ae.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(a)}this.definedRulesNames.push(t);let i=this.defineRule(t,r,n);return this[t]=i,i}OVERRIDE_RULE(t,r,n=Ln){let i=Jp(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let o=this.defineRule(t,r,n);return this[t]=o,o}BACKTRACK(t,r){return function(){this.isBackTrackingStack.push(1);let n=this.saveRecogState();try{return t.apply(this,r),!0}catch(i){if(fr(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Ko(K(this.gastProductionsCache))}};var Es=class{initRecognizerEngine(t,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Sn,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},b(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(L(t)){if(k(t))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof t[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(L(t))this.tokensMap=xe(t,(o,a)=>(o[a.name]=a,o),{});else if(b(t,"modes")&&Ce(Te(K(t.modes)),_p)){let o=Te(K(t.modes)),a=mn(o);this.tokensMap=xe(a,(s,u)=>(s[u.name]=u,s),{})}else if(oe(t))this.tokensMap=V(t);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=De;let n=b(t,"modes")?Te(K(t.modes)):K(t),i=Ce(n,o=>k(o.categoryMatches));this.tokenMatcher=i?Sn:Dt,Ft(K(this.tokensMap))}defineRule(t,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i=b(n,"resyncEnabled")?n.resyncEnabled:Ln.resyncEnabled,o=b(n,"recoveryValueFunc")?n.recoveryValueFunc:Ln.recoveryValueFunc,a=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=t,this.fullRuleNameToShort[t]=a;let s;return this.outputCst===!0?s=function(...c){try{this.ruleInvocationStateUpdate(a,t,this.subruleIdx),r.apply(this,c);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}}:s=function(...c){try{return this.ruleInvocationStateUpdate(a,t,this.subruleIdx),r.apply(this,c)}catch(f){return this.invokeRuleCatch(f,i,o)}finally{this.ruleFinallyStateUpdate()}},Object.assign(s,{ruleName:t,originalGrammarAction:r})}invokeRuleCatch(t,r,n){let i=this.RULE_STACK.length===1,o=r&&!this.isBackTracking()&&this.recoveryEnabled;if(fr(t)){let a=t;if(o){let s=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(s))if(a.resyncedTokens=this.reSyncTo(s),this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];return u.recoveredNode=!0,u}else return n(t);else{if(this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];u.recoveredNode=!0,a.partialCstResult=u}throw a}}else{if(i)return this.moveToTerminatedState(),n(t);throw a}}else throw t}optionInternal(t,r){let n=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(t,r,n)}optionInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof t!="function"){o=t.DEF;let a=t.GATE;if(a!==void 0){let s=i;i=()=>a.call(this)&&s.call(this)}}else o=t;if(i.call(this)===!0)return o.call(this)}atLeastOneInternal(t,r){let n=this.getKeyForAutomaticLookahead(1024,t);return this.atLeastOneInternalLogic(t,r,n)}atLeastOneInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof r!="function"){o=r.DEF;let a=r.GATE;if(a!==void 0){let s=i;i=()=>a.call(this)&&s.call(this)}}else o=r;if(i.call(this)===!0){let a=this.doSingleRepetition(o);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(o)}else throw this.raiseEarlyExitException(t,ae.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,r],i,1024,t,es)}atLeastOneSepFirstInternal(t,r){let n=this.getKeyForAutomaticLookahead(1536,t);this.atLeastOneSepFirstInternalLogic(t,r,n)}atLeastOneSepFirstInternalLogic(t,r,n){let i=r.DEF,o=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let s=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,s,i,fi],s,1536,t,fi)}else throw this.raiseEarlyExitException(t,ae.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(t,r){let n=this.getKeyForAutomaticLookahead(768,t);return this.manyInternalLogic(t,r,n)}manyInternalLogic(t,r,n){let i=this.getLaFuncFromCache(n),o;if(typeof r!="function"){o=r.DEF;let s=r.GATE;if(s!==void 0){let u=i;i=()=>s.call(this)&&u.call(this)}}else o=r;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[t,r],i,768,t,Jo,a)}manySepFirstInternal(t,r){let n=this.getKeyForAutomaticLookahead(1280,t);this.manySepFirstInternalLogic(t,r,n)}manySepFirstInternalLogic(t,r,n){let i=r.DEF,o=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);let s=()=>this.tokenMatcher(this.LA(1),o);for(;this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,s,i,ci],s,1280,t,ci)}}repetitionSepSecondInternal(t,r,n,i,o){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,r,n,i,o],n,1536,t,o)}doSingleRepetition(t){let r=this.getLexerPosition();return t.call(this),this.getLexerPosition()>r}orInternal(t,r){let n=this.getKeyForAutomaticLookahead(256,r),i=L(t)?t:t.DEF,a=this.getLaFuncFromCache(n).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(r,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let t=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new gi(r,t))}}subruleInternal(t,r,n){let i;try{let o=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=t.apply(this,o),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:t.ruleName),i}catch(o){throw this.subruleInternalError(o,n,t.ruleName)}}subruleInternalError(t,r,n){throw fr(t)&&t.partialCstResult!==void 0&&(this.cstPostNonTerminal(t.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete t.partialCstResult),t}consumeInternal(t,r,n){let i;try{let o=this.LA(1);this.tokenMatcher(o,t)===!0?(this.consumeToken(),i=o):this.consumeInternalError(t,o,n)}catch(o){i=this.consumeInternalRecovery(t,r,o)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:t.name,i),i}consumeInternalError(t,r,n){let i,o=this.LA(0);throw n!==void 0&&n.ERR_MSG?i=n.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:r,previous:o,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new wr(i,r,o))}consumeInternalRecovery(t,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){let i=this.getFollowsForInRuleRecovery(t,r);try{return this.tryInRuleRecovery(t,i)}catch(o){throw o.name===vu?n:o}}else throw n}saveRecogState(){let t=this.errors,r=V(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),De)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var xs=class{initErrorHandler(t){this._errors=[],this.errorMessageProvider=b(t,"errorMessageProvider")?t.errorMessageProvider:Fe.errorMessageProvider}SAVE_ERROR(t){if(fr(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:V(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return V(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,r,n){let i=this.getCurrRuleFullName(),o=this.getGAstProductions()[i],s=di(t,o,r,this.maxLookahead)[0],u=[];for(let c=1;c<=this.maxLookahead;c++)u.push(this.LA(c));let l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:s,actual:u,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new Ei(l,this.LA(1),this.LA(0)))}raiseNoAltException(t,r){let n=this.getCurrRuleFullName(),i=this.getGAstProductions()[n],o=hi(t,i,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));let s=this.LA(0),u=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:a,previous:s,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new mi(u,this.LA(1),s))}};var Ts=class{initContentAssist(){}computeContentAssist(t,r){let n=this.gastProductionsCache[t];if(_e(n))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return rs([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){let r=Oe(t.ruleStack),i=this.getGAstProductions()[r];return new Zo(i,t).startWalking()}};var Ss={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Ss);var pm=!0,mm=Math.pow(2,8)-1,Em=T({name:"RECORDING_PHASE_TOKEN",pattern:B.NA});Ft([Em]);var xm=_r(Em,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(xm);var OP={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},ys=class{initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let t=0;t<10;t++){let r=t>0?t:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,t,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,t,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,t)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,t)},this[`MANY${r}`]=function(n){this.manyInternalRecord(t,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(t,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(t,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(t,n)}}this.consume=function(t,r,n){return this.consumeInternalRecord(r,t,n)},this.subrule=function(t,r,n){return this.subruleInternalRecord(r,t,n)},this.option=function(t,r){return this.optionInternalRecord(r,t)},this.or=function(t,r){return this.orInternalRecord(r,t)},this.many=function(t,r){this.manyInternalRecord(t,r)},this.atLeastOne=function(t,r){this.atLeastOneInternalRecord(t,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let t=this;for(let r=0;r<10;r++){let n=r>0?r:"";delete t[`CONSUME${n}`],delete t[`SUBRULE${n}`],delete t[`OPTION${n}`],delete t[`OR${n}`],delete t[`MANY${n}`],delete t[`MANY_SEP${n}`],delete t[`AT_LEAST_ONE${n}`],delete t[`AT_LEAST_ONE_SEP${n}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA})}ACTION_RECORD(t){}BACKTRACK_RECORD(t,r){return()=>!0}LA_RECORD(t){return bn}topLevelRuleRecord(t,r){try{let n=new Ue({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(t,r){return yi.call(this,ee,t,r)}atLeastOneInternalRecord(t,r){yi.call(this,he,r,t)}atLeastOneSepFirstInternalRecord(t,r){yi.call(this,de,r,t,pm)}manyInternalRecord(t,r){yi.call(this,F,r,t)}manySepFirstInternalRecord(t,r){yi.call(this,ue,r,t,pm)}orInternalRecord(t,r){return vP.call(this,t,r)}subruleInternalRecord(t,r,n){if(As(r),!t||b(t,"ruleName")===!1){let s=new Error(`<SUBRULE${gm(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let i=vt(this.recordingProdStack),o=t.ruleName,a=new Y({idx:r,nonTerminalName:o,label:n?.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?OP:Ss}consumeInternalRecord(t,r,n){if(As(r),!fu(t)){let a=new Error(`<CONSUME${gm(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let i=vt(this.recordingProdStack),o=new P({idx:r,terminalType:t,label:n?.LABEL});return i.definition.push(o),xm}};function yi(e,t,r,n=!1){As(r);let i=vt(this.recordingProdStack),o=Me(t)?t:t.DEF,a=new e({definition:[],idx:r});return n&&(a.separator=t.SEP),b(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(a),o.call(this),i.definition.push(a),this.recordingProdStack.pop(),Ss}function vP(e,t){As(t);let r=vt(this.recordingProdStack),n=L(e)===!1,i=n===!1?e:e.DEF,o=new le({definition:[],idx:t,ignoreAmbiguities:n&&e.IGNORE_AMBIGUITIES===!0});b(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD);let a=ei(i,s=>Me(s.GATE));return o.hasPredicates=a,r.definition.push(o),v(i,s=>{let u=new X({definition:[]});o.definition.push(u),b(s,"IGNORE_AMBIGUITIES")?u.ignoreAmbiguities=s.IGNORE_AMBIGUITIES:b(s,"GATE")&&(u.ignoreAmbiguities=!0),this.recordingProdStack.push(u),s.ALT.call(this),this.recordingProdStack.pop()}),Ss}function gm(e){return e===0?"":`${e}`}function As(e){if(e<0||e>mm){let t=new Error(`Invalid DSL Method idx value: <${e}>
	Idx value must be a none negative value smaller than ${mm+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}var Os=class{initPerformanceTracer(t){if(b(t,"traceInitPerf")){let r=t.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=Fe.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,r){if(this.traceInitPerf===!0){this.traceInitIndent++;let n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${t}>`);let{time:i,value:o}=ri(r),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${n}<-- <${t}> time: ${i}ms`),this.traceInitIndent--,o}else return r()}};function Tm(e,t){t.forEach(r=>{let n=r.prototype;Object.getOwnPropertyNames(n).forEach(i=>{if(i==="constructor")return;let o=Object.getOwnPropertyDescriptor(n,i);o&&(o.get||o.set)?Object.defineProperty(e.prototype,i,o):e.prototype[i]=r.prototype[i]})})}var bn=_r(De,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(bn);var Fe=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Qo,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Ln=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),Ae;(function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Ae||(Ae={}));var Ai=class e{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let t;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{ni(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),v(this.definedRulesNames,i=>{let a=this[i].originalGrammarAction,s;this.TRACE_INIT(`${i} Rule`,()=>{s=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=s})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=nm({rules:K(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(k(n)&&this.skipValidations===!1){let i=im({rules:K(this.gastProductionsCache),tokenTypes:K(this.tokensMap),errMsgProvider:ht,grammarName:r}),o=Xp({lookaheadStrategy:this.lookaheadStrategy,rules:K(this.gastProductionsCache),tokenTypes:K(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(i,o)}}),k(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let i=fp(K(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,o;(o=(i=this.lookaheadStrategy).initialize)===null||o===void 0||o.call(i,{rules:K(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(K(this.gastProductionsCache))})),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!k(this.definitionErrors))throw t=S(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${t.join(`
-------------------------------
`)}`)})}constructor(t,r){this.definitionErrors=[],this.selfAnalysisDone=!1;let n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(t,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),b(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=b(r,"skipValidations")?r.skipValidations:Fe.skipValidations}};Ai.DEFER_DEFINITION_ERRORS_HANDLING=!1;Tm(Ai,[as,cs,ps,ms,Es,gs,xs,Ts,ys,Os]);var Bt=class extends Ai{constructor(t,r=Fe){let n=V(r);n.outputCst=!0,super(t,n)}};var Q=T({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z0-9_-]*/}),dt=T({name:"NumberLiteral",pattern:/[0-9]+/}),ku=T({name:"FlowchartKeyword",pattern:/flowchart/,longer_alt:Q}),Mu=T({name:"GraphKeyword",pattern:/graph/,longer_alt:Q}),vs=T({name:"Direction",pattern:/TD|TB|BT|RL|LR/,longer_alt:Q}),Pu=T({name:"SubgraphKeyword",pattern:/subgraph/,longer_alt:Q}),Uu=T({name:"EndKeyword",pattern:/end/,longer_alt:Q}),qu=T({name:"ClassKeyword",pattern:/class/,longer_alt:Q}),Du=T({name:"StyleKeyword",pattern:/style/,longer_alt:Q}),Fu=T({name:"ClassDefKeyword",pattern:/classDef/,longer_alt:Q}),bs=T({name:"Ampersand",pattern:/&/}),Nn=T({name:"Comma",pattern:/,/}),Ls=T({name:"Semicolon",pattern:/;/}),Si=T({name:"Colon",pattern:/:/}),Ns=T({name:"TripleColon",pattern:/:::/}),Bu=T({name:"BiDirectionalArrow",pattern:/<-->/}),$u=T({name:"CircleEndLine",pattern:/o--o|o---o|o----o/}),Ku=T({name:"CrossEndLine",pattern:/x--x|x---x|x----x/}),Is=T({name:"DottedArrowRight",pattern:/-\.->|-\.\.->|-\.\.\.->/}),Gu=T({name:"DottedArrowLeft",pattern:/<-\.-|<-\.\.-|<-\.\.\.-/}),Cs=T({name:"ThickArrowRight",pattern:/==>|===>|====>/}),ju=T({name:"ThickArrowLeft",pattern:/<==|<===|<====/}),Rs=T({name:"ArrowRight",pattern:/-->|--->|---->/}),Wu=T({name:"ArrowLeft",pattern:/<--|<---|<----/}),Oi=T({name:"DottedLine",pattern:/-\.-|-\.\.-|-\.\.\.-/}),vi=T({name:"ThickLine",pattern:/===|====|=====/}),_s=T({name:"Line",pattern:/---|----/}),ws=T({name:"TwoDashes",pattern:/--/}),bi=T({name:"InvalidArrow",pattern:/->(?!>)/}),Hu=T({name:"DoubleSquareOpen",pattern:/\[\[/}),zu=T({name:"DoubleSquareClose",pattern:/\]\]/}),Vu=T({name:"DoubleRoundOpen",pattern:/\(\(/}),Yu=T({name:"DoubleRoundClose",pattern:/\)\)/}),Xu=T({name:"HexagonOpen",pattern:/\{\{/}),Qu=T({name:"HexagonClose",pattern:/\}\}/}),Zu=T({name:"StadiumOpen",pattern:/\(\[/}),Ju=T({name:"StadiumClose",pattern:/\]\)/}),el=T({name:"CylinderOpen",pattern:/\[\(/}),tl=T({name:"CylinderClose",pattern:/\)\]/}),Li=T({name:"SquareOpen",pattern:/\[/}),Ni=T({name:"SquareClose",pattern:/\]/}),ks=T({name:"RoundOpen",pattern:/\(/}),Ms=T({name:"RoundClose",pattern:/\)/}),rl=T({name:"DiamondOpen",pattern:/\{/}),nl=T({name:"DiamondClose",pattern:/\}/}),il=T({name:"AngleOpen",pattern:/>/}),Ii=T({name:"Pipe",pattern:/\|/}),Ps=T({name:"QuotedString",pattern:/"[^"]*"|'[^']*'/}),ol=T({name:"MultilineText",pattern:/"""[\s\S]*?"""/,line_breaks:!0}),LP=T({name:"Comment",pattern:/%%[^\n\r]*/,group:B.SKIPPED}),Us=T({name:"ColorValue",pattern:/#[0-9a-fA-F]{3,6}/}),hr=T({name:"Text",pattern:/[^[\](){}|<>\n\r\t &,;:]+/}),NP=T({name:"WhiteSpace",pattern:/[ \t]+/,group:B.SKIPPED}),ot=T({name:"Newline",pattern:/[\n\r]+/,line_breaks:!0}),sl=[LP,ol,Ps,ku,Mu,Pu,Uu,Fu,qu,Du,vs,Hu,zu,Vu,Yu,Xu,Qu,Zu,Ju,el,tl,Bu,$u,Ku,Is,Gu,Cs,ju,Rs,Wu,Oi,vi,_s,ws,bi,Li,Ni,ks,Ms,rl,nl,il,Ii,Ns,bs,Nn,Ls,Si,Us,dt,Q,hr,NP,ot],IP=new B(sl);function qs(e){return IP.tokenize(e)}var al=class extends Bt{constructor(){super(sl),this.diagram=this.RULE("diagram",()=>{this.OR([{ALT:()=>this.CONSUME(ku)},{ALT:()=>this.CONSUME(Mu)}]),this.CONSUME(vs),this.OPTION(()=>{this.CONSUME(ot)}),this.MANY(()=>{this.SUBRULE(this.statement)})}),this.statement=this.RULE("statement",()=>{this.OR([{ALT:()=>this.SUBRULE(this.nodeStatement)},{ALT:()=>this.SUBRULE(this.subgraph)},{ALT:()=>this.SUBRULE(this.classStatement)},{ALT:()=>this.SUBRULE(this.styleStatement)},{ALT:()=>this.SUBRULE(this.classDefStatement)},{ALT:()=>this.CONSUME(ot)}])}),this.nodeStatement=this.RULE("nodeStatement",()=>{this.SUBRULE(this.nodeOrParallelGroup),this.OPTION(()=>{this.SUBRULE(this.link),this.SUBRULE2(this.nodeOrParallelGroup),this.MANY(()=>{this.SUBRULE2(this.link),this.SUBRULE3(this.nodeOrParallelGroup)})}),this.OPTION2(()=>this.CONSUME(Ls)),this.OR2([{ALT:()=>this.CONSUME(ot)},{ALT:()=>this.CONSUME(De)}])}),this.nodeOrParallelGroup=this.RULE("nodeOrParallelGroup",()=>{this.SUBRULE(this.node),this.MANY(()=>{this.CONSUME(bs),this.SUBRULE2(this.node)})}),this.node=this.RULE("node",()=>{this.OR([{ALT:()=>{this.CONSUME(Q,{LABEL:"nodeId"}),this.OPTION(()=>{this.CONSUME(dt,{LABEL:"nodeIdSuffix"})})}},{ALT:()=>{this.CONSUME2(dt,{LABEL:"nodeIdNum"})}}]),this.OPTION2(()=>{this.SUBRULE(this.nodeShape)}),this.OPTION3(()=>{this.CONSUME(Ns),this.CONSUME3(Q,{LABEL:"nodeClass"})})}),this.nodeShape=this.RULE("nodeShape",()=>{this.OR([{ALT:()=>{this.CONSUME(Li),this.OPTION(()=>this.SUBRULE(this.nodeContent)),this.CONSUME(Ni)}},{ALT:()=>{this.CONSUME(Hu),this.OPTION2(()=>this.SUBRULE2(this.nodeContent)),this.CONSUME(zu)}},{ALT:()=>{this.CONSUME(ks),this.OPTION3(()=>this.SUBRULE3(this.nodeContent)),this.CONSUME(Ms)}},{ALT:()=>{this.CONSUME(Vu),this.OPTION4(()=>this.SUBRULE4(this.nodeContent)),this.CONSUME(Yu)}},{ALT:()=>{this.CONSUME(rl),this.OPTION5(()=>this.SUBRULE5(this.nodeContent)),this.CONSUME(nl)}},{ALT:()=>{this.CONSUME(Xu),this.OPTION6(()=>this.SUBRULE6(this.nodeContent)),this.CONSUME(Qu)}},{ALT:()=>{this.CONSUME(Zu),this.OPTION7(()=>this.SUBRULE7(this.nodeContent)),this.CONSUME(Ju)}},{ALT:()=>{this.CONSUME(el),this.OPTION8(()=>this.SUBRULE8(this.nodeContent)),this.CONSUME(tl)}}])}),this.nodeContent=this.RULE("nodeContent",()=>{this.OR([{ALT:()=>this.CONSUME(Ps)},{ALT:()=>this.CONSUME(ol)},{ALT:()=>{this.AT_LEAST_ONE(()=>{this.OR2([{ALT:()=>this.CONSUME(Q)},{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME(dt)},{ALT:()=>this.CONSUME(ks)},{ALT:()=>this.CONSUME(Ms)},{ALT:()=>this.CONSUME(Nn)},{ALT:()=>this.CONSUME(Si)},{ALT:()=>this.CONSUME(bs)},{ALT:()=>this.CONSUME(Ls)},{ALT:()=>this.CONSUME(ws)},{ALT:()=>this.CONSUME(_s)},{ALT:()=>this.CONSUME(vi)},{ALT:()=>this.CONSUME(Oi)}])})}}])}),this.link=this.RULE("link",()=>{this.OR([{ALT:()=>{this.OR2([{ALT:()=>this.CONSUME(Oi)},{ALT:()=>this.CONSUME(vi)},{ALT:()=>this.CONSUME(ws)}]),this.SUBRULE(this.linkTextInline),this.OR3([{ALT:()=>this.CONSUME(Rs)},{ALT:()=>this.CONSUME(Is)},{ALT:()=>this.CONSUME(Cs)}])}},{ALT:()=>{this.CONSUME(hr,{LABEL:"inlineCarrier"}),this.CONSUME(il)}},{ALT:()=>this.CONSUME2(Bu)},{ALT:()=>this.CONSUME2($u)},{ALT:()=>this.CONSUME2(Ku)},{ALT:()=>this.CONSUME2(Rs)},{ALT:()=>this.CONSUME2(Wu)},{ALT:()=>this.CONSUME2(Is)},{ALT:()=>this.CONSUME2(Gu)},{ALT:()=>this.CONSUME2(Cs)},{ALT:()=>this.CONSUME2(ju)},{ALT:()=>this.CONSUME2(_s)},{ALT:()=>this.CONSUME2(Oi)},{ALT:()=>this.CONSUME2(vi)},{ALT:()=>this.CONSUME(bi)}]),this.OPTION(()=>{this.CONSUME(Ii),this.SUBRULE(this.linkText),this.CONSUME2(Ii)})}),this.linkText=this.RULE("linkText",()=>{this.AT_LEAST_ONE(()=>{this.OR([{ALT:()=>this.CONSUME(Q)},{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME(dt)}])})}),this.linkTextInline=this.RULE("linkTextInline",()=>{this.AT_LEAST_ONE(()=>{this.OR([{ALT:()=>this.CONSUME(Q)},{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME(dt)},{ALT:()=>this.CONSUME(Ii)}])})}),this.subgraph=this.RULE("subgraph",()=>{this.CONSUME(Pu),this.OR([{ALT:()=>{this.CONSUME(Q,{LABEL:"subgraphId"}),this.OPTION(()=>{this.CONSUME1(Li),this.SUBRULE(this.nodeContent),this.CONSUME1(Ni)})}},{ALT:()=>{this.CONSUME(Ps,{LABEL:"subgraphTitleQ"})}},{ALT:()=>{this.CONSUME2(Li),this.SUBRULE2(this.nodeContent),this.CONSUME2(Ni)}}]),this.CONSUME(ot),this.MANY(()=>{this.SUBRULE(this.subgraphStatement)}),this.CONSUME(Uu),this.OPTION3(()=>{this.CONSUME2(ot)})}),this.subgraphStatement=this.RULE("subgraphStatement",()=>{this.OR([{ALT:()=>this.SUBRULE(this.directionStatement)},{ALT:()=>this.SUBRULE(this.nodeStatement)},{ALT:()=>this.SUBRULE(this.subgraph)},{ALT:()=>this.SUBRULE(this.classStatement)},{ALT:()=>this.SUBRULE(this.styleStatement)},{ALT:()=>this.SUBRULE(this.classDefStatement)},{ALT:()=>this.CONSUME(ot)}])}),this.directionStatement=this.RULE("directionStatement",()=>{this.CONSUME(Q,{LABEL:"dirKw"}),this.CONSUME(vs),this.OPTION(()=>this.CONSUME(ot))}),this.classStatement=this.RULE("classStatement",()=>{this.CONSUME(qu),this.CONSUME(Q),this.MANY(()=>{this.CONSUME(Nn),this.CONSUME2(Q)}),this.CONSUME3(Q,{LABEL:"className"}),this.OPTION(()=>{this.CONSUME(ot)})}),this.styleStatement=this.RULE("styleStatement",()=>{this.CONSUME(Du),this.CONSUME(Q),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME2(Q)},{ALT:()=>this.CONSUME(Us)},{ALT:()=>this.CONSUME(Si)},{ALT:()=>this.CONSUME(Nn)},{ALT:()=>this.CONSUME(dt)}])}),this.OPTION(()=>{this.CONSUME(ot)})}),this.classDefStatement=this.RULE("classDefStatement",()=>{this.CONSUME(Fu),this.CONSUME(Q),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(hr)},{ALT:()=>this.CONSUME2(Q)},{ALT:()=>this.CONSUME(Us)},{ALT:()=>this.CONSUME(Si)},{ALT:()=>this.CONSUME(Nn)},{ALT:()=>this.CONSUME(dt)}])}),this.OPTION(()=>{this.CONSUME(ot)})}),this.performSelfAnalysis()}_augmentNodeRule(){let t=this.node;this.node=this.RULE("node",()=>{this.OR([{ALT:()=>{this.CONSUME(Q,{LABEL:"nodeId"}),this.OPTION(()=>{this.CONSUME(dt,{LABEL:"nodeIdSuffix"})})}},{ALT:()=>{this.CONSUME2(dt,{LABEL:"nodeIdNum"})}}]),this.OPTION2(()=>{this.SUBRULE(this.nodeShape)}),this.OPTION3(()=>{this.CONSUME(Ns),this.CONSUME3(Q,{LABEL:"nodeClass"})})})}},st=new al;function ym(e){return st.input=e,{cst:st.diagram(),errors:st.errors}}var RP=st.getBaseCstVisitorConstructorWithDefaults(),ul=class extends RP{constructor(t){super(),this.validateVisitor(),this.ctx=t}diagram(t){t.statement&&t.statement.forEach(r=>this.visit(r))}statement(t){for(let r of Object.keys(t)){let n=t[r];Array.isArray(n)&&n.forEach(i=>{i&&typeof i.name=="string"&&this.visit(i)})}}subgraph(t){t.subgraphStatement&&t.subgraphStatement.forEach(r=>this.visit(r))}subgraphStatement(t){for(let r of Object.keys(t)){let n=t[r];Array.isArray(n)&&n.forEach(i=>{i&&typeof i.name=="string"&&this.visit(i)})}}directionStatement(t){let r=t.dirKw?.[0];r&&r.image!=="direction"&&this.ctx.errors.push({line:r.startLine??1,column:r.startColumn??1,severity:"error",code:"FL-DIR-KW-INVALID",message:`Unknown keyword '${r.image}' before direction. Use 'direction TB' / 'LR' / etc.`,hint:"Example inside subgraph: 'direction TB'",length:r.image?.length??0})}nodeStatement(t){t.nodeOrParallelGroup&&t.nodeOrParallelGroup.forEach(r=>this.visit(r))}nodeOrParallelGroup(t){t.node&&t.node.forEach(r=>this.visit(r))}node(t){t.nodeShape&&t.nodeShape.forEach(r=>this.visit(r))}checkEmptyContent(t,r){if(!r||r.length===0){this.ctx.errors.push({line:t.startLine??1,column:t.startColumn??1,severity:"error",message:"Empty label inside a shape.",code:"FL-NODE-EMPTY",hint:'Write non-empty text inside the brackets, e.g., A["Start"] or A[Start]. If you want no label, omit the brackets and just use A.'});return}for(let n of r){let i=n.children||{},o=[].concat(i.QuotedString||[]).concat(i.MultilineText||[]);for(let a of o){let s=a.image;if(!s)continue;(s.startsWith('"')||s.startsWith("'")?s.slice(1,-1):s).trim().length===0&&this.ctx.errors.push({line:a.startLine??1,column:a.startColumn??1,severity:"error",message:"Empty label inside a shape (only empty quotes/whitespace).",code:"FL-NODE-EMPTY",hint:'Provide non-empty text, e.g., A["Start"] or A[Start]. If you want no label, omit the brackets and just use A.'})}}}checkEscapedQuotes(t){if(t)for(let r of t){let n=r.children||{},i=[].concat(n.QuotedString||[]).concat(n.Text||[]).concat(n.Identifier||[]).concat(n.NumberLiteral||[]);for(let o of i)o.image&&o.image.includes('\\"')&&this.ctx.errors.push({line:o.startLine??1,column:o.startColumn??1,severity:"error",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',code:"FL-LABEL-ESCAPED-QUOTE",hint:'Prefer "He said &quot;Hi&quot;".'})}}checkDoubleInSingleQuoted(t){if(t)for(let r of t){let i=(r.children||{}).QuotedString||[];for(let o of i){let a=o.image||"";if(a.startsWith("'")&&a.endsWith("'")&&a.includes('"')){let s=a.indexOf('"'),u=(o.startColumn??1)+Math.max(0,s);this.ctx.errors.push({line:o.startLine??1,column:u,severity:"error",message:'Double quotes inside a single-quoted label are not supported by Mermaid. Replace inner " with &quot; or use a double-quoted label with &quot;.',code:"FL-LABEL-DOUBLE-IN-SINGLE",hint:'Change to "She said &quot;Hello&quot;" or replace inner " with &quot;.',length:1})}}}}checkDoubleInDoubleQuoted(t){if(t)for(let r of t){let i=(r.children||{}).QuotedString||[];if(i.length>=2){let o=i[1];this.ctx.errors.push({line:o.startLine??1,column:o.startColumn??1,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1})}}}warnParensInUnquoted(t){if(t)for(let r of t){let n=r.children||{};if(Array.isArray(n.QuotedString)&&n.QuotedString.length>0)continue;let o=n.RoundOpen||[],a=n.RoundClose||[],s=[...o,...a];if(s.length>0){let u=s[0];this.ctx.errors.push({line:u.startLine??1,column:u.startColumn??1,severity:"warning",code:"FL-LABEL-PARENS-UNQUOTED",message:"Parentheses inside an unquoted label may be ambiguous. Wrap the label in quotes.",hint:'Example: A["Calls func(arg)"]'})}}}nodeShape(t){let r=t.SquareOpen&&t.SquareOpen[0]||t.DoubleSquareOpen&&t.DoubleSquareOpen[0]||t.RoundOpen&&t.RoundOpen[0]||t.DoubleRoundOpen&&t.DoubleRoundOpen[0]||t.DiamondOpen&&t.DiamondOpen[0]||t.HexagonOpen&&t.HexagonOpen[0]||t.StadiumOpen&&t.StadiumOpen[0]||t.CylinderOpen&&t.CylinderOpen[0],n=[];for(let i of Object.keys(t))if(i.startsWith("nodeContent")){let o=t[i];Array.isArray(o)&&n.push(...o)}if(r&&(this.checkEmptyContent(r,n.length?n:void 0),this.checkEscapedQuotes(n),this.checkDoubleInSingleQuoted(n),this.warnParensInUnquoted(n),this.ctx.strict)){let i=!1,o;for(let a of n){let s=a.children||{};if(s.QuotedString&&s.QuotedString.length||s.MultilineText&&s.MultilineText.length){i=!0;break}let u=[].concat(s.Identifier||[]).concat(s.Text||[]).concat(s.NumberLiteral||[]).concat(s.RoundOpen||[]).concat(s.RoundClose||[]).concat(s.Comma||[]).concat(s.Colon||[]).concat(s.Pipe||[]);!o&&u.length&&(o=u[0])}if(n.length>0&&!i){let a=o??r;this.ctx.errors.push({line:a.startLine??1,column:a.startColumn??1,severity:"error",code:"FL-STRICT-LABEL-QUOTES-REQUIRED",message:"Strict mode: Node label must be quoted (use double quotes and &quot; inside).",hint:'Example: A["Label with &quot;quotes&quot; and (parens)"]'})}}}};function Am(e,t,r){let n={errors:[],strict:r?.strict};return new ul(n).visit(e),n.errors}function Ci(e,t){let r=[],n=t.code,i=t.message||'Escaped quotes (\\") are not supported by Mermaid. Use &quot; instead.',o=t.hint||'Use &quot; for inner quotes, e.g., "He said &quot;Hi&quot;".',a=new Set;for(let s of e)if(typeof s.image=="string"){let u=s.image.indexOf('\\"');if(u!==-1){let l=s.startLine??1;if(a.has(l))continue;a.add(l);let c=(s.startColumn??1)+u,{line:f,column:h}=dr(l,c,1,1);r.push({line:f,column:h,severity:"error",code:n,message:i,hint:o,length:2})}}return r}function In(e,t){let r=[],n=new Map;for(let o of e){let a=o.startLine??1;n.has(a)||n.set(a,[]),n.get(a).push(o)}let i=new Set(t.scopeEndTokenNames||[]);for(let[o,a]of n)for(let s=0;s<a.length;s++)if(a[s].tokenType?.name==="QuotedString"){for(let l=s+1;l<a.length;l++){let c=a[l];if(i.size>0&&i.has(c.tokenType?.name||""))break;if(c.tokenType?.name==="QuotedString"){let{line:f,column:h}=dr(c.startLine??null,c.startColumn??null,o,1);r.push({line:f,column:h,severity:"error",code:t.code,message:t.message,hint:t.hint,length:1}),l=a.length;break}if(c.tokenType?.name==="Text"&&typeof c.image=="string"&&c.image.includes('"')){let f=c.image.indexOf('"'),h=(c.startColumn??1)+(f>=0?f:0),{line:p,column:m}=dr(c.startLine??null,h,o,1);r.push({line:p,column:m,severity:"error",code:t.code,message:t.message,hint:t.hint,length:1}),l=a.length;break}}if(r.length>0&&r[r.length-1].line===o)break}return r}function pr(e,t){let r=[],n=e.split(/\r?\n/),i=t.message||"Unclosed quote in label or name.",o=t.hint||'Close the quote, e.g., "Text"',a=t.limitPerFile??1;for(let s=0;s<n.length;s++){let u=n[s]??"";if(!u)continue;let l=u.split("&quot;").join("").split('\\"').join(""),c=[],f=[];for(let m=0;m<l.length;m++){let g=l[m];g==='"'?c.push(m):g==="'"&&f.push(m)}let h=c.length%2===1,p=f.length%2===1;if(h||p){let m=h?c[0]??0:f[0]??0;if(r.push({line:s+1,column:m+1,severity:"error",code:t.code,message:i,hint:o,length:1}),r.length>=a)break}}return r}function dr(e,t,r=1,n=1){let i=Number.isFinite(e)&&e>0?e:r,o=Number.isFinite(t)&&t>0?t:n;return{line:i,column:o}}function ll(e){let t=e.split(/\r?\n/),r=t.length,n=t[t.length-1]??"",i=Math.max(1,n.length+1);return{line:r,column:i}}function Sm(e){let{line:t,column:r}=dr(e.line,e.column);return{line:t,column:r,severity:"error",message:e.message}}function cl(e){let t=e?.image??"";return t===`
`?"\\n":t}function $t(e,t){let r=e?.context?.ruleStack;return Array.isArray(r)&&r.includes(t)}function We(e,t){return(e.message||"").includes(`--> ${t} <--`)}function _P(e){let t=e?.context?.ruleStack;return Array.isArray(t)&&t.length===1&&t[0]==="diagram"}function Om(e,t){let r=e.token,n=ll(t),{line:i,column:o}=dr(r?.startLine??null,r?.startColumn??null,n.line,n.column),a=cl(r),s=r?.tokenType?.name,u=typeof r?.image=="string"&&r.image.length>0?r.image.length:1,c=t.split(/\r?\n/)[Math.max(0,i-1)]??"",f=h=>{let p=Math.max(0,o-1),g=c.slice(0,p).lastIndexOf(h);if(g===-1)return null;let E=c.slice(g+1),y=E.indexOf('\\"');if(y!==-1)return{kind:"escaped",column:g+1+y+1};let x=[];for(let A=0;A<E.length;A++)E[A]==='"'&&x.push(A);if(x.length>=3){let A=x[2];return{kind:"double-in-double",column:g+1+A+1}}return null};if(_P(e)&&We(e,"Direction"))return s==="EOF"||s==="Newline"?{line:i,column:o,severity:"error",code:"FL-DIR-MISSING",message:"Missing direction after diagram header. Use TD, TB, BT, RL, or LR.",hint:"Example: 'flowchart TD' for top-down layout.",length:1}:{line:i,column:o,severity:"error",code:"FL-DIR-INVALID",message:`Invalid direction '${a}'. Use one of: TD, TB, BT, RL, LR.`,hint:"Try 'TD' (top-down) or 'LR' (left-to-right).",length:u};if($t(e,"nodeStatement")&&e.name==="NoViableAltException"&&(e.message||"").includes("[Newline")&&(e.message||"").includes("[EOF"))return{line:i,column:o,severity:"error",code:"FL-LINK-MISSING",message:`Two nodes on one line must be connected with an arrow before '${a}'.`,hint:"Insert --> between nodes, e.g., A --> B.",length:u};if($t(e,"nodeShape")&&e.name==="MismatchedTokenException"&&s==="SquareClose"&&We(e,"RoundClose"))return{line:i,column:o,severity:"error",code:"FL-NODE-MIXED-BRACKETS",message:"Mismatched brackets: opened '(' but closed with ']'.",hint:"Close with ')' or change the opening bracket to '['.",length:u};if($t(e,"nodeShape")&&e.name==="MismatchedTokenException"){if(We(e,"SquareClose")){let h=f("[");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '['. Add a matching ']' before the arrow or newline.",hint:"Example: A[Label] --> B",length:1}}if(We(e,"RoundClose")){let h=f("(");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '('. Add a matching ')'.",hint:"Example: B(Label)",length:1}}if(We(e,"DiamondClose")){let h=f("{");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Example: D{"Is &quot;Driver&quot; AND &quot;AuthCheck.Path&quot; configured?"}',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported by Mermaid. Use &quot; for inner quotes.",hint:'Example: D{"Is &quot;Driver&quot; and &quot;AuthCheck.Path&quot; configured?"}',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '{'. Add a matching '}'.",hint:"Example: C{Decision}",length:1}}if(We(e,"DoubleRoundClose")){let h=f("(");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '(( '. Add a matching '))'.",hint:"Example: A((Circle))",length:2}}if(We(e,"DoubleSquareClose")){let h=f("[");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '[[ '. Add a matching ']]'.",hint:"Example: [[Subroutine]]",length:2}}if(We(e,"StadiumClose")){let h=f("(")||f("[");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '([ '. Add a matching '])'.",hint:"Example: A([Stadium])",length:u}}if(We(e,"CylinderClose")){let h=f("(")||f("[");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '[( '. Add a matching ')]'.",hint:"Example: A[(Cylinder)]",length:u}}if(We(e,"HexagonClose")){let h=f("{");return h?.kind==="escaped"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".',length:2}:h?.kind==="double-in-double"?{line:i,column:h.column,severity:"error",code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',length:1}:{line:i,column:o,severity:"error",code:"FL-NODE-UNCLOSED-BRACKET",message:"Unclosed '{{ '. Add a matching '}}'.",hint:"Example: A{{Hexagon}}",length:u}}}return $t(e,"nodeContent")&&e.name==="MismatchedTokenException"&&s==="QuotedString"?{line:i,column:o,severity:"error",code:"FL-LABEL-QUOTE-IN-UNQUOTED",message:"Double quotes inside an unquoted label are not allowed. Wrap the entire label in quotes or use &quot;.",hint:'Example: A["Calls logger.debug(&quot;message&quot;, data)"]',length:u}:$t(e,"classStatement")?{line:i,column:o,severity:"error",code:"FL-CLASS-MALFORMED",message:"Invalid class statement. Provide node id(s) then a class name.",hint:"Example: class A,B important",length:u}:$t(e,"subgraph")&&e.name==="NoViableAltException"?{line:i,column:o,severity:"error",code:"FL-SUBGRAPH-MISSING-HEADER",message:"Subgraph header is missing. Add an ID or a [Title] after the keyword.",hint:"Example: subgraph API [API Layer]",length:u}:e.name==="NotAllInputParsedException"&&s==="EndKeyword"?{line:i,column:o,severity:"error",code:"FL-END-WITHOUT-SUBGRAPH",message:"'end' without a matching 'subgraph'.",hint:"Remove this end or add a subgraph above.",length:u}:{line:i,column:o,severity:"error",message:e.message||"Parser error",length:u}}function vm(e,t){let r=e.token,n=ll(t),{line:i,column:o}=dr(r?.startLine??null,r?.startColumn??null,n.line,n.column),a=cl(r),s=typeof r?.image=="string"&&r.image.length>0?r.image.length:1,l=t.split(/\r?\n/)[Math.max(0,i-1)]||"";if(e.name==="NotAllInputParsedException"&&r?.tokenType?.name==="Colon")return{line:i,column:o,severity:"error",code:"PI-LABEL-REQUIRES-QUOTES",message:"Slice labels must be quoted (single or double quotes).",hint:'Example: "Dogs" : 10',length:s};if(e.name==="NotAllInputParsedException"){let c=l.indexOf(":");if(c>0){let f=l.slice(0,c);if(!(f.trimStart().startsWith('"')||f.trimStart().startsWith("'")))return{line:i,column:Math.max(1,c),severity:"error",code:"PI-LABEL-REQUIRES-QUOTES",message:"Slice labels must be quoted (single or double quotes).",hint:'Example: "Dogs" : 10',length:1}}}if(e.name==="NotAllInputParsedException"&&typeof r?.image=="string"){let c=r.image;if(c.startsWith('"')&&!c.slice(1).includes('"')||c.startsWith("'")&&!c.slice(1).includes("'"))return{line:i,column:o,severity:"error",code:"PI-QUOTE-UNCLOSED",message:"Unclosed quote in slice label.",hint:'Close the quote: "Dogs" : 10',length:s}}if(We(e,"Colon")){let c=(l.match(/\"/g)||[]).length;if((l.match(/"/g)||[]).length-c>=3){let h=[];for(let m=0;m<l.length;m++)l[m]==='"'&&h.push(m);let p=(h[2]??o-1)+1;return{line:i,column:p,severity:"error",code:"PI-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted slice label are not supported. Use &quot; for inner quotes.",hint:'Example: "He said &quot;Hi&quot;" : 1',length:1}}return{line:i,column:o,severity:"error",code:"PI-MISSING-COLON",message:"Missing colon between slice label and value.",hint:'Use: "Label" : 10',length:s}}return We(e,"NumberLiteral")?{line:i,column:o,severity:"error",code:"PI-MISSING-NUMBER",message:"Missing numeric value after colon.",hint:"Use a number like 10 or 42.5",length:s}:We(e,"QuotedString")?{line:i,column:o,severity:"error",code:"PI-LABEL-REQUIRES-QUOTES",message:"Slice labels must be quoted (single or double quotes).",hint:'Example: "Dogs" : 10',length:s}:{line:i,column:o,severity:"error",message:e.message||"Parser error",length:s}}function bm(e,t){let r=e.token,n=ll(t),{line:i,column:o}=dr(r?.startLine??null,r?.startColumn??null,n.line,n.column),a=cl(r),s=r?.tokenType?.name,u=typeof r?.image=="string"&&r.image.length>0?r.image.length:1,c=t.split(/\r?\n/)[Math.max(0,i-1)]||"",f=_=>$t(e,_),h=f("actorRef")||f("participantDecl"),p=_=>We(e,_),m=e?.context?.ruleStack?.[0]==="diagram"&&e?.context?.ruleStack?.length===1,g=[{tok:"ElseKeyword",key:"else",allowedRule:"altBlock",allowedLabel:"alt",example:`alt Condition
  \u2026
else
  \u2026
end`},{tok:"AndKeyword",key:"and",allowedRule:"parBlock",allowedLabel:"par",example:`par
  \u2026
and
  \u2026
end`},{tok:"OptionKeyword",key:"option",allowedRule:"criticalBlock",allowedLabel:"critical",example:`critical
  \u2026
option Label
  \u2026
end`}],y=(e?.context?.ruleStack||[]).slice().reverse().find(_=>/Block$/.test(_)),x=g.find(_=>_.tok===s);if(x){if(!y)return x.key==="else"?{line:i,column:o,severity:"error",code:"SE-ELSE-OUTSIDE-ALT",message:"'else' is only allowed inside 'alt' blocks.",hint:"Use: alt Condition \u2026 else \u2026 end",length:u}:x.key==="and"?{line:i,column:o,severity:"error",code:"SE-AND-OUTSIDE-PAR",message:"'and' is only allowed inside 'par' blocks.",hint:"Example: par \u2026 and \u2026 end (parallel branches).",length:u}:{line:i,column:o,severity:"error",code:"SE-BRANCH-OUTSIDE-BLOCK",message:`'${x.key}' is only allowed inside a '${x.allowedLabel}' block.`,hint:`Start a ${x.allowedLabel} section:
${x.example}`,length:u};if(y!==x.allowedRule){if(x.key==="else"&&y==="criticalBlock")return{line:i,column:o,severity:"error",code:"SE-ELSE-IN-CRITICAL",message:"'else' is not allowed inside a 'critical' block. Use 'option' or close the block with 'end'.",hint:`Replace with: option <label>
Example:
option Retry`,length:u};let _=(y||"").replace(/Block$/,"")||"block";return{line:i,column:o,severity:"error",code:"SE-BRANCH-IN-WRONG-BLOCK",message:`'${x.key}' is only valid in '${x.allowedLabel}' blocks (not inside '${_}').`,hint:`Use the proper branch for '${_}' or close it with 'end'.
For '${x.allowedLabel}', use:
${x.example}`,length:u}}}if(m&&p("SequenceKeyword"))return{line:i,column:o,severity:"error",code:"SE-HEADER-MISSING",message:"Missing 'sequenceDiagram' header.",hint:"Start with: sequenceDiagram",length:u};if(f("messageStmt")&&e.name==="MismatchedTokenException"&&p("Colon"))return{line:i,column:o,severity:"error",code:"SE-MSG-COLON-MISSING",message:"Missing colon after target actor in message.",hint:"Use: A->>B: Message text",length:u};if(h&&(e.name==="NoViableAltException"||e.name==="MismatchedTokenException"||e.name==="EarlyExitException")){let G=pr(t,{code:"SE-QUOTE-UNCLOSED",message:"Unclosed quote in participant/actor name.",hint:'Close the quote: participant "Bob"  or  participant Alice as "Alias"',limitPerFile:Number.MAX_SAFE_INTEGER}).find(W=>W.line===i);if(G)return{...G,severity:"warning"};let $=(c.match(/\"/g)||[]).length,He=(c.match(/"/g)||[]).length-$,Ne=(c.match(/'/g)||[]).length;if(He>=3){let W=[];for(let et=0;et<c.length;et++)c[et]==='"'&&W.push(et);let be=(W[2]??o-1)+1;return{line:i,column:be,severity:"warning",code:"SE-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted name/label are not supported. Use &quot; for inner quotes.",hint:'Example: participant "Logger &quot;debug&quot;" as L',length:1}}}if(f("arrow")&&e.name==="NoViableAltException")return{line:i,column:o,severity:"error",code:"SE-ARROW-INVALID",message:`Invalid sequence arrow near '${a}'.`,hint:"Use ->, -->, ->>, -->>, -x, --x, -), --), <<->>, or <<-->>",length:u};if(f("noteStmt")){if(e.name==="MismatchedTokenException"&&p("Colon"))return{line:i,column:o,severity:"error",code:"SE-NOTE-MALFORMED",message:"Malformed note: missing colon before the note text.",hint:"Example: Note right of Alice: Hello",length:u};if(e.name==="NoViableAltException")return{line:i,column:o,severity:"error",code:"SE-NOTE-MALFORMED",message:"Malformed note statement. Use left|right of X or over X[,Y]: text",hint:"Examples: Note over A,B: hi",length:u}}if(s==="ElseKeyword"&&$t(e,"criticalBlock"))return{line:i,column:o,severity:"error",code:"SE-ELSE-IN-CRITICAL",message:"'else' is not allowed inside a 'critical' block. Use 'option' or close the block with 'end'.",hint:`Replace with: option <label>
Example:
option Retry`,length:u};let A=[{rule:"altBlock",label:"alt"},{rule:"optBlock",label:"opt"},{rule:"loopBlock",label:"loop"},{rule:"parBlock",label:"par"},{rule:"rectBlock",label:"rect"},{rule:"criticalBlock",label:"critical"},{rule:"breakBlock",label:"break"},{rule:"boxBlock",label:"box"}];if(e.name==="MismatchedTokenException"&&p("EndKeyword")){let _=A.find(G=>$t(e,G.rule));if(_){let G=t.split(/\r?\n/),$=/^(\s*)(alt\b|opt\b|loop\b|par\b|rect\b|critical\b|break\b|box\b)/,He=-1,Ne="";for(let be=Math.max(0,i-1);be>=0;be--){let et=$.exec(G[be]||"");if(et){He=be,Ne=et[1]||"";break}}let W=i;if(He!==-1){W=G.length;for(let be=He+1;be<G.length;be++){let et=G[be]||"";if(et.trim()==="")continue;if((et.match(/^(\s*)/)?.[1]||"").length<=Ne.length){W=be+1;break}}W>G.length&&(W=G.length+1)}return{line:W,column:1,severity:"error",code:"SE-BLOCK-MISSING-END",message:`Missing 'end' to close a '${_.label}' block.`,hint:"Add 'end' on its own line aligned with the block's start.",length:1}}}if((e.name==="NoViableAltException"||e.name==="NotAllInputParsedException")&&s==="ElseKeyword")return{line:i,column:o,severity:"error",code:"SE-ELSE-OUTSIDE-ALT",message:"'else' is only allowed inside 'alt' blocks.",hint:"Use: alt Condition \u2026 else \u2026 end",length:u};if((e.name==="NoViableAltException"||e.name==="NotAllInputParsedException")&&s==="AndKeyword")return{line:i,column:o,severity:"error",code:"SE-AND-OUTSIDE-PAR",message:"'and' is only allowed inside 'par' blocks.",hint:"Example: par \u2026 and \u2026 end (parallel branches).",length:u};if((e.name==="NoViableAltException"||e.name==="NotAllInputParsedException")&&s==="EndKeyword")return{line:i,column:o,severity:"error",code:"SE-END-WITHOUT-BLOCK",message:"'end' without an open block (alt/opt/loop/par/rect/critical/break/box).",hint:"Add a block above (e.g., par \u2026 end | alt \u2026 end) or remove this end.",length:u};if(f("autonumberStmt")){if(s==="Identifier")return{line:i,column:o,severity:"error",code:"SE-AUTONUMBER-NON-NUMERIC",message:`Autonumber values must be numbers. Found '${a}'.`,hint:"Use numbers: autonumber 10 or autonumber 10 10 (start and step).",length:u};if(s==="ParticipantKeyword"||s==="ActorKeyword")return{line:i,column:o,severity:"error",code:"SE-AUTONUMBER-EXTRANEOUS",message:"Unexpected token after 'autonumber'. Put 'autonumber' on its own line.",hint:`Example:
autonumber 10 10
participant A`,length:u};if(e.name==="NoViableAltException"||e.name==="MismatchedTokenException"||e.name==="NotAllInputParsedException")return{line:i,column:o,severity:"error",code:"SE-AUTONUMBER-MALFORMED",message:"Malformed autonumber statement.",hint:"Use: autonumber | autonumber off | autonumber 10 10",length:u}}if(f("createStmt")&&(s==="Newline"||s==="EOF"))return{line:i,column:o,severity:"error",code:"SE-CREATE-MISSING-NAME",message:"Missing name after 'create'.",hint:"Use: create participant A  or  create actor B",length:u};if(f("createStmt")&&(e.name==="MismatchedTokenException"||e.name==="NoViableAltException"))return{line:i,column:o,severity:"error",code:"SE-CREATE-MALFORMED",message:"After 'create', specify 'participant' or 'actor' before the name.",hint:`Examples:
create participant B
create actor D as Donald`,length:u};if(f("destroyStmt")&&e.name==="MismatchedTokenException")return{line:i,column:o,severity:"error",code:"SE-DESTROY-MALFORMED",message:"After 'destroy', specify 'participant' or 'actor' and a name.",hint:`Examples:
destroy participant A
destroy actor B`,length:u};if(f("destroyStmt")&&(s==="Newline"||s==="EOF"))return{line:i,column:o,severity:"error",code:"SE-DESTROY-MISSING-NAME",message:"Missing name after 'destroy'.",hint:"Use: destroy participant A  or  destroy actor B",length:u};let O=(c.match(/\"/g)||[]).length;if((c.match(/"/g)||[]).length-O>=3){let _=[];for(let $=0;$<c.length;$++)c[$]==='"'&&_.push($);let G=(_[2]??o-1)+1;return{line:i,column:G,severity:"error",code:"SE-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted name/label are not supported. Use &quot; for inner quotes.",hint:'Example: participant "Logger &quot;debug&quot;" as L',length:1}}return{line:i,column:o,severity:"error",message:e.message||"Parser error",length:u}}function Cn(e,t){let r=[],n=t.tokenize(e);if(n.errors.length>0&&r.push(...n.errors.map(Sm)),t.postLex)try{r.push(...t.postLex(e,n.tokens)||[])}catch{}let i=null;if(n.errors.length===0){let o=t.parse(n.tokens);i=o.cst,o.errors.length>0&&r.push(...o.errors.map(a=>t.mapParserError(a,e)))}if(i)try{r.push(...t.analyze(i,n.tokens)||[])}catch(o){r.push({line:1,column:1,severity:"error",message:`Internal semantic analysis error: ${o.message}`})}if(t.postParse)try{r.push(...t.postParse(e,n.tokens,i,r)||[])}catch{}return r}function Lm(e,t={}){return Cn(e,{tokenize:qs,parse:ym,analyze:(r,n)=>Am(r,n,{strict:!!t.strict}),mapParserError:(r,n)=>Om(r,n),postLex:(r,n)=>{let i=[];for(let o of n)o.tokenType===bi&&i.push({line:o.startLine??1,column:o.startColumn??1,message:"Invalid arrow syntax: -> (use --> instead)",severity:"error",code:"FL-ARROW-INVALID",hint:"Replace -> with -->, or use -- text --> for inline labels.",length:o.image?.length??2});return i},postParse:(r,n,i,o)=>{let a=new Set(o.filter(g=>g.code==="FL-LABEL-ESCAPED-QUOTE").map(g=>g.line)),s=Ci(n,{code:"FL-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in node labels are not supported by Mermaid. Use &quot; instead.',hint:'Prefer "He said &quot;Hi&quot;".'}).filter(g=>!a.has(g.line)),u=new Set(o.filter(g=>g.code==="FL-LABEL-DOUBLE-IN-DOUBLE").map(g=>g.line)),l=new Set(Ci(n,{code:"x"}).map(g=>g.line)),c=In(n,{code:"FL-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted label are not supported. Use &quot; for inner quotes.",hint:'Example: A["He said &quot;Hi&quot;"]',scopeEndTokenNames:["SquareClose","RoundClose","DiamondClose","DoubleSquareClose","DoubleRoundClose","StadiumClose","CylinderClose","HexagonClose"]}).filter(g=>!u.has(g.line)&&!l.has(g.line)),f=s.concat(c),h=(r.match(/\\\"/g)||[]).length,p=(r.match(/\"/g)||[]).length-h,m=(r.match(/'/g)||[]).length;return(p%2===1||m%2===1)&&f.push(...pr(r,{code:"FL-QUOTE-UNCLOSED",message:"Unclosed quote in node label.",hint:'Close the quote: A["Label"]',limitPerFile:1})),f}})}var fl=T({name:"PieKeyword",pattern:/pie/}),hl=T({name:"TitleKeyword",pattern:/title/}),dl=T({name:"ShowDataKeyword",pattern:/showData/}),pl=T({name:"Colon",pattern:/:/}),Ds=T({name:"NumberLiteral",pattern:/-?[0-9]+(\.[0-9]+)?/}),Fs=T({name:"QuotedString",pattern:/"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'/}),ml=T({name:"Text",pattern:/[^:\n\r]+/}),wP=T({name:"Comment",pattern:/%%[^\n\r]*/,group:B.SKIPPED}),kP=T({name:"WhiteSpace",pattern:/[ \t]+/,group:B.SKIPPED}),Rn=T({name:"Newline",pattern:/[\n\r]+/,line_breaks:!0}),gl=[wP,Fs,fl,hl,dl,kP,pl,Ds,ml,Rn],MP=new B(gl);function Nm(e){return MP.tokenize(e)}var El=class extends Bt{constructor(){super(gl),this.diagram=this.RULE("diagram",()=>{this.CONSUME(fl),this.OPTION(()=>this.CONSUME(dl)),this.OPTION2(()=>this.CONSUME(Rn)),this.MANY(()=>this.SUBRULE(this.statement))}),this.statement=this.RULE("statement",()=>{this.OR([{ALT:()=>this.SUBRULE(this.titleStmt)},{ALT:()=>this.SUBRULE(this.sliceStmt)},{ALT:()=>this.CONSUME(Rn)}])}),this.titleStmt=this.RULE("titleStmt",()=>{this.CONSUME(hl),this.AT_LEAST_ONE(()=>this.OR([{ALT:()=>this.CONSUME(Fs)},{ALT:()=>this.CONSUME(ml)},{ALT:()=>this.CONSUME(Ds)}])),this.OPTION2(()=>this.CONSUME(Rn))}),this.sliceStmt=this.RULE("sliceStmt",()=>{this.SUBRULE(this.sliceLabel),this.CONSUME(pl),this.CONSUME(Ds),this.OPTION3(()=>this.CONSUME(Rn))}),this.sliceLabel=this.RULE("sliceLabel",()=>{this.CONSUME(Fs)}),this.performSelfAnalysis()}},Ri=new El;function Im(e){return Ri.input=e,{cst:Ri.diagram(),errors:Ri.errors}}var UP=Ri.getBaseCstVisitorConstructorWithDefaults(),xl=class extends UP{constructor(t){super(),this.validateVisitor(),this.ctx=t}diagram(t){t.statement&&t.statement.forEach(r=>this.visit(r))}statement(t){for(let r of Object.keys(t)){let n=t[r];Array.isArray(n)&&n.forEach(i=>{i&&typeof i.name=="string"&&this.visit(i)})}}};function Cm(e,t){let r={errors:[]};return new xl(r).visit(e),r.errors}function Rm(e,t={}){return Cn(e,{tokenize:Nm,parse:Im,analyze:(r,n)=>Cm(r,n),mapParserError:(r,n)=>vm(r,n),postLex:(r,n)=>{let i=[];i.push(...pr(r,{code:"PI-QUOTE-UNCLOSED",message:"Unclosed quote in slice label.",hint:'Close the quote: "Dogs" : 10',limitPerFile:1}));let o=n,a=new Set;for(let u of o)typeof u.image=="string"&&u.image.includes('\\"')&&a.add(u.startLine??1);let s=In(o,{code:"PI-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted slice label are not supported. Use &quot; for inner quotes.",hint:'Example: "He said &quot;Hi&quot;" : 1',scopeEndTokenNames:["Colon"]}).filter(u=>!a.has(u.line));return i.push(...s),i}})}var U=T({name:"Identifier",pattern:/[A-Za-z_][A-Za-z0-9_]*/}),_n=T({name:"NumberLiteral",pattern:/[0-9]+/}),Tl=T({name:"SequenceKeyword",pattern:/sequenceDiagram/,longer_alt:U}),wn=T({name:"ParticipantKeyword",pattern:/participant/i,longer_alt:U}),kn=T({name:"ActorKeyword",pattern:/actor/i,longer_alt:U}),Bs=T({name:"AsKeyword",pattern:/as/i,longer_alt:U}),$s=T({name:"AutonumberKeyword",pattern:/autonumber/i,longer_alt:U}),Ks=T({name:"OffKeyword",pattern:/off/i,longer_alt:U}),Gs=T({name:"NoteKeyword",pattern:/note/i,longer_alt:U}),js=T({name:"LeftKeyword",pattern:/left/i,longer_alt:U}),Ws=T({name:"RightKeyword",pattern:/right/i,longer_alt:U}),Hs=T({name:"OverKeyword",pattern:/over/i,longer_alt:U}),zs=T({name:"OfKeyword",pattern:/of/i,longer_alt:U}),Vs=T({name:"ActivateKeyword",pattern:/activate/i,longer_alt:U}),Ys=T({name:"DeactivateKeyword",pattern:/deactivate/i,longer_alt:U}),Xs=T({name:"CreateKeyword",pattern:/create/i,longer_alt:U}),Qs=T({name:"DestroyKeyword",pattern:/destroy/i,longer_alt:U}),_i=T({name:"AltKeyword",pattern:/alt/i,longer_alt:U}),kr=T({name:"ElseKeyword",pattern:/else/i,longer_alt:U}),Zs=T({name:"OptionKeyword",pattern:/option/i,longer_alt:U}),Js=T({name:"OptKeyword",pattern:/opt/i,longer_alt:U}),ea=T({name:"LoopKeyword",pattern:/loop/i,longer_alt:U}),Mn=T({name:"ParKeyword",pattern:/par/i,longer_alt:U}),Mr=T({name:"AndKeyword",pattern:/and/i,longer_alt:U}),ta=T({name:"RectKeyword",pattern:/rect/i,longer_alt:U}),ra=T({name:"CriticalKeyword",pattern:/critical/i,longer_alt:U}),na=T({name:"BoxKeyword",pattern:/box/i,longer_alt:U}),pt=T({name:"EndKeyword",pattern:/end/i,longer_alt:U}),ia=T({name:"LinksKeyword",pattern:/links/i,longer_alt:U}),oa=T({name:"LinkKeyword",pattern:/link/i,longer_alt:U}),sa=T({name:"BreakKeyword",pattern:/break/i,longer_alt:U}),yl=T({name:"BidirAsyncDotted",pattern:/<<-->>/}),Al=T({name:"BidirAsync",pattern:/<<->>/}),Sl=T({name:"DottedAsync",pattern:/-->>/}),Ol=T({name:"Async",pattern:/->>/}),vl=T({name:"Dotted",pattern:/-->/}),bl=T({name:"Solid",pattern:/->/}),Ll=T({name:"DottedCross",pattern:/--x/}),Nl=T({name:"Cross",pattern:/-x/}),Il=T({name:"DottedOpen",pattern:/--\)/}),Cl=T({name:"Open",pattern:/-\)/}),aa=T({name:"Plus",pattern:/\+/}),ua=T({name:"Minus",pattern:/-/}),la=T({name:"Comma",pattern:/,/}),Pn=T({name:"Colon",pattern:/:/}),Rl=T({name:"LParen",pattern:/\(/}),_l=T({name:"RParen",pattern:/\)/}),ca=T({name:"QuotedString",pattern:/"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'/}),qP=T({name:"Comment",pattern:/%%[^\n\r]*/,group:B.SKIPPED}),DP=T({name:"WhiteSpace",pattern:/[ \t]+/,group:B.SKIPPED}),q=T({name:"Newline",pattern:/[\n\r]+/,line_breaks:!0}),fa=T({name:"Text",pattern:/[^\n\r]+/}),wl=[qP,ca,DP,q,Tl,wn,kn,Bs,$s,Ks,Gs,js,Ws,Hs,zs,Vs,Ys,Xs,Qs,_i,kr,Zs,Js,ea,Mn,Mr,ta,ra,sa,na,pt,ia,oa,yl,Al,Sl,Ol,vl,bl,Ll,Nl,Il,Cl,la,Pn,Rl,_l,aa,ua,_n,U,fa],FP=new B(wl);function _m(e){return FP.tokenize(e)}var kl=class extends Bt{constructor(){super(wl),this.diagram=this.RULE("diagram",()=>{this.CONSUME(Tl),this.MANY(()=>this.CONSUME(q)),this.MANY2(()=>{this.SUBRULE(this.line)}),this.OPTION(()=>this.CONSUME(De))}),this.line=this.RULE("line",()=>{this.OR([{ALT:()=>this.SUBRULE(this.participantDecl)},{ALT:()=>this.SUBRULE(this.autonumberStmt)},{ALT:()=>this.SUBRULE(this.noteStmt)},{ALT:()=>this.SUBRULE(this.activateStmt)},{ALT:()=>this.SUBRULE(this.deactivateStmt)},{ALT:()=>this.SUBRULE(this.createStmt)},{ALT:()=>this.SUBRULE(this.destroyStmt)},{ALT:()=>this.SUBRULE(this.linkStmt)},{ALT:()=>this.SUBRULE(this.altBlock)},{ALT:()=>this.SUBRULE(this.optBlock)},{ALT:()=>this.SUBRULE(this.loopBlock)},{ALT:()=>this.SUBRULE(this.parBlock)},{ALT:()=>this.SUBRULE(this.criticalBlock)},{ALT:()=>this.SUBRULE(this.breakBlock)},{ALT:()=>this.SUBRULE(this.rectBlock)},{ALT:()=>this.SUBRULE(this.boxBlock)},{ALT:()=>this.SUBRULE(this.messageStmt)},{ALT:()=>this.SUBRULE(this.blankLine)}])}),this.blankLine=this.RULE("blankLine",()=>{this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.actorRef=this.RULE("actorRef",()=>{this.AT_LEAST_ONE(()=>this.OR([{ALT:()=>this.CONSUME(U)},{ALT:()=>this.CONSUME(ca)},{ALT:()=>this.CONSUME(_n)},{ALT:()=>this.CONSUME(fa)}]))}),this.participantDecl=this.RULE("participantDecl",()=>{this.OR([{ALT:()=>this.CONSUME(wn)},{ALT:()=>this.CONSUME(kn)}]),this.SUBRULE(this.actorRef),this.OPTION(()=>{this.CONSUME(Bs),this.SUBRULE2(this.actorRef)}),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.autonumberStmt=this.RULE("autonumberStmt",()=>{this.CONSUME($s),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(Ks)},{ALT:()=>{this.CONSUME(_n),this.OPTION2(()=>this.CONSUME2(_n))}}])}),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.noteStmt=this.RULE("noteStmt",()=>{this.CONSUME(Gs),this.OR([{ALT:()=>{this.OR2([{ALT:()=>this.CONSUME(js)},{ALT:()=>this.CONSUME(Ws)}]),this.CONSUME(zs),this.SUBRULE(this.actorRef)}},{ALT:()=>{this.CONSUME(Hs),this.SUBRULE2(this.actorRef),this.OPTION(()=>{this.CONSUME(la),this.SUBRULE3(this.actorRef)})}}]),this.CONSUME(Pn),this.OPTION2(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.activateStmt=this.RULE("activateStmt",()=>{this.CONSUME(Vs),this.SUBRULE(this.actorRef),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.deactivateStmt=this.RULE("deactivateStmt",()=>{this.CONSUME(Ys),this.SUBRULE(this.actorRef),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.createStmt=this.RULE("createStmt",()=>{this.CONSUME(Xs),this.OR([{ALT:()=>this.CONSUME(wn)},{ALT:()=>this.CONSUME(kn)}]),this.SUBRULE(this.actorRef),this.OPTION(()=>{this.CONSUME(Bs),this.OPTION2(()=>this.SUBRULE(this.lineRemainder))}),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.destroyStmt=this.RULE("destroyStmt",()=>{this.CONSUME(Qs),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(wn)},{ALT:()=>this.CONSUME(kn)}])}),this.SUBRULE(this.actorRef),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.linkStmt=this.RULE("linkStmt",()=>{this.OR([{ALT:()=>this.CONSUME(oa)},{ALT:()=>this.CONSUME(ia)}]),this.SUBRULE(this.actorRef),this.CONSUME(Pn),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.messageStmt=this.RULE("messageStmt",()=>{this.SUBRULE(this.actorRef),this.SUBRULE(this.arrow),this.OPTION(()=>this.OR([{ALT:()=>this.CONSUME(aa)},{ALT:()=>this.CONSUME(ua)}])),this.SUBRULE2(this.actorRef),this.CONSUME(Pn),this.OPTION2(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q))}),this.arrow=this.RULE("arrow",()=>{this.OR([{ALT:()=>this.CONSUME(yl)},{ALT:()=>this.CONSUME(Al)},{ALT:()=>this.CONSUME(Sl)},{ALT:()=>this.CONSUME(Ol)},{ALT:()=>this.CONSUME(vl)},{ALT:()=>this.CONSUME(bl)},{ALT:()=>this.CONSUME(Ll)},{ALT:()=>this.CONSUME(Nl)},{ALT:()=>this.CONSUME(Il)},{ALT:()=>this.CONSUME(Cl)}])}),this.altBlock=this.RULE("altBlock",()=>{this.CONSUME(_i),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.MANY2(()=>{this.CONSUME(kr),this.OPTION2(()=>this.SUBRULE2(this.lineRemainder)),this.AT_LEAST_ONE2(()=>this.CONSUME2(q)),this.MANY3(()=>this.SUBRULE2(this.line))}),this.CONSUME(pt),this.AT_LEAST_ONE3(()=>this.CONSUME3(q))}),this.optBlock=this.RULE("optBlock",()=>{this.CONSUME(Js),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.CONSUME(pt),this.AT_LEAST_ONE2(()=>this.CONSUME2(q))}),this.loopBlock=this.RULE("loopBlock",()=>{this.CONSUME(ea),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.CONSUME(pt),this.AT_LEAST_ONE2(()=>this.CONSUME2(q))}),this.parBlock=this.RULE("parBlock",()=>{this.CONSUME(Mn),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.MANY2(()=>{this.CONSUME(Mr),this.OPTION2(()=>this.SUBRULE2(this.lineRemainder)),this.AT_LEAST_ONE2(()=>this.CONSUME2(q)),this.MANY3(()=>this.SUBRULE2(this.line))}),this.CONSUME(pt),this.AT_LEAST_ONE3(()=>this.CONSUME3(q))}),this.criticalBlock=this.RULE("criticalBlock",()=>{this.CONSUME(ra),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.MANY2(()=>{this.CONSUME(Zs),this.OPTION2(()=>this.SUBRULE2(this.lineRemainder)),this.AT_LEAST_ONE2(()=>this.CONSUME2(q)),this.MANY3(()=>this.SUBRULE2(this.line))}),this.CONSUME(pt),this.AT_LEAST_ONE3(()=>this.CONSUME3(q))}),this.breakBlock=this.RULE("breakBlock",()=>{this.CONSUME(sa),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.CONSUME(pt),this.AT_LEAST_ONE2(()=>this.CONSUME2(q))}),this.rectBlock=this.RULE("rectBlock",()=>{this.CONSUME(ta),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.CONSUME(pt),this.AT_LEAST_ONE2(()=>this.CONSUME2(q))}),this.boxBlock=this.RULE("boxBlock",()=>{this.CONSUME(na),this.OPTION(()=>this.SUBRULE(this.lineRemainder)),this.AT_LEAST_ONE(()=>this.CONSUME(q)),this.MANY(()=>this.SUBRULE(this.line)),this.CONSUME(pt),this.AT_LEAST_ONE2(()=>this.CONSUME2(q))}),this.lineRemainder=this.RULE("lineRemainder",()=>{this.AT_LEAST_ONE(()=>this.OR([{ALT:()=>this.CONSUME(U)},{ALT:()=>this.CONSUME(_n)},{ALT:()=>this.CONSUME(ca)},{ALT:()=>this.CONSUME(fa)},{ALT:()=>this.CONSUME(aa)},{ALT:()=>this.CONSUME(ua)},{ALT:()=>this.CONSUME(la)},{ALT:()=>this.CONSUME(Pn)},{ALT:()=>this.CONSUME(Rl)},{ALT:()=>this.CONSUME(_l)},{ALT:()=>this.CONSUME(Mr)},{ALT:()=>this.CONSUME(kr)},{ALT:()=>this.CONSUME(Js)},{ALT:()=>this.CONSUME(Zs)},{ALT:()=>this.CONSUME(ea)},{ALT:()=>this.CONSUME(Mn)},{ALT:()=>this.CONSUME(ta)},{ALT:()=>this.CONSUME(ra)},{ALT:()=>this.CONSUME(sa)},{ALT:()=>this.CONSUME(na)},{ALT:()=>this.CONSUME(pt)},{ALT:()=>this.CONSUME(Gs)},{ALT:()=>this.CONSUME(js)},{ALT:()=>this.CONSUME(Ws)},{ALT:()=>this.CONSUME(Hs)},{ALT:()=>this.CONSUME(zs)},{ALT:()=>this.CONSUME($s)},{ALT:()=>this.CONSUME(Ks)},{ALT:()=>this.CONSUME(oa)},{ALT:()=>this.CONSUME(ia)},{ALT:()=>this.CONSUME(Xs)},{ALT:()=>this.CONSUME(Qs)},{ALT:()=>this.CONSUME(wn)},{ALT:()=>this.CONSUME(kn)},{ALT:()=>this.CONSUME(Vs)},{ALT:()=>this.CONSUME(Ys)}]))}),this.performSelfAnalysis()}},wi=new kl;function km(e){return wi.input=e,{cst:wi.diagram(),errors:wi.errors}}var BP=wi.getBaseCstVisitorConstructorWithDefaults(),Ml=class extends BP{constructor(t){super(),this.ctx=t,this.validateVisitor()}};function Mm(e,t){let r={tokens:t},n=new Ml(r);return[]}function Pm(e,t={}){return Cn(e,{tokenize:_m,parse:km,analyze:(r,n)=>Mm(r,n),mapParserError:(r,n)=>bm(r,n),postLex:(r,n)=>{let i=n,a=Ci(i,{code:"SE-LABEL-ESCAPED-QUOTE",message:'Escaped quotes (\\") in names or labels are not supported by Mermaid. Use &quot; instead.',hint:'Example: participant "Logger &quot;debug&quot;" as L'}).map(c=>({...c,severity:t.strict?"error":"warning"})),s=new Map;for(let c of i){let f=c.startLine??1;s.has(f)||s.set(f,[]),s.get(f).push(c)}let u=new Set(a.map(c=>c.line)),l=In(i,{code:"SE-LABEL-DOUBLE-IN-DOUBLE",message:"Double quotes inside a double-quoted name/label are not supported. Use &quot; for inner quotes.",hint:'Example: participant "Logger &quot;debug&quot;" as L',scopeEndTokenNames:["Newline"]}).filter(c=>!u.has(c.line)).map(c=>({...c,severity:t.strict?"error":"warning"}));return a.push(...l),a},postParse:(r,n,i,o)=>{let a=[],s=n,u=s.some(p=>p.tokenType===Mn),l=s.some(p=>p.tokenType===Mr),c=s.some(p=>p.tokenType===_i),f=s.some(p=>p.tokenType===kr);if(o.some(p=>p.severity==="error")){if(!o.some(g=>g.code==="SE-QUOTE-UNCLOSED")){let g=pr(r,{code:"SE-QUOTE-UNCLOSED",message:"Unclosed quote in participant/actor name.",hint:'Close the quote: participant "Bob"  or  participant Alice as "Alias"',limitPerFile:1});g.length&&a.push(...g.map(E=>({...E,severity:t.strict?"error":"warning"})))}let p=o.some(g=>g.code==="SE-AND-OUTSIDE-PAR"),m=o.some(g=>g.code==="SE-ELSE-OUTSIDE-ALT");if(l&&!u&&!p){let g=s.find(E=>E.tokenType===Mr);a.push({line:g.startLine??1,column:g.startColumn??1,severity:"warning",code:"SE-HINT-PAR-BLOCK-SUGGEST",message:"Found 'and' but no 'par' block in the file.",hint:"Start a parallel section with: par \u2026 and \u2026 end",length:g.image?.length??3})}if(f&&!c&&!m){let g=s.find(E=>E.tokenType===kr);a.push({line:g.startLine??1,column:g.startColumn??1,severity:"warning",code:"SE-HINT-ALT-BLOCK-SUGGEST",message:"Found 'else' but no 'alt' block in the file.",hint:"Use: alt Condition \u2026 else \u2026 end",length:g.image?.length??4})}}return a}})}function Um(e){let t=e.split(/\r?\n/);for(let r of t){let n=r.trim();if(n&&!n.startsWith("%%"))return n}}function qm(e){let t=Um(e);return t?/^(flowchart|graph)\b/i.test(t)?"flowchart":/^pie\b/i.test(t)?"pie":/^sequenceDiagram\b/i.test(t)?"sequence":"unknown":"unknown"}function $P(e){if(!e)return!1;let r=/^(\w[\w-]*)/.exec(e)?.[1]||"";return new Set(["classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","userJourney","gantt","gitGraph","mindmap","timeline","quadrantChart","xychart","xychart-beta","xyChart","sankey","sankey-beta","requirementDiagram","C4Context","C4Container","C4Component","C4Deployment","C4Dynamic","block","block-beta","blockDiagram","treemap","treemap-beta"]).has(r)}function ha(e,t={}){let r=qm(e);switch(r){case"flowchart":return{type:r,errors:Lm(e,t)};case"pie":return{type:r,errors:Rm(e,t)};case"sequence":return{type:r,errors:Pm(e,t)};default:let n=Um(e);return $P(n)?{type:r,errors:[]}:{type:r,errors:[{line:1,column:1,message:'Diagram must start with "graph", "flowchart", "pie", or "sequenceDiagram"',severity:"error",code:"GEN-HEADER-INVALID",hint:'Start your diagram with e.g. "flowchart TD", "pie", or "sequenceDiagram".'}]}}}function Fm(e){return e.split(/\r?\n/)}function Dm(e,t){let r=Fm(e),n=Math.max(0,Math.min(r.length-1,t.line-1)),i=r[n]??"",o=Math.max(1,t.column),a=0;for(let s=0;s<n;s++)a+=(r[s]?.length??0)+1;return a+=Math.min(i.length,o-1),a}function Pl(e,t){if(!t||t.length===0)return e;let r=t.map(i=>{let o=Dm(e,i.start),a=i.end?Dm(e,i.end):o;return{startOff:o,endOff:a,newText:i.newText}}).sort((i,o)=>o.startOff-i.startOff),n=e;for(let i of r)n=n.slice(0,i.startOff)+i.newText+n.slice(i.endOff);return n}function Ye(e,t,r,n){return{start:t,end:{line:t.line,column:t.column+Math.max(0,r)},newText:n}}function we(e,t,r){return{start:t,newText:r}}function ve(e,t){let r=Fm(e);return r[Math.max(0,Math.min(r.length-1,t-1))]??""}function da(e){let t=/^(\s*)/.exec(e);return t&&t[1]||""}function Xe(e){return{line:e.line,column:e.column}}function j(e,t){return t.code===e}function Ul(e,t,r="safe"){let n=[],i=new Set,o=new Set,a=new Set;for(let s of t){let u=`${s.code}@${s.line}:${s.column}:${s.length??1}`;if(!o.has(u)){if(o.add(u),j("FL-ARROW-INVALID",s)){n.push(Ye(e,Xe(s),s.length??2,"-->"));continue}if(j("FL-LABEL-ESCAPED-QUOTE",s)){let l=ve(e,s.line),c=Math.max(0,s.column-1),h=[{tok:"[[",idx:l.lastIndexOf("[[",c),delta:2},{tok:"{",idx:l.lastIndexOf("{",c),delta:1},{tok:"[",idx:l.lastIndexOf("[",c),delta:1},{tok:"((",idx:l.lastIndexOf("((",c),delta:2}].filter(p=>p.idx!==-1).sort((p,m)=>p.idx-m.idx).pop();if(h){let p=[l.indexOf("]]",c),l.indexOf("}",c),l.indexOf("]",c),l.indexOf("))",c)].filter(g=>g!==-1).sort((g,E)=>g-E),m=p.length?p[0]:-1;if(m!==-1){let g=l.indexOf('"',h.idx+h.delta),E=l.lastIndexOf('"',m-1);if(g!==-1&&E!==-1&&E>g){let y=l.slice(g+1,E);if(y.includes('\\"')){let x=y.split('\\"').join("&quot;");n.push({start:{line:s.line,column:g+2},end:{line:s.line,column:E+1},newText:x});continue}}}}n.push(Ye(e,Xe(s),s.length??2,"&quot;"));continue}if(j("FL-LABEL-DOUBLE-IN-DOUBLE",s)){let l=ve(e,s.line),c=Math.max(0,s.column-1),h=[{tok:"[[",idx:l.lastIndexOf("[[",c)},{tok:"((",idx:l.lastIndexOf("((",c)},{tok:"{",idx:l.lastIndexOf("{",c)},{tok:"(",idx:l.lastIndexOf("(",c)},{tok:"[",idx:l.lastIndexOf("[",c)}].sort((m,g)=>(m.idx||-1)-(g.idx||-1)).pop(),p=h&&h.idx>=0?h.idx:-1;if(p>=0){let g=[{tok:"]]",idx:l.indexOf("]]",c)},{tok:"))",idx:l.indexOf("))",c)},{tok:"}",idx:l.indexOf("}",c)},{tok:")",idx:l.indexOf(")",c)},{tok:"]",idx:l.indexOf("]",c)}].filter(A=>A.idx!==-1).sort((A,O)=>A.idx-O.idx)[0],E=g?g.idx:l.length,y=l.indexOf('"',p+1),x=l.lastIndexOf('"',E-1);if(y!==-1&&x!==-1&&x>y){let A=l.slice(y+1,x),O=A.split("&quot;").join("\0").split('"').join("&quot;").split("\0").join("&quot;");if(O!==A){let N={line:s.line,column:y+2},_={line:s.line,column:x+1};n.push({start:N,end:_,newText:O});continue}}}n.push(Ye(e,Xe(s),s.length??1,"&quot;"));continue}if(j("FL-LABEL-DOUBLE-IN-SINGLE",s)){let l=ve(e,s.line),c=Math.max(0,s.column-1),f=l.lastIndexOf("'",c),h=l.indexOf("'",Math.max(c+1,f+1));if(f!==-1&&h!==-1&&h>f){let p=l.slice(f+1,h),m=p.split("&quot;").join("\0").split('"').join("&quot;").split("\0").join("&quot;");if(m!==p){let g={line:s.line,column:f+2},E={line:s.line,column:h+1};n.push({start:g,end:E,newText:m});continue}}n.push(Ye(e,Xe(s),s.length??1,"&quot;"));continue}if(j("FL-NODE-MIXED-BRACKETS",s)){let l=s.message||"",c=ve(e,s.line),f=Math.max(0,s.column-1);if(l.includes("opened '('")&&l.includes("closed with ']'")){let p=c.lastIndexOf("(",f);if(p!==-1){n.push({start:{line:s.line,column:p+1},end:{line:s.line,column:p+2},newText:"["});continue}}let h=")";l.includes("opened '['")?h="]":l.includes("opened '('")?h=")":l.includes("opened '{'")?h="}":l.includes("opened '[[ '")?h="]]":l.includes("opened '(( '")&&(h="))"),n.push(Ye(e,Xe(s),s.length??1,h));continue}if(j("FL-NODE-EMPTY",s)){let l=ve(e,s.line),c=Math.max(0,s.column-1),f=l[c]==="["?c:l.lastIndexOf("[",c);if(f>=0){let h=l.indexOf("]",Math.max(f+1,c));if(h!==-1){let p={line:s.line,column:f+1},m=h-f+1;n.push(Ye(e,p,m,""))}}continue}if(j("FL-DIR-KW-INVALID",s)){n.push(Ye(e,Xe(s),s.length??0,"direction"));continue}if(j("FL-DIR-MISSING",s)){(r==="safe"||r==="all")&&n.push(we(e,Xe(s)," TD"));continue}if(j("FL-LINK-MISSING",s)){r==="all"&&n.push(we(e,Xe(s)," --> "));continue}if(j("FL-NODE-UNCLOSED-BRACKET",s)){if(r==="safe"||r==="all"){let l=ve(e,s.line),c=Math.max(0,s.column-1),f=l.lastIndexOf("[",c),h=l.indexOf("]",c);if(f!==-1&&h!==-1&&h>f){let x=l.slice(f+1,h);if(x.includes('"')){let A=x.match(/^\s*/)?.[0]??"",O=x.match(/\s*$/)?.[0]??"",N=x.slice(A.length,x.length-O.length),_=N.slice(0,1),G=N.slice(-1),$=(Ne,W)=>Ne==="/"&&W==="/"||Ne==="\\"&&W==="\\"||Ne==="/"&&W==="\\"||Ne==="\\"&&W==="/",He;if(N.length>=2&&$(_,G)){let W=N.slice(1,-1).split("&quot;").join("\0").split('"').join("&quot;").split("\0").join("&quot;");He=A+_+W+G+O}else He='"'+x.split("&quot;").join("\0").split('"').join("&quot;").split("\0").join("&quot;")+'"';n.push({start:{line:s.line,column:f+2},end:{line:s.line,column:h+1},newText:He}),i.add(s.line);continue}}if(i.has(s.line))continue;let m=[{open:"{{",close:"}}",idx:l.lastIndexOf("{{",c),len:2},{open:"[[",close:"]]",idx:l.lastIndexOf("[[",c),len:2},{open:"([",close:"])",idx:l.lastIndexOf("([",c),len:2},{open:"[(",close:")]",idx:l.lastIndexOf("[(",c),len:2},{open:"{",close:"}",idx:l.lastIndexOf("{",c),len:1},{open:"(",close:")",idx:l.lastIndexOf("(",c),len:1},{open:"[",close:"]",idx:l.lastIndexOf("[",c),len:1}].filter(x=>x.idx!==-1).sort((x,A)=>x.idx-A.idx).pop();if(m){if(m.open==="{"){let x=l.lastIndexOf("{{",c);x!==-1&&x+1===m.idx&&(m={open:"{{",close:"}}",idx:x,len:2})}else if(m.open==="["){let x=l.lastIndexOf("[[",c),A=l.lastIndexOf("[(",c);x!==-1&&x===m.idx?m={open:"[[",close:"]]",idx:x,len:2}:A!==-1&&A===m.idx&&(m={open:"[(",close:")]",idx:A,len:2})}else if(m.open==="("){let x=l.lastIndexOf("((",c),A=l.lastIndexOf("([",c),O=l.lastIndexOf("[(",c);x!==-1&&x===m.idx?m={open:"((",close:"))",idx:x,len:2}:A!==-1&&A===m.idx-1?m={open:"([",close:"])",idx:A,len:2}:O!==-1&&O===m.idx-1&&(m={open:"[(",close:")]",idx:O,len:2})}}let g="]";m&&(g=m.close);let E=l.slice(c),y=Math.min(g.length,Math.max(1,E.length));n.push({start:{line:s.line,column:c+1},end:{line:s.line,column:c+1+y},newText:g})}continue}if(j("FL-QUOTE-UNCLOSED",s)){if(r==="all"){let l=ve(e,s.line),c=Math.max(0,s.column-1);if((l.replace(/\\\"/g,"").match(/\"/g)||[]).length%2===1){let p=[],m=g=>{g>=0&&p.push({idx:g})};if(m(l.indexOf("]]",c)),m(l.indexOf("))",c)),m(l.indexOf("}",c)),m(l.indexOf("]",c)),m(l.indexOf(")",c)),p.length){let g=p.reduce((y,x)=>y.idx!==-1&&y.idx<=x.idx?y:x),E=(g.idx>=0?g.idx:l.length)+1;n.push(we(e,{line:s.line,column:E},'"'))}}}continue}if(j("FL-LABEL-QUOTE-IN-UNQUOTED",s)){if(r==="safe"||r==="all"){let l=ve(e,s.line),c=Math.max(0,s.column-1),h=[{open:"[[",close:"]]",idx:l.lastIndexOf("[[",c),delta:2},{open:"((",close:"))",idx:l.lastIndexOf("((",c),delta:2},{open:"{",close:"}",idx:l.lastIndexOf("{",c),delta:1},{open:"[",close:"]",idx:l.lastIndexOf("[",c),delta:1}].filter(p=>p.idx!==-1).sort((p,m)=>p.idx-m.idx).pop();if(h){let p=h.idx+h.delta,m=l.indexOf(h.close,Math.max(c,p));if(m!==-1){let g=l.slice(p,m),E=g.match(/^\s*/)?.[0]??"",y=g.match(/\s*$/)?.[0]??"",x=g.slice(E.length,g.length-y.length),A=x.slice(0,1),O=x.slice(-1),N=(G,$)=>G==="/"&&$==="/"||G==="\\"&&$==="\\"||G==="/"&&$==="\\"||G==="\\"&&$==="/",_;if(x.length>=2&&N(A,O)){let $=x.slice(1,-1).split("&quot;").join("\0").split('"').join("&quot;").split("\0").join("&quot;");_=E+A+$+O+y}else _='"'+g.split("&quot;").join("\0").split('"').join("&quot;").split("\0").join("&quot;")+'"';n.push({start:{line:s.line,column:p+1},end:{line:s.line,column:m+1},newText:_}),i.add(s.line)}}}continue}if(j("PI-LABEL-ESCAPED-QUOTE",s)){n.push(Ye(e,Xe(s),s.length??1,"&quot;"));continue}if(j("PI-MISSING-COLON",s)){n.push(we(e,Xe(s)," : "));continue}if(j("PI-LABEL-REQUIRES-QUOTES",s)){let l=ve(e,s.line),c=l.indexOf(":");if(c>0){let f=l.slice(0,c),h=f.search(/\S/),p=f.replace(/\s+$/,"").length;h>=0&&p>h&&(n.push(we(e,{line:s.line,column:h+1},'"')),n.push(we(e,{line:s.line,column:p+1},'"')))}continue}if(j("PI-QUOTE-UNCLOSED",s)){if(r==="all"){if(a.has(s.line))continue;let l=ve(e,s.line),c=l.indexOf(":"),f=c>0?c+1:l.length+1;n.push(we(e,{line:s.line,column:f},'"')),a.add(s.line)}continue}if(j("SE-MSG-COLON-MISSING",s)){let l=ve(e,s.line),c=["<<-->>","<<->>","-->>","->>","-->","->","--x","-x","--)","-)"],f=-1,h=0;for(let p of c){let m=l.indexOf(p);m!==-1&&(f===-1||m<f)&&(f=m,h=p.length)}if(f!==-1){let p=f+h;for((l[p]==="+"||l[p]==="-")&&p++;p<l.length&&/\s/.test(l[p]);)p++;let m=p;if(l[p]==='"'||l[p]==="'"){let y=l[p];for(m=p+1;m<l.length;){if(l[m]==="\\"){m+=2;continue}if(l[m]===y){m++;break}m++}}else for(;m<l.length&&!/\s/.test(l[m])&&l[m]!==":";)m++;let g=m+1;(l[m]||"")===" "?n.push(Ye(e,{line:s.line,column:g},1," : ")):n.push(we(e,{line:s.line,column:g}," : "))}else n.push(we(e,Xe(s),": "));continue}if(j("SE-NOTE-MALFORMED",s)){let l=ve(e,s.line),c=/^(\s*)Note\s+(left|right)\s+of\s+(.+?)\s+(.+)$/.exec(l),f=/^(\s*)Note\s+over\s+(.+?)\s+(.+)$/.exec(l),h=s.column;c?h=`${c[1]||""}Note ${c[2]} of ${c[3]}`.length+1:f&&(h=`${f[1]||""}Note over ${f[2]}`.length+1);let p=Math.max(0,h-1);(l[p]||"")===" "?n.push(Ye(e,{line:s.line,column:h},1," : ")):n.push(we(e,{line:s.line,column:h}," : "));continue}if(j("SE-ELSE-IN-CRITICAL",s)){n.push(Ye(e,Xe(s),s.length??4,"option"));continue}if(j("SE-BLOCK-MISSING-END",s)){let l=e.split(/\r?\n/),c=Math.max(0,s.line-1),f=/^(\s*)(alt\b|opt\b|loop\b|par\b|rect\b|critical\b|break\b|box\b)/,h=-1,p="";for(let E=c;E>=0;E--){let y=f.exec(l[E]||"");if(y){h=E,p=y[1]||"";break}}if(h===-1){let E=da(l[c]||"");n.push(we(e,{line:c+1,column:1},`${E}end
`));continue}let m=l.length;for(let E=h+1;E<l.length;E++){let y=l[E]||"";if(y.trim()==="")continue;if(da(y).length<=p.length){m=E;break}}let g=m;n.push(we(e,{line:g+1,column:1},`${p}end
`));continue}if(j("SE-AUTONUMBER-EXTRANEOUS",s)){let l=ve(e,s.line),c=l.length,f=da(l),h=s.column,g=l.slice(0,Math.max(0,h-1)).replace(/\s+$/,"").length+1,E=l.slice(Math.max(0,h-1)).replace(/^\s+/,"");n.push({start:{line:s.line,column:g},end:{line:s.line,column:c+1},newText:`
${f}${E}`});continue}if(j("SE-AUTONUMBER-MALFORMED",s)||j("SE-AUTONUMBER-NON-NUMERIC",s)){if(r==="all"){let l=ve(e,s.line),c=l.indexOf("autonumber");c>=0&&n.push({start:{line:s.line,column:c+1},end:{line:s.line,column:l.length+1},newText:"autonumber"})}continue}if(j("SE-LABEL-ESCAPED-QUOTE",s)){n.push(Ye(e,Xe(s),s.length??1,"&quot;"));continue}if(j("SE-LABEL-DOUBLE-IN-DOUBLE",s)){let l=ve(e,s.line),c=l.trimStart();if(/^(participant|actor)\b/.test(c)){let f=l.indexOf("participant"),h=f===-1?l.indexOf("actor"):f,p=h>=0?h:0,m=l.indexOf('"',p);if(m!==-1){let g=l.indexOf(" as ",m+1),E=g!==-1?l.lastIndexOf('"',g-1):l.lastIndexOf('"');if(E>m){let y=l.slice(m+1,E),x=y.split("&quot;").join("\0").split('"').join("&quot;").split("\0").join("&quot;");if(x!==y){let A={line:s.line,column:m+2},O={line:s.line,column:E+1};n.push({start:A,end:O,newText:x})}}}}continue}if(j("SE-QUOTE-UNCLOSED",s)){if(r==="all"){let c=ve(e,s.line).length+1;n.push(we(e,{line:s.line,column:c},'"'))}continue}if(j("FL-STRICT-LABEL-QUOTES-REQUIRED",s)){if(r==="all"){let l=ve(e,s.line),c=Math.max(0,s.column-1),f=l.slice(0,c),h=l.slice(c),p=Math.max(f.lastIndexOf("["),f.lastIndexOf("("),f.lastIndexOf("{"));if(p>=0){let m=f[p],g=m==="["?"]":m==="("?")":"}",E=l.indexOf(g,c);E>p&&(n.push(we(e,{line:s.line,column:p+2},'"')),n.push(we(e,{line:s.line,column:E+1},'"')))}}continue}}}return n}var pa=class{constructor(){this.nodes=new Map,this.edges=[],this.nodeCounter=0,this.edgeCounter=0,this.subgraphs=[]}build(t){if(this.reset(),!t||!t.children)return{nodes:[],edges:[],direction:"TD",subgraphs:[]};let r=this.extractDirection(t);return this.processStatements(t),{nodes:Array.from(this.nodes.values()),edges:this.edges,direction:r,subgraphs:this.subgraphs}}reset(){this.nodes.clear(),this.edges=[],this.nodeCounter=0,this.edgeCounter=0,this.subgraphs=[],this.currentSubgraph=void 0}extractDirection(t){switch(t.children?.Direction?.[0]?.image?.toUpperCase()){case"TB":case"TD":return"TD";case"BT":return"BT";case"LR":return"LR";case"RL":return"RL";default:return"TD"}}processStatements(t){let r=t.children?.statement;if(r)for(let n of r)n.children?.nodeStatement?this.processNodeStatement(n.children.nodeStatement[0]):n.children?.subgraph&&this.processSubgraph(n.children.subgraph[0])}processNodeStatement(t){let r=t.children?.nodeOrParallelGroup,n=t.children?.link;if(!r||r.length===0)return;let i=this.processNodeGroup(r[0]);if(r.length>1&&n&&n.length>0){let o=this.processNodeGroup(r[1]),a=this.extractLinkInfo(n[0]);for(let s of i)for(let u of o)this.edges.push({id:`e${this.edgeCounter++}`,source:s,target:u,label:a.label,type:a.type});for(let s=2;s<r.length;s++){let u=this.processNodeGroup(r[s]),l=n[s-1]?this.extractLinkInfo(n[s-1]):a;for(let c of o)for(let f of u)this.edges.push({id:`e${this.edgeCounter++}`,source:c,target:f,label:l.label,type:l.type});o.length=0,o.push(...u)}}}processNodeGroup(t){let r=t.children?.node;if(!r)return[];let n=[];for(let i of r){let o=this.extractNodeInfo(i);if(o){if(!this.subgraphs.some(s=>s.id===o.id)){if(!this.nodes.has(o.id))this.nodes.set(o.id,o);else{let s=this.nodes.get(o.id);(o.shape!=="rectangle"||o.label!==o.id)&&(o.label!==o.id&&(s.label=o.label),o.shape!=="rectangle"&&(s.shape=o.shape))}if(this.currentSubgraph){let s=this.subgraphs.find(u=>u.id===this.currentSubgraph);s&&!s.nodes.includes(o.id)&&s.nodes.push(o.id)}}n.push(o.id)}}return n}extractNodeInfo(t){let r=t.children;if(!r)return null;let n;if(r.nodeId)n=r.nodeId[0].image,r.nodeIdSuffix&&(n+=r.nodeIdSuffix[0].image);else if(r.nodeIdNum)n=r.nodeIdNum[0].image;else if(r.Identifier)n=r.Identifier[0].image;else return null;let i="rectangle",o=n,a=r.nodeShape?.[0];if(a?.children){let s=this.extractShapeAndLabel(a);i=s.shape,s.label&&(o=s.label)}return{id:n,label:o,shape:i}}extractShapeAndLabel(t){let r=t.children,n="rectangle",i="",o=r?.nodeContent;return o&&o.length>0&&(i=this.extractTextContent(o[0])),r?.SquareOpen?i.startsWith("/")&&i.endsWith("/")||i.startsWith("\\")&&i.endsWith("\\")?(n="parallelogram",i=i.slice(1,-1).trim()):i.startsWith("/")&&i.endsWith("\\")||i.startsWith("\\")&&i.endsWith("/")?(n="trapezoid",i=i.slice(1,-1).trim()):n="rectangle":r?.RoundOpen?n="round":r?.DiamondOpen?n="diamond":r?.DoubleRoundOpen?n="circle":r?.StadiumOpen?n="stadium":r?.HexagonOpen?n="hexagon":r?.DoubleSquareOpen?n="subroutine":r?.CylinderOpen?n="cylinder":r?.TrapezoidOpen?n="trapezoid":r?.ParallelogramOpen&&(n="parallelogram"),{shape:n,label:i}}extractTextContent(t){let r=t.children;if(!r)return"";let n=[],i=["Text","Identifier","QuotedString","NumberLiteral","Ampersand","Comma","Colon","Semicolon","Dot","Underscore","Dash"];for(let o of i){let a=r[o];if(a)for(let s of a){let u=s.image;o==="QuotedString"&&u.startsWith('"')&&u.endsWith('"')&&(u=u.slice(1,-1)),n.push(u)}}return r.Space?n.join(""):n.join(" ").trim()}extractLinkInfo(t){let r=t.children,n="arrow",i;r?.ArrowRight||r?.ArrowLeft?n="arrow":r?.DottedArrowRight||r?.DottedArrowLeft?n="dotted":r?.ThickArrowRight||r?.ThickArrowLeft?n="thick":r?.LinkRight||r?.LinkLeft?n="open":r?.InvisibleLink&&(n="invisible");let o=r?.linkText?.[0];return o&&(i=this.extractTextContent(o)),{type:n,label:i}}processSubgraph(t){let r=t.children,n=`subgraph_${this.subgraphs.length}`,i,o=r?.subgraphId?.[0]||r?.Identifier?.[0];o&&(n=o.image),r?.SquareOpen&&r?.nodeContent?i=this.extractTextContent(r.nodeContent[0]):r?.subgraphLabel&&(i=this.extractTextContent(r.subgraphLabel[0])),!i&&n!==`subgraph_${this.subgraphs.length}`&&(i=n);let a={id:n,label:i,nodes:[],parent:this.currentSubgraph};this.subgraphs.push(a);let s=this.currentSubgraph;this.currentSubgraph=n;let u=r?.subgraphStatement;if(u)for(let l of u)l.children?.nodeStatement?this.processNodeStatement(l.children.nodeStatement[0]):l.children?.subgraph&&this.processSubgraph(l.children.subgraph[0]);this.currentSubgraph=s}};var ff=jL(UL(),1),ao=class{constructor(){this.nodeWidth=120,this.nodeHeight=50,this.rankSep=50,this.nodeSep=50,this.edgeSep=10}layout(t){let r=new ff.default.graphlib.Graph,n={rankdir:this.mapDirection(t.direction),ranksep:this.rankSep,nodesep:this.nodeSep,edgesep:this.edgeSep,marginx:20,marginy:20};t.subgraphs&&t.subgraphs.length>0&&(n.compound=!0),r.setGraph(n),r.setDefaultEdgeLabel(()=>({}));for(let s of t.nodes){let u=this.calculateNodeDimensions(s.label,s.shape);r.setNode(s.id,{width:u.width,height:u.height,label:s.label,shape:s.shape})}for(let s of t.edges)r.setEdge(s.source,s.target,{label:s.label,width:s.label?s.label.length*8:0,height:s.label?20:0});if(t.subgraphs&&t.subgraphs.length>0){for(let s of t.subgraphs)r.setNode(s.id,{label:s.label||s.id,clusterLabelPos:"top",width:150,height:100});for(let s of t.subgraphs){for(let u of s.nodes)if(r.hasNode(u))try{r.setParent(u,s.id)}catch{}if(s.parent&&r.hasNode(s.parent))try{r.setParent(s.id,s.parent)}catch{}}}ff.default.layout(r);let i=r.graph(),o=[],a=[];for(let s of t.nodes){let u=r.node(s.id);u&&o.push({...s,x:u.x-u.width/2,y:u.y-u.height/2,width:u.width,height:u.height})}for(let s of t.edges){let u=r.edge(s.source,s.target);u&&u.points&&a.push({...s,points:u.points})}return{nodes:o,edges:a,width:i.width||800,height:i.height||600}}mapDirection(t){switch(t){case"TB":case"TD":return"TB";case"BT":return"BT";case"LR":return"LR";case"RL":return"RL";default:return"TB"}}calculateNodeDimensions(t,r){let l=Math.min(Math.max(t.length*8+40,80),200),c=Math.floor((l-40)/8),f=Math.ceil(t.length/c),h=Math.max(f*20+20,40);switch(r){case"circle":let p=Math.max(l,h);l=p,h=p;break;case"diamond":case"hexagon":l*=1.3,h*=1.2;break;case"stadium":l*=1.2;break;case"cylinder":h*=1.3;break;case"subroutine":case"double":l+=10,h+=10;break;case"parallelogram":case"trapezoid":l*=1.3;break}return{width:Math.round(l),height:Math.round(h)}}};var uo=class{constructor(){this.padding=20,this.fontSize=14,this.fontFamily="Arial, sans-serif"}render(t){let r=t.width+this.padding*2,n=t.height+this.padding*2,i=[];i.push(this.generateDefs());for(let o of t.edges)i.push(this.generateEdge(o));for(let o of t.nodes)i.push(this.generateNode(o));return`<svg xmlns="http://www.w3.org/2000/svg" width="${r}" height="${n}" viewBox="0 0 ${r} ${n}">
  ${i.join(`
  `)}
</svg>`}generateDefs(){return`<defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
    <marker id="circle-marker" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto" markerUnits="strokeWidth">
      <circle cx="3" cy="3" r="3" fill="#333" />
    </marker>
  </defs>`}generateNode(t){let r=t.x+this.padding,n=t.y+this.padding,i=r+t.width/2,o=n+t.height/2,a="",s=1.5,u="#9370db",l="#f9f9ff";switch(t.shape){case"rectangle":a=`<rect x="${r}" y="${n}" width="${t.width}" height="${t.height}" rx="0" ry="0" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break;case"round":a=`<rect x="${r}" y="${n}" width="${t.width}" height="${t.height}" rx="5" ry="5" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break;case"stadium":let f=t.height/2;a=`<rect x="${r}" y="${n}" width="${t.width}" height="${t.height}" rx="${f}" ry="${f}" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break;case"circle":let h=Math.min(t.width,t.height)/2;a=`<circle cx="${i}" cy="${o}" r="${h}" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break;case"diamond":{a=`<polygon points="${[`${i},${n}`,`${r+t.width},${o}`,`${i},${n+t.height}`,`${r},${o}`].join(" ")}" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break}case"hexagon":{let E=t.width*.25;a=`<polygon points="${[`${r+E},${n}`,`${r+t.width-E},${n}`,`${r+t.width},${o}`,`${r+t.width-E},${n+t.height}`,`${r+E},${n+t.height}`,`${r},${o}`].join(" ")}" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break}case"parallelogram":{let E=t.width*.15;a=`<polygon points="${[`${r+E},${n}`,`${r+t.width},${n}`,`${r+t.width-E},${n+t.height}`,`${r},${n+t.height}`].join(" ")}" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break}case"trapezoid":{let E=t.width*.15;a=`<polygon points="${[`${r+E},${n}`,`${r+t.width-E},${n}`,`${r+t.width},${n+t.height}`,`${r},${n+t.height}`].join(" ")}" stroke="${u}" stroke-width="${s}" fill="${l}" />`;break}case"cylinder":let p=10;a=`<g>
          <ellipse cx="${i}" cy="${n+p}" rx="${t.width/2}" ry="${p}" stroke="${u}" stroke-width="${s}" fill="${l}" />
          <rect x="${r}" y="${n+p}" width="${t.width}" height="${t.height-p*2}" stroke="none" fill="${l}" />
          <path d="M${r},${n+p} L${r},${n+t.height-p} A${t.width/2},${p} 0 0,0 ${r+t.width},${n+t.height-p} L${r+t.width},${n+p}" stroke="${u}" stroke-width="${s}" fill="none" />
        </g>`;break;case"subroutine":let m=5;a=`<g>
          <rect x="${r}" y="${n}" width="${t.width}" height="${t.height}" rx="0" ry="0" stroke="${u}" stroke-width="${s}" fill="${l}" />
          <line x1="${r+m}" y1="${n}" x2="${r+m}" y2="${n+t.height}" stroke="${u}" stroke-width="${s}" />
          <line x1="${r+t.width-m}" y1="${n}" x2="${r+t.width-m}" y2="${n+t.height}" stroke="${u}" stroke-width="${s}" />
        </g>`;break;case"double":let g=4;a=`<g>
          <rect x="${r}" y="${n}" width="${t.width}" height="${t.height}" rx="0" ry="0" stroke="${u}" stroke-width="${s}" fill="${l}" />
          <rect x="${r+g}" y="${n+g}" width="${t.width-g*2}" height="${t.height-g*2}" rx="0" ry="0" stroke="${u}" stroke-width="${s}" fill="none" />
        </g>`;break;default:a=`<rect x="${r}" y="${n}" width="${t.width}" height="${t.height}" rx="0" ry="0" stroke="${u}" stroke-width="${s}" fill="${l}" />`}let c=this.generateWrappedText(t.label,i,o,t.width-20);return`<g id="${t.id}">
    ${a}
    ${c}
  </g>`}generateWrappedText(t,r,n,i){let o=this.fontSize*.6,a=Math.floor(i/o);if(a<=0||t.length<=a){let m=this.fontSize*.35;return`<text x="${r}" y="${n+m}" text-anchor="middle" font-family="${this.fontFamily}" font-size="${this.fontSize}" fill="#333">${this.escapeXml(t)}</text>`}let s=t.split(" "),u=[],l="";for(let m of s){let g=l?`${l} ${m}`:m;g.length>a&&l?(u.push(l),l=m):l=g}l&&u.push(l);let c=this.fontSize*1.2,f=(u.length-1)*c,h=n-f/2+this.fontSize*.35,p=u.map((m,g)=>{let E=h+g*c;return`<tspan x="${r}" y="${E}" text-anchor="middle">${this.escapeXml(m)}</tspan>`}).join(`
    `);return`<text font-family="${this.fontFamily}" font-size="${this.fontSize}" fill="#333">
    ${p}
  </text>`}generateEdge(t){if(!t.points||t.points.length<2)return"";let r=t.points.map(u=>({x:u.x+this.padding,y:u.y+this.padding})),n=`M${r[0].x},${r[0].y}`;for(let u=1;u<r.length;u++)n+=` L${r[u].x},${r[u].y}`;let i="",o=2,a="url(#arrow)";switch(t.type){case"open":a="";break;case"dotted":i="5,5";break;case"thick":o=3;break;case"invisible":i="0,100000",a="";break}let s=`<path d="${n}" stroke="#666" stroke-width="${o}" fill="none"`;if(i&&(s+=` stroke-dasharray="${i}"`),a&&(s+=` marker-end="${a}"`),s+=" />",t.label){let u=r[Math.floor(r.length/2)],l=`<rect x="${u.x-30}" y="${u.y-10}" width="60" height="20" fill="white" opacity="0.9" rx="3" />`,c=`<text x="${u.x}" y="${u.y}" text-anchor="middle" dominant-baseline="middle" font-family="${this.fontFamily}" font-size="${this.fontSize-2}" fill="#333">${this.escapeXml(t.label)}</text>`;return`<g>
    ${s}
    ${l}
    ${c}
  </g>`}return s}escapeXml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};var Ha=class{constructor(t,r){this.graphBuilder=new pa,this.layoutEngine=t||new ao,this.renderer=r||new uo}render(t,r={}){let n=[],i=r.layoutEngine||this.layoutEngine,o=r.renderer||this.renderer;try{let a=qs(t);if(a.errors&&a.errors.length>0)for(let f of a.errors)n.push({line:f.line||1,column:f.column||1,message:f.message,severity:"error",code:"LEXER_ERROR"});st.reset(),st.input=a.tokens;let s=st.diagram();if(st.errors&&st.errors.length>0)for(let f of st.errors){let h=f.token;n.push({line:h?.startLine||1,column:h?.startColumn||1,message:f.message,severity:"error",code:"PARSER_ERROR"})}let u=this.graphBuilder.build(s),l;try{l=i.layout(u)}catch(f){return n.push({line:1,column:1,message:f.message||"Layout calculation failed",severity:"error",code:"LAYOUT_ERROR"}),{svg:this.generateErrorSvg(f.message||"Layout calculation failed"),graph:u,errors:n}}let c=o.render(l);return r.showErrors&&n.length>0&&(c=this.addErrorOverlays(c,n)),{svg:c,graph:u,errors:n}}catch(a){let s=this.generateErrorSvg(a.message||"Unknown error occurred");return n.push({line:1,column:1,message:a.message||"Unknown error occurred",severity:"error",code:"RENDER_ERROR"}),{svg:s,graph:{nodes:[],edges:[],direction:"TD"},errors:n}}}renderAny(t,r={}){return t.trim().split(`
`)[0].match(/^(flowchart|graph)\s+/i)?this.render(t,r):{svg:this.generateErrorSvg("Unsupported diagram type. Currently only flowchart diagrams are supported for rendering."),graph:{nodes:[],edges:[],direction:"TD"},errors:[{line:1,column:1,message:"Unsupported diagram type",severity:"error",code:"UNSUPPORTED_TYPE"}]}}addErrorOverlays(t,r){let n=`
    <style>
      .error-indicator {
        fill: #ff0000;
        opacity: 0.8;
      }
      .error-text {
        fill: white;
        font-family: Arial, sans-serif;
        font-size: 12px;
        font-weight: bold;
      }
    </style>`,i=`
    <g id="errors">
      <rect x="5" y="5" width="100" height="25" rx="3" class="error-indicator" />
      <text x="55" y="20" text-anchor="middle" class="error-text">${r.length} error${r.length!==1?"s":""}</text>
    </g>`;return t.replace("</svg>",`${n}${i}</svg>`)}generateErrorSvg(t){return`<svg xmlns="http://www.w3.org/2000/svg" width="400" height="200" viewBox="0 0 400 200">
  <rect width="400" height="200" fill="#fee" stroke="#c00" stroke-width="2" />
  <text x="${400/2}" y="${200/2-20}" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="#c00">
    Render Error
  </text>
  <text x="${400/2}" y="${200/2+10}" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">
    ${this.wrapText(t,40).map((i,o)=>`<tspan x="${400/2}" dy="${o===0?0:15}">${this.escapeXml(i)}</tspan>`).join("")}
  </text>
</svg>`}wrapText(t,r){let n=t.split(" "),i=[],o="";for(let a of n)o.length+a.length+1<=r?o+=(o?" ":"")+a:(o&&i.push(o),o=a);return o&&i.push(o),i.slice(0,3)}escapeXml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};function t6(e,t={}){return new Ha(t.layoutEngine,t.renderer).renderAny(e,t)}function Upe(e,t={}){let{strict:r=!1,level:n="safe"}=t,i=e;for(let a=0;a<5;a++){let s=ha(i,{strict:r}),u=Ul(i,s.errors,n);if(u.length===0)return{fixed:i,errors:s.errors};let l=Pl(i,u);if(l===i)return{fixed:i,errors:s.errors};i=l}let o=ha(i,{strict:r});return{fixed:i,errors:o.errors}}export{Ha as MermaidRenderer,Pl as applyEdits,Ul as computeFixes,qm as detectDiagramType,Upe as fixText,t6 as renderMermaid,ha as validate};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
